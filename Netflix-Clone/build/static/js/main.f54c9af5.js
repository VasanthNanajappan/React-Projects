/*! For license information please see main.f54c9af5.js.LICENSE.txt */
(()=>{var e={219:(e,t,n)=>{"use strict";var r=n(763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var u=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=l(n);h&&(s=s.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<s.length;++g){var y=s[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{u(t,y,v)}catch(w){}}}}return t}},983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function S(e){return _(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||_(e)===l},t.isConcurrentMode=S,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=_},763:(e,t,n)=>{"use strict";e.exports=n(983)},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case T:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function oe(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function ke(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==Ee||null!==Ie)&&(Ae(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Re=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Re=!1}function Le(e,t,n,r,i,o,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,o,s,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ke(i),e;if(s===r)return Ke(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,It,Tt,kt=!1,Ct=[],xt=null,At=null,Nt=null,Pt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(jt),Ot.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==At&&zt(At,e),null!==Nt&&zt(Nt,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=o}}function Gt(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=o}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Mt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Mt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=wi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(un),hn=F({},un,{view:0,detail:0}),dn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(F({},fn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),yn=on(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(vn),bn=on(F({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return In}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(kn),xn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=on(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Pn),Rn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=lr(n,o);var s=lr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Ir={};function Tr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Ar=Tr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),c(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(kr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(xr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,c,u){if(ze.apply(this,arguments),Me){if(!Me)throw Error(o(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Fr(i,a,u),o=c}else for(s=0;s<r.length;s++){if(c=(a=r[s]).instance,u=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Fr(i,a,u),o=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(c=s.tag)||6===c){r=o=s;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=o,i=_e(n),s=[];e:{var a=Nr.get(e);if(void 0!==a){var c=ln,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":u="focus",c=gn;break;case"focusout":u="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=An;break;case kr:case Cr:case xr:c=yn;break;case Ar:c=Nn;break;case"scroll":c=dn;break;case"wheel":c=On;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var l=0!==(4&t),h=!l&&"scroll"===e,d=l?null!==a?a+"Capture":null:a;l=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Oe(p,d))&&l.push(Wr(p,m,f)))),h)break;p=p.return}0<l.length&&(a=new c(a,u,null,n,i),s.push({event:a,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==u?a:bi(u),(a=new l(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((l=new l(d,p+"enter",u,n,i)).target=f,l.relatedTarget=h,m=l),h=m,c&&u)e:{for(d=u,p=0,f=l=c;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)l=Hr(l),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Hr(l),d=Hr(d)}l=null}else l=null;null!==c&&Qr(s,a,c,l,!1),null!==u&&null!==h&&Qr(s,h,u,l,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=$n;else if(Kn(a))if(Jn)g=sr;else{g=ir;var y=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),s.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Ur(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(c=Oe(n,o))&&s.unshift(Wr(n,c,a)):i||null!=(c=Oe(n,o))&&s.push(Wr(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[di])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function Ii(e){return{current:e}}function Ti(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function ki(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ci={},xi=Ii(Ci),Ai=Ii(!1),Ni=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ti(Ai),Ti(xi)}function Di(e,t,n){if(xi.current!==Ci)throw Error(o(168));ki(xi,t),ki(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=xi.current,ki(xi,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(xi),ki(xi,e)):Ti(Ai),ki(Ai,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Wi=null,Gi=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$i=1<<32-st(t)+i|n<<i|r,Ji=o+e}else $i=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Wi;)Wi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Ou(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ou(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(co(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return lo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(co(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ui(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ui(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vo=Ii(null),wo=null,bo=null,_o=null;function So(){_o=bo=wo=null}function Eo(e){var t=vo.current;Ti(vo),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function To(e,t){wo=e,_o=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===wo)throw Error(o(308));bo=e,wo.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Co=null;function xo(e){null===Co?Co=[e]:Co.push(e)}function Ao(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xo(t)):(n.next=i.next,i.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ac)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,No(e,n)}return null===(i=r.interleaved)?(t.next=t,xo(r)):(t.next=i.next,i.next=t),r.interleaved=t,No(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Po=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,u=c.next;c.next=null,null===s?o=u:s.next=u,s=c;var l=e.alternate;null!==l&&((a=(l=l.updateQueue).lastBaseUpdate)!==s&&(null===a?l.firstBaseUpdate=u:a.next=u,l.lastBaseUpdate=c))}if(null!==o){var h=i.baseState;for(s=0,l=u=c=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Po=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===l?(u=l=f,c=h):l=l.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===l&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fc|=s,e.lanes=s,e.memoizedState=h}}function jo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Vo=(new r.Component).refs;function zo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),o=Do(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(ru(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),o=Do(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(ru(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Do(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(ru(t,e,r,n),Mo(t,e,r))}};function qo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function Ko(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=ko(o):(i=Oi(t)?Ni:xi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ko(o):(o=Oi(t)?Ni:xi.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(zo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bo.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ho(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Vo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Yo(o)===t.type)?((r=i(t,n.props)).ref=Ho(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=Ho(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=Ho(e,null,t),n.return=e,n;case S:return(t=ju(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mu(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?l(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function m(i,o,a,c){for(var u=null,l=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===l?u=y:l.sibling=y,l=y,h=g}if(m===a.length)return n(i,h),io&&Xi(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(o=s(h,o,m),null===l?u=h:l.sibling=h,l=h);return io&&Xi(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===l?u=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Xi(i,m),u}function g(i,a,c,u){var l=L(c);if("function"!==typeof l)throw Error(o(150));if(null==(c=l.call(c)))throw Error(o(151));for(var h=l=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?l=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),io&&Xi(i,g),l;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(i,v.value,u))&&(a=s(v,a,g),null===h?l=v:h.sibling=v,h=v);return io&&Xi(i,g),l}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),io&&Xi(i,g),l}return function e(r,o,s,c){if("object"===typeof s&&null!==s&&s.type===E&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var u=s.key,l=o;null!==l;){if(l.key===u){if((u=s.type)===E){if(7===l.tag){n(r,l.sibling),(o=i(l,s.props.children)).return=r,r=o;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&Yo(u)===l.type){n(r,l.sibling),(o=i(l,s.props)).ref=Ho(r,l,s),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}s.type===E?((o=Mu(s.props.children,r.mode,c,s.key)).return=r,r=o):((c=Lu(s.type,s.key,s.props,null,r.mode,c)).ref=Ho(r,o,s),c.return=r,r=c)}return a(r);case S:e:{for(l=s.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=ju(s,r.mode,c)).return=r,r=o}return a(r);case O:return e(r,o,(l=s._init)(s._payload),c)}if(te(s))return m(r,o,s,c);if(L(s))return g(r,o,s,c);Qo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Uu(s,r.mode,c)).return=r,r=o),a(r)):n(r,o)}}var Jo=$o(!0),Xo=$o(!1),Zo={},es=Ii(Zo),ts=Ii(Zo),ns=Ii(Zo);function rs(e){if(e===Zo)throw Error(o(174));return e}function is(e,t){switch(ki(ns,t),ki(ts,e),ki(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(es),ki(es,t)}function os(){Ti(es),Ti(ts),Ti(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=ce(t,e.type);t!==n&&(ki(ts,e),ki(es,n))}function as(e){ts.current===e&&(Ti(es),Ti(ts))}var cs=Ii(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ls=[];function hs(){for(var e=0;e<ls.length;e++)ls[e]._workInProgressVersionPrimary=null;ls.length=0}var ds=b.ReactCurrentDispatcher,fs=b.ReactCurrentBatchConfig,ps=0,ms=null,gs=null,ys=null,vs=!1,ws=!1,bs=0,_s=0;function Ss(){throw Error(o(321))}function Es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Is(e,t,n,r,i,s){if(ps=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),ws){s=0;do{if(ws=!1,bs=0,25<=s)throw Error(o(301));s+=1,ys=gs=null,t.updateQueue=null,ds.current=ua,e=n(r,i)}while(ws)}if(ds.current=sa,t=null!==gs&&null!==gs.next,ps=0,ys=gs=ms=null,vs=!1,t)throw Error(o(300));return e}function Ts(){var e=0!==bs;return bs=0,e}function ks(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?ms.memoizedState=ys=e:ys=ys.next=e,ys}function Cs(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===ys?ms.memoizedState:ys.next;if(null!==t)ys=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ys?ms.memoizedState=ys=e:ys=ys.next=e}return ys}function xs(e,t){return"function"===typeof t?t(e):t}function As(e){var t=Cs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var c=a=null,u=null,l=s;do{var h=l.lane;if((ps&h)===h)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=d,a=r):u=u.next=d,ms.lanes|=h,Fc|=h}l=l.next}while(null!==l&&l!==s);null===u?a=r:u.next=c,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ms.lanes|=s,Fc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ns(e){var t=Cs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ps(){}function Os(e,t){var n=ms,r=Cs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Ks(Ls.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,js(9,Ds.bind(null,n,r,i,t),void 0,null),null===Nc)throw Error(o(349));0!==(30&ps)||Rs(n,t,i)}return i}function Rs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ds(e,t,n,r){t.value=n,t.getSnapshot=r,Ms(t)&&Fs(e)}function Ls(e,t,n){return n((function(){Ms(t)&&Fs(e)}))}function Ms(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fs(e){var t=No(e,1);null!==t&&ru(t,e,1,-1)}function Us(e){var t=ks();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function js(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vs(){return Cs().memoizedState}function zs(e,t,n,r){var i=ks();ms.flags|=e,i.memoizedState=js(1|t,n,void 0,void 0===r?null:r)}function Bs(e,t,n,r){var i=Cs();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&Es(r,s.deps))return void(i.memoizedState=js(t,n,o,r))}ms.flags|=e,i.memoizedState=js(1|t,n,o,r)}function qs(e,t){return zs(8390656,8,e,t)}function Ks(e,t){return Bs(2048,8,e,t)}function Ws(e,t){return Bs(4,2,e,t)}function Gs(e,t){return Bs(4,4,e,t)}function Hs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4,4,Hs.bind(null,t,e),n)}function Ys(){}function $s(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Es(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ms.lanes|=n,Fc|=n,e.baseState=!0),t)}function Zs(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{wt=n,fs.transition=r}}function ea(){return Cs().memoizedState}function ta(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Ao(e,t,n,r))){ru(n,e,r,tu()),oa(n,t,r)}}function na(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var c=t.interleaved;return null===c?(i.next=i,xo(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ao(e,t,i,r))&&(ru(n,e,r,i=tu()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ia(e,t){ws=vs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var sa={readContext:ko,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},aa={readContext:ko,useCallback:function(e,t){return ks().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:qs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zs(4194308,4,Hs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return zs(4,2,e,t)},useMemo:function(e,t){var n=ks();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ks();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ks().memoizedState=e},useState:Us,useDebugValue:Ys,useDeferredValue:function(e){return ks().memoizedState=e},useTransition:function(){var e=Us(!1),t=e[0];return e=Zs.bind(null,e[1]),ks().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,i=ks();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Nc)throw Error(o(349));0!==(30&ps)||Rs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qs(Ls.bind(null,r,s,e),[e]),r.flags|=2048,js(9,Ds.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ks(),t=Nc.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-st($i)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:ko,useCallback:$s,useContext:ko,useEffect:Ks,useImperativeHandle:Qs,useInsertionEffect:Ws,useLayoutEffect:Gs,useMemo:Js,useReducer:As,useRef:Vs,useState:function(){return As(xs)},useDebugValue:Ys,useDeferredValue:function(e){return Xs(Cs(),gs.memoizedState,e)},useTransition:function(){return[As(xs)[0],Cs().memoizedState]},useMutableSource:Ps,useSyncExternalStore:Os,useId:ea,unstable_isNewReconciler:!1},ua={readContext:ko,useCallback:$s,useContext:ko,useEffect:Ks,useImperativeHandle:Qs,useInsertionEffect:Ws,useLayoutEffect:Gs,useMemo:Js,useReducer:Ns,useRef:Vs,useState:function(){return Ns(xs)},useDebugValue:Ys,useDeferredValue:function(e){var t=Cs();return null===gs?t.memoizedState=e:Xs(t,gs.memoizedState,e)},useTransition:function(){return[Ns(xs)[0],Cs().memoizedState]},useMutableSource:Ps,useSyncExternalStore:Os,useId:ea,unstable_isNewReconciler:!1};function la(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wc||(Wc=!0,Gc=r),da(0,t)},n}function ma(e,t,n){(n=Do(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Xo(t,null,n,r):Jo(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var o=t.ref;return To(t,i),r=Is(e,t,n,r,o,i),n=Ts(),null===e||ba?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ru(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ia(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Du(o,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(cr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dc,Rc),Rc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dc,Rc),Rc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ki(Dc,Rc),Rc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ki(Dc,Rc),Rc|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var o=Oi(n)?Ni:xi.current;return o=Pi(t,o),To(t,i),n=Is(e,t,n,r,o,i),r=Ts(),null===e||ba?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function xa(e,t,n,r,i){if(Oi(n)){var o=!0;Mi(t)}else o=!1;if(To(t,i),null===t.stateNode)Ka(e,t),Ko(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ko(u):u=Pi(t,u=Oi(n)?Ni:xi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==u)&&Wo(t,s,r,u),Po=!1;var d=t.memoizedState;s.state=d,Uo(t,r,s,i),c=t.memoizedState,a!==r||d!==c||Ai.current||Po?("function"===typeof l&&(zo(t,n,l,r),c=t.memoizedState),(a=Po||qo(t,n,a,r,d,c,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ro(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:yo(t.type,a),s.props=u,h=t.pendingProps,d=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=ko(c):c=Pi(t,c=Oi(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==c)&&Wo(t,s,r,c),Po=!1,d=t.memoizedState,s.state=d,Uo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Po?("function"===typeof f&&(zo(t,n,f,r),p=t.memoizedState),(u=Po||qo(t,n,u,r,d,p,c)||!1)?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=c,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,o,i)}function Aa(e,t,n,r,i,o){ka(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Wa(e,t,o);r=t.stateNode,wa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),is(e,t.containerInfo)}function Pa(e,t,n,r,i){return po(),mo(i),t.flags|=256,_a(e,t,n,r),t.child}var Oa,Ra,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,s=cs.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ki(cs,1&s),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fu(c,i,0,null),e=Mu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,c));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(s=Mu(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,s);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Va(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Nc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,No(e,i),ru(r,e,i,-1))}return gu(),Va(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xu.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,s,n);if(a){a=i.fallback,c=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Du(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Du(r,a):(a=Mu(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Du(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&mo(r),Jo(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function Ba(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=cs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(cs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,o);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Ha(t),null;case 3:return r=t.stateNode,os(),Ti(Ai),Ti(xi),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(au(oo),oo=null))),Ra(e,t),Ha(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ha(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,s),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jr("invalid",r);break;case"textarea":ie(r,s),jr("invalid",r)}for(var c in ve(n,s),i=null,s)if(s.hasOwnProperty(c)){var u=s[c];"children"===c?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(s in ve(n,i),u=i)if(u.hasOwnProperty(s)){var l=u[s];"style"===s?ge(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===s?"string"===typeof l?("textarea"!==n||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=l&&"onScroll"===s&&jr("scroll",e):null!=l&&w(e,s,l,c))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(cs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),s=!1}else null!==oo&&(au(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&cs.current)?0===Lc&&(Lc=3):gu())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return os(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Eo(t.type._context),Ha(t),null;case 19:if(Ti(cs),null===(s=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(c=s.rendering))if(r)Ga(s,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=us(e))){for(t.flags|=128,Ga(s,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(cs,1&cs.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>qc&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=us(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!io)return Ha(t),null}else 2*Je()-s.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=cs.current,ki(cs,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ya(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ti(Ai),Ti(xi),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ti(cs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(cs),null;case 4:return os(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ve(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var c=i[l];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(c=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(a.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&jr("scroll",e),s||c===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tu(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Tu(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tc(t,n,o)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tc(n,t,s),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Ja&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tu(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fc(e,t,n),Ja=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(o(160));pc(s,a,i),hc=null,dc=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(l){Tu(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),vc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Tu(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Tu(e,e.return,g)}}break;case 1:gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===s.type&&null!=s.name&&J(i,s),we(c,a);var l=we(c,s);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,l)}switch(c){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Tu(e,e.return,g)}}break;case 6:if(gc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Tu(e,e.return,g)}}break;case 3:if(gc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tu(e,e.return,g)}break;case 4:default:gc(t,e),vc(e);break;case 13:gc(t,e),vc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bc=Je())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(l=Ja)||h,gc(t,e),Ja=l):gc(t,e),vc(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tu(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Sc(d);continue}}null!==p?(p.return=f,Za=p):Sc(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,l?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=me("display",a))}catch(g){Tu(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Tu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),vc(e),4&r&&mc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lc(e,cc(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;uc(e,cc(e),s);break;default:throw Error(o(161))}}catch(a){Tu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$a;if(!s){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ja;a=$a;var u=Ja;if($a=s,(Ja=c)&&!u)for(Za=i;null!==Za;)c=(s=Za).child,22===s.tag&&null!==s.memoizedState?Ec(i):null!==c?(c.return=s,Za=c):Ec(i);for(;null!==o;)Za=o,bc(o,t,n),o=o.sibling;Za=i,$a=a,Ja=u}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Za=o):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&jo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}jo(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(o(163))}Ja||512&t.flags&&oc(t)}catch(f){Tu(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sc(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Ec(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tu(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tu(t,i,c)}}var o=t.return;try{oc(t)}catch(c){Tu(t,o,c)}break;case 5:var s=t.return;try{oc(t)}catch(c){Tu(t,s,c)}}}catch(c){Tu(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Ic,Tc=Math.ceil,kc=b.ReactCurrentDispatcher,Cc=b.ReactCurrentOwner,xc=b.ReactCurrentBatchConfig,Ac=0,Nc=null,Pc=null,Oc=0,Rc=0,Dc=Ii(0),Lc=0,Mc=null,Fc=0,Uc=0,jc=0,Vc=null,zc=null,Bc=0,qc=1/0,Kc=null,Wc=!1,Gc=null,Hc=null,Qc=!1,Yc=null,$c=0,Jc=0,Xc=null,Zc=-1,eu=0;function tu(){return 0!==(6&Ac)?Je():-1!==Zc?Zc:Zc=Je()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Ac)&&0!==Oc?Oc&-Oc:null!==go.transition?(0===eu&&(eu=mt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function ru(e,t,n,r){if(50<Jc)throw Jc=0,Xc=null,Error(o(185));yt(e,n,r),0!==(2&Ac)&&e===Nc||(e===Nc&&(0===(2&Ac)&&(Uc|=n),4===Lc&&cu(e,Oc)),iu(e,r),1===n&&0===Ac&&0===(1&t.mode)&&(qc=Je()+500,ji&&Bi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,c=i[s];-1===c?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Nc?Oc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(uu.bind(null,e)):zi(uu.bind(null,e)),si((function(){0===(6&Ac)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nu(n,ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ou(e,t){if(Zc=-1,eu=0,0!==(6&Ac))throw Error(o(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===Nc?Oc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yu(e,r);else{t=r;var i=Ac;Ac|=2;var s=mu();for(Nc===e&&Oc===t||(Kc=null,qc=Je()+500,fu(e,t));;)try{wu();break}catch(c){pu(e,c)}So(),kc.current=s,Ac=i,null!==Pc?t=0:(Nc=null,Oc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=su(e,i))),1===t)throw n=Mc,fu(e,0),cu(e,r),iu(e,Je()),n;if(6===t)cu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,r))&&(0!==(s=pt(e))&&(r=s,t=su(e,s))),1===t))throw n=Mc,fu(e,0),cu(e,r),iu(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Su(e,zc,Kc);break;case 3:if(cu(e,r),(130023424&r)===r&&10<(t=Bc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Su.bind(null,e,zc,Kc),t);break}Su(e,zc,Kc);break;case 4:if(cu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(Su.bind(null,e,zc,Kc),r);break}Su(e,zc,Kc);break;default:throw Error(o(329))}}}return iu(e,Je()),e.callbackNode===n?ou.bind(null,e):null}function su(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=zc,zc=n,null!==t&&au(t)),e}function au(e){null===zc?zc=e:zc.push.apply(zc,e)}function cu(e,t){for(t&=~jc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Ac))throw Error(o(327));Eu();var t=dt(e,0);if(0===(1&t))return iu(e,Je()),null;var n=yu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Mc,fu(e,0),cu(e,t),iu(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,zc,Kc),iu(e,Je()),null}function lu(e,t){var n=Ac;Ac|=1;try{return e(t)}finally{0===(Ac=n)&&(qc=Je()+500,ji&&Bi())}}function hu(e){null!==Yc&&0===Yc.tag&&0===(6&Ac)&&Eu();var t=Ac;Ac|=1;var n=xc.transition,r=wt;try{if(xc.transition=null,wt=1,e)return e()}finally{wt=r,xc.transition=n,0===(6&(Ac=t))&&Bi()}}function du(){Rc=Dc.current,Ti(Dc)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pc)for(n=Pc.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:os(),Ti(Ai),Ti(xi),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ti(cs);break;case 10:Eo(r.type._context);break;case 22:case 23:du()}n=n.return}if(Nc=e,Pc=e=Du(e.current,null),Oc=Rc=t,Lc=0,Mc=null,jc=Uc=Fc=0,zc=Vc=null,null!==Co){for(t=0;t<Co.length;t++)if(null!==(r=(n=Co[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Co=null}return e}function pu(e,t){for(;;){var n=Pc;try{if(So(),ds.current=sa,vs){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vs=!1}if(ps=0,ys=gs=ms=null,ws=!1,bs=0,Cc.current=null,null===n||null===n.return){Lc=1,Mc=t,Pc=null;break}e:{var s=e,a=n.return,c=n,u=t;if(t=Oc,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,c,0,t),1&p.mode&&ga(s,l,t),u=l;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ga(s,l,t),gu();break e}u=Error(o(426))}else if(io&&1&c.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,c,0,t),mo(la(u,c));break e}}s=u=la(u,c),4!==Lc&&(Lc=2),null===Vc?Vc=[s]:Vc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,pa(0,u,t));break e;case 1:c=u;var v=s.type,w=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hc||!Hc.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,ma(s,c,t));break e}}s=s.return}while(null!==s)}_u(n)}catch(b){t=b,Pc===n&&null!==n&&(Pc=n=n.return);continue}break}}function mu(){var e=kc.current;return kc.current=sa,null===e?sa:e}function gu(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Nc||0===(268435455&Fc)&&0===(268435455&Uc)||cu(Nc,Oc)}function yu(e,t){var n=Ac;Ac|=2;var r=mu();for(Nc===e&&Oc===t||(Kc=null,fu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(So(),Ac=n,kc.current=r,null!==Pc)throw Error(o(261));return Nc=null,Oc=0,Lc}function vu(){for(;null!==Pc;)bu(Pc)}function wu(){for(;null!==Pc&&!Ye();)bu(Pc)}function bu(e){var t=Ic(e.alternate,e,Rc);e.memoizedProps=e.pendingProps,null===t?_u(e):Pc=t,Cc.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Rc)))return void(Pc=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Pc=n);if(null===e)return Lc=6,void(Pc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Lc&&(Lc=5)}function Su(e,t,n){var r=wt,i=xc.transition;try{xc.transition=null,wt=1,function(e,t,n,r){do{Eu()}while(null!==Yc);if(0!==(6&Ac))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Nc&&(Pc=Nc=null,Oc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Nu(tt,(function(){return Eu(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=xc.transition,xc.transition=null;var a=wt;wt=1;var c=Ac;Ac|=4,Cc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,c=-1,u=-1,l=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==s||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++l===i&&(c=a),f===s&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===u?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(_){Tu(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),yc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wc(n,e,i),$e(),Ac=c,wt=a,xc.transition=s}else e.current=n;if(Qc&&(Qc=!1,Yc=e,$c=i),s=e.pendingLanes,0===s&&(Hc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,e=Gc,Gc=null,e;0!==(1&$c)&&0!==e.tag&&Eu(),s=e.pendingLanes,0!==(1&s)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,Bi()}(e,t,n,r)}finally{xc.transition=i,wt=r}return null}function Eu(){if(null!==Yc){var e=bt($c),t=xc.transition,n=wt;try{if(xc.transition=null,wt=16>e?16:e,null===Yc)var r=!1;else{if(e=Yc,Yc=null,$c=0,0!==(6&Ac))throw Error(o(331));var i=Ac;for(Ac|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var c=s.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for(Za=l;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,s)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(sc(h),h===l){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:rc(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Za=v;break e}Za=s.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(S){Tu(c,c.return,S)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Ac=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,xc.transition=t}}return!1}function Iu(e,t,n){e=Lo(e,t=pa(0,t=la(n,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function Tu(e,t,n){if(3===e.tag)Iu(e,e,n);else for(;null!==t;){if(3===t.tag){Iu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Lo(t,e=ma(t,e=la(n,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Nc===e&&(Oc&n)===n&&(4===Lc||3===Lc&&(130023424&Oc)===Oc&&500>Je()-Bc?fu(e,0):jc|=n),iu(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tu();null!==(e=No(e,t))&&(yt(e,t,n),iu(e,n))}function xu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cu(e,n)}function Nu(e,t){return He(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,n,r){return new Pu(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Ru(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Mu(n.children,i,s,t);case I:a=8,i|=8;break;case T:return(e=Ou(12,n,t,2|i)).elementType=T,e.lanes=s,e;case A:return(e=Ou(13,n,t,i)).elementType=A,e.lanes=s,e;case N:return(e=Ou(19,n,t,i)).elementType=N,e.lanes=s,e;case R:return Fu(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case P:a=14;break e;case O:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ou(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Mu(e,t,n,r){return(e=Ou(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Ou(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uu(e,t,n){return(e=Ou(6,e,null,t)).lanes=n,e}function ju(e,t,n){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,o,s,a,c){return e=new Vu(e,t,n,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ou(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Bu(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function qu(e,t,n,r,i,o,s,a,c){return(e=zu(n,r,!0,e,0,o,0,a,c)).context=Bu(null),n=e.current,(o=Do(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,yt(e,i,r),iu(e,r),e}function Ku(e,t,n,r){var i=t.current,o=tu(),s=nu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,s))&&(ru(e,i,s,o),Mo(e,i,s)),s}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Ic=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),po();break;case 5:ss(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(cs,1&cs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(cs,1&cs.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(cs,1&cs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(cs,cs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Pi(t,xi.current);To(t,n),i=Is(null,t,r,e,i,n);var s=Ts();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=Bo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=Aa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ro(e,t),Uo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Pa(e,t,r,n,i=la(Error(o(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=la(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&uo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Ua(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,ki(vo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ai.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var u=c.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Do(-1,n&-n)).tag=2;var l=s.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),l.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Io(s.return,n,t),c.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Io(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,To(t,n),r=r(i=ko(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),Ea(e,t,r,i=yo(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Ka(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,To(t,n),Ko(t,r,i),Go(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(o(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function $u(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function el(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wu(s);a.call(e)}}Ku(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wu(s);o.call(e)}}var s=qu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),hu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wu(c);a.call(e)}}var c=zu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),hu((function(){Ku(t,c,n,r)})),c}(n,t,e,i,r);return Wu(s)}$u.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Ku(e,t,null,null)},$u.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Ku(null,e,null,null)})),t[pi]=null}},$u.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),iu(t,Je()),0===(6&Ac)&&(qc=Je()+500,Bi()))}break;case 13:hu((function(){var t=No(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Hu(e,1)}},St=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)ru(t,e,134217728,tu());Hu(e,134217728)}},Et=function(e){if(13===e.tag){var t=nu(e),n=No(e,t);if(null!==n)ru(n,e,t,tu());Hu(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));H(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=lu,Ae=hu;var tl={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,lu]},nl={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),ot=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ju(e))throw Error(o(299));var n=!1,r="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $u(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(o(40));return!!e._reactRootContainer&&(hu((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.H=r.createRoot,r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},358:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case d:case f:return e;default:switch(e=e&&e.$$typeof){case l:case u:case h:case m:case p:case c:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},706:(e,t,n)=>{"use strict";n(358)},292:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},340:(e,t,n)=>{var r=n(292);e.exports=f,e.exports.parse=o,e.exports.compile=function(e,t){return a(o(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,s=0,a="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(s,f),s=f+h.length,d)a+=d[1];else{var p=e[s],m=n[2],g=n[3],y=n[4],v=n[5],w=n[6],b=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,S="+"===w||"*"===w,E="?"===w||"*"===w,I=n[2]||l,T=y||v;r.push({name:g||o++,prefix:m||"",delimiter:I,optional:E,repeat:S,partial:_,asterisk:!!b,pattern:T?u(T):b?".*":"[^"+c(I)+"]+?"})}}return s<e.length&&(a+=e.substr(s)),a&&r.push(a),r}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var o="",a=t||{},c=(i||{}).pretty?s:encodeURIComponent,u=0;u<e.length;u++){var l=e[u];if("string"!==typeof l){var h,d=a[l.name];if(null==d){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=c(d[f]),!n[u].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===f?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(d),!n[u].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');o+=l.prefix+h}}else o+=l}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,s="",a=0;a<e.length;a++){var u=e[a];if("string"===typeof u)s+=c(u);else{var d=c(u.prefix),f="(?:"+u.pattern+")";t.push(u),u.repeat&&(f+="(?:"+d+f+")*"),s+=f=u.optional?u.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=c(n.delimiter||"/"),m=s.slice(-p.length)===p;return i||(s=(m?s.slice(0,-p.length):s)+"(?:"+p+"(?=$))?"),s+=o?"$":i&&m?"":"(?="+p+"|$)",l(new RegExp("^"+s,h(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(o(e,n),t,n)}(e,t,n)}},5:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function S(e){return _(e)===h}},681:(e,t,n)=>{"use strict";n(5)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:o,_owner:a.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===o?"."+x(c,0):o,_(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(s,t,i,"",(function(e){return e}))):null!=s&&(k(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",_(e))for(var u=0;u<e.length;u++){var l=o+x(a=e[u],u);c+=A(a,t,i,l,s)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(a=e.next()).done;)c+=A(a=a.value,t,i,l=o+x(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)S.call(t,u)&&!I.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,c=e[a],u=a+1,l=e[u];if(0>o(c,n))u<i&&0>o(l,c)?(e[r]=l,e[u]=n,r=u):(e[r]=c,e[a]=n,r=a);else{if(!(u<i&&0>o(l,n)))break e;e[r]=l,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],l=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(u,t)}t=r(l)}}function _(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,R(S);else{var t=r(l);null!==t&&D(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var o=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!A());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var c=!0;else{var h=r(l);null!==h&&D(_,h.startTime-n),c=!1}return c}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,T=null,k=-1,C=5,x=-1;function A(){return!(t.unstable_now()-x<C)}function N(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?E():(I=!1,T=null)}}else I=!1}if("function"===typeof w)E=function(){w(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=N,E=function(){O.postMessage(null)}}else E=function(){y(N,0)};function R(e){T=e,I||(I=!0,E())}function D(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(l,e),null===r(u)&&e===r(l)&&(g?(v(k),k=-1):g=!0,D(_,o-s))):(e.sortIndex=a,n(u,e),m||p||(m=!0,R(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},956:(e,t,n)=>{"use strict";var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return a((function(){i.value=n,i.getSnapshot=t,u(i)&&l({inst:i})}),[e,n,t]),s((function(){return u(i)&&l({inst:i}),e((function(){u(i)&&l({inst:i})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},39:(e,t,n)=>{"use strict";var r=n(43),i=n(461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,a=r.useRef,c=r.useEffect,u=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u((function(){function e(e){if(!c){if(c=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,a=n)}var s,a,c=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var f=s(e,h[0],h[1]);return c((function(){d.hasValue=!0,d.value=f}),[f]),l(f),f}},461:(e,t,n)=>{"use strict";e.exports=n(956)},443:(e,t,n)=>{"use strict";e.exports=n(39)},928:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/Netflix-img.c3acf0c9adba38c2101c.png"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".2b088906.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="clone-netflix:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],c=r[2],u=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)c(n)}for(t&&t(r);u<s.length;u++)o=s[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkclone_netflix=self.webpackChunkclone_netflix||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>it,hasStandardBrowserEnv:()=>ot,hasStandardBrowserWebWorkerEnv:()=>at});var t={};n.r(t),n.d(t,{FirebaseError:()=>An,SDK_VERSION:()=>Or,_DEFAULT_ENTRY_NAME:()=>br,_addComponent:()=>Ir,_addOrOverwriteComponent:()=>Tr,_apps:()=>Sr,_clearComponents:()=>Ar,_components:()=>Er,_getProvider:()=>Cr,_registerComponent:()=>kr,_removeServiceInstance:()=>xr,deleteApp:()=>Mr,getApp:()=>Dr,getApps:()=>Lr,initializeApp:()=>Rr,onLog:()=>Ur,registerVersion:()=>Fr,setLogLevel:()=>jr});var r=n(43),i=n(391);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}var a=n(173),c=n.n(a);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e){return"/"===e.charAt(0)}function h(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const d=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&l(e),s=t&&l(t),a=o||s;if(e&&l(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var u=0,d=i.length;d>=0;d--){var f=i[d];"."===f?h(i,d):".."===f?(h(i,d),u++):u&&(h(i,d),u--)}if(!a)for(;u--;u)i.unshift("..");!a||""===i[0]||i[0]&&l(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};var f=!0,p="Invariant failed";function m(e,t){if(!e){if(f)throw new Error(p);var n="function"===typeof t?t():t,r=n?"".concat(p,": ").concat(n):p;throw new Error(r)}}function g(e){return"/"===e.charAt(0)?e:"/"+e}function y(e){return"/"===e.charAt(0)?e.substr(1):e}function v(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function w(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function b(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function _(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=u({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=d(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function S(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var E=!("undefined"===typeof window||!window.document||!window.document.createElement);function I(e,t){t(window.confirm(e))}var T="popstate",k="hashchange";function C(){try{return window.history.state||{}}catch(e){return{}}}function x(e){void 0===e&&(e={}),E||m(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,s=void 0!==o&&o,a=i.getUserConfirmation,c=void 0===a?I:a,l=i.keyLength,h=void 0===l?6:l,d=e.basename?w(g(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return d&&(o=v(o,d)),_(o,r,n)}function p(){return Math.random().toString(36).substr(2,h)}var y=S();function x(e){u(V,e),V.length=t.length,y.notifyListeners(V.location,V.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||O(f(e.state))}function N(){O(f(C()))}var P=!1;function O(e){if(P)P=!1,x();else{y.confirmTransitionTo(e,"POP",c,(function(t){t?x({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(P=!0,M(i))}(e)}))}}var R=f(C()),D=[R.key];function L(e){return d+b(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(T,A),r&&window.addEventListener(k,N)):0===F&&(window.removeEventListener(T,A),r&&window.removeEventListener(k,N))}var j=!1;var V={length:t.length,action:"POP",location:R,createHref:L,push:function(e,r){var i="PUSH",o=_(e,r,p(),V.location);y.confirmTransitionTo(o,i,c,(function(e){if(e){var r=L(o),a=o.key,c=o.state;if(n)if(t.pushState({key:a,state:c},null,r),s)window.location.href=r;else{var u=D.indexOf(V.location.key),l=D.slice(0,u+1);l.push(o.key),D=l,x({action:i,location:o})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",o=_(e,r,p(),V.location);y.confirmTransitionTo(o,i,c,(function(e){if(e){var r=L(o),a=o.key,c=o.state;if(n)if(t.replaceState({key:a,state:c},null,r),s)window.location.replace(r);else{var u=D.indexOf(V.location.key);-1!==u&&(D[u]=o.key),x({action:i,location:o})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=y.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=y.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var A="hashchange",N={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+y(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:y,decodePath:g},slash:{encodePath:g,decodePath:g}};function P(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function R(e){window.location.replace(P(window.location.href)+"#"+e)}function D(e){void 0===e&&{},E||m(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?I:r,o=n.hashType,s=void 0===o?"slash":o,a=e.basename?w(g(e.basename)):"",c=N[s],l=c.encodePath,h=c.decodePath;function d(){var e=h(O());return a&&v(e,a),_(e)}var f=S();function p(e){u(V,e),V.length=t.length,f.notifyListeners(V.location,V.action)}var y=!1,T=null;function k(){var e=O(),t=l(e);if(e!==t)R(t);else{var n=d(),r=V.location;if(!y&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(T===b(n))return;null,function(e){if(y)!1,p();else{var t="POP";f.confirmTransitionTo(e,t,i,(function(n){n?p({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(b(t));-1===n&&0;var r=L.lastIndexOf(b(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(n)}}var C=O(),x=l(C);C!==x&&R(x);var D=d(),L=[b(D)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(A,k):0===F&&window.removeEventListener(A,k)}var j=!1;var V={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&P(window.location.href),n+"#"+l(a+b(e))},push:function(e,t){var n="PUSH",r=_(e,void 0,void 0,V.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b(r),i=l(a+t);if(O()!==i){t,function(e){window.location.hash=e}(i);var o=L.lastIndexOf(b(V.location)),s=L.slice(0,o+1);s.push(t),s,p({action:n,location:r})}else p()}}))},replace:function(e,t){var n="REPLACE",r=_(e,void 0,void 0,V.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b(r),i=l(a+t);O()!==i&&(t,R(i));var o=L.indexOf(b(V.location));-1!==o&&(L[o]=t),p({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=f.setPrompt(e);return j||(U(1),!0),function(){return j&&(!1,U(-1)),t()}},listen:function(e){var t=f.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function L(e,t,n){return Math.min(Math.max(e,t),n)}var M=n(340),F=n.n(M);n(681);function U(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(219);var j=1073741823,V="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var z=r.createContext||function(e,t){var n,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return V[e]=(V[e]||0)+1}()+"__",a=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}s(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(n="function"===typeof t?t(r,i):j,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(r.Component);a.childContextTypes=((n={})[o]=c().object.isRequired,n);var u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}s(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?j:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?j:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return u.contextTypes=((i={})[o]=c().object,i),{Provider:a,Consumer:u}},B=function(e){var t=z();return t.displayName=e,t},q=B("Router-History"),K=B("Router"),W=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}s(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return r.createElement(K.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},r.createElement(q.Provider,{children:this.props.children||null,value:this.props.history}))},t}(r.Component);r.Component;r.Component;var G={},H=1e4,Q=0;function Y(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,s=n.strict,a=void 0!==s&&s,c=n.sensitive,u=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=G[n]||(G[n]={});if(r[e])return r[e];var i=[],o={regexp:F()(e,i,t),keys:i};return Q<H&&(r[e]=o,Q++),o}(n,{end:o,strict:a,sensitive:u}),i=r.regexp,s=r.keys,c=i.exec(e);if(!c)return null;var l=c[0],h=c.slice(1),d=e===l;return o&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:s.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var $=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){var e=this;return r.createElement(K.Consumer,null,(function(t){t||m(!1);var n=e.props.location||t.location,i=u({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Y(n.pathname,e.props):t.match}),o=e.props,s=o.children,a=o.component,c=o.render;return Array.isArray(s)&&function(e){return 0===r.Children.count(e)}(s)&&(s=null),r.createElement(K.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:a?r.createElement(a,i):c?c(i):null:"function"===typeof s?s(i):null)}))},t}(r.Component);function J(e){return"/"===e.charAt(0)?e:"/"+e}function X(e,t){if(!e)return t;var n=J(e);return 0!==t.pathname.indexOf(n)?t:u({},t,{pathname:t.pathname.substr(n.length)})}function Z(e){return"string"===typeof e?e:b(e)}function ee(e){return function(){m(!1)}}function te(){}r.Component;var ne=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){var e=this;return r.createElement(K.Consumer,null,(function(t){t||m(!1);var n,i,o=e.props.location||t.location;return r.Children.forEach(e.props.children,(function(e){if(null==i&&r.isValidElement(e)){n=e;var s=e.props.path||e.props.from;i=s?Y(o.pathname,u({},e.props,{path:s})):t.match}})),i?r.cloneElement(n,{location:o,computedMatch:i}):null}))},t}(r.Component);var re=r.useContext;var ie=n(579);const oe=function(){const[e,t]=(0,r.useState)(!1),i=re(q),o=()=>{window.scrollY>100?t(!0):t(!1)};return(0,r.useEffect)((()=>(window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o))),[]),(0,ie.jsx)("div",{className:"nav ".concat(e&&"nav__black"),children:(0,ie.jsxs)("div",{className:"nav__content",children:[(0,ie.jsx)("img",{onClick:()=>i.push("/"),className:"nav__logo",src:n(928),alt:"Netflix-png"}),(0,ie.jsx)("img",{onClick:()=>i.push("/profile"),className:"nav__avatar",src:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png",alt:"Netflix-Avatar-logo"})]})})};function se(e,t){return function(){return e.apply(t,arguments)}}const{toString:ae}=Object.prototype,{getPrototypeOf:ce}=Object,ue=(e=>t=>{const n=ae.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),le=e=>(e=e.toLowerCase(),t=>ue(t)===e),he=e=>t=>typeof t===e,{isArray:de}=Array,fe=he("undefined");const pe=le("ArrayBuffer");const me=he("string"),ge=he("function"),ye=he("number"),ve=e=>null!==e&&"object"===typeof e,we=e=>{if("object"!==ue(e))return!1;const t=ce(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},be=le("Date"),_e=le("File"),Se=le("Blob"),Ee=le("FileList"),Ie=le("URLSearchParams");function Te(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),de(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function ke(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Ce="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,xe=e=>!fe(e)&&e!==Ce;const Ae=(Ne="undefined"!==typeof Uint8Array&&ce(Uint8Array),e=>Ne&&e instanceof Ne);var Ne;const Pe=le("HTMLFormElement"),Oe=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Re=le("RegExp"),De=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Te(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},Le="abcdefghijklmnopqrstuvwxyz",Me="0123456789",Fe={DIGIT:Me,ALPHA:Le,ALPHA_DIGIT:Le+Le.toUpperCase()+Me};const Ue=le("AsyncFunction"),je={isArray:de,isArrayBuffer:pe,isBuffer:function(e){return null!==e&&!fe(e)&&null!==e.constructor&&!fe(e.constructor)&&ge(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ge(e.append)&&("formdata"===(t=ue(e))||"object"===t&&ge(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&pe(e.buffer),t},isString:me,isNumber:ye,isBoolean:e=>!0===e||!1===e,isObject:ve,isPlainObject:we,isUndefined:fe,isDate:be,isFile:_e,isBlob:Se,isRegExp:Re,isFunction:ge,isStream:e=>ve(e)&&ge(e.pipe),isURLSearchParams:Ie,isTypedArray:Ae,isFileList:Ee,forEach:Te,merge:function e(){const{caseless:t}=xe(this)&&this||{},n={},r=(r,i)=>{const o=t&&ke(n,i)||i;we(n[o])&&we(r)?n[o]=e(n[o],r):we(r)?n[o]=e({},r):de(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Te(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Te(t,((t,r)=>{n&&ge(t)?e[r]=se(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&ce(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ue,kindOfTest:le,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(de(e))return e;let t=e.length;if(!ye(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Pe,hasOwnProperty:Oe,hasOwnProp:Oe,reduceDescriptors:De,freezeMethods:e=>{De(e,((t,n)=>{if(ge(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ge(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return de(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:ke,global:Ce,isContextDefined:xe,ALPHABET:Fe,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&ge(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(ve(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=de(e)?[]:{};return Te(e,((e,t)=>{const o=n(e,r+1);!fe(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Ue,isThenable:e=>e&&(ve(e)||ge(e))&&ge(e.then)&&ge(e.catch)};function Ve(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}je.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ze=Ve.prototype,Be={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Be[e]={value:e}})),Object.defineProperties(Ve,Be),Object.defineProperty(ze,"isAxiosError",{value:!0}),Ve.from=(e,t,n,r,i,o)=>{const s=Object.create(ze);return je.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ve.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const qe=Ve;function Ke(e){return je.isPlainObject(e)||je.isArray(e)}function We(e){return je.endsWith(e,"[]")?e.slice(0,-2):e}function Ge(e,t,n){return e?e.concat(t).map((function(e,t){return e=We(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const He=je.toFlatObject(je,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Qe=function(e,t,n){if(!je.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=je.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!je.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&je.isSpecCompliantForm(t);if(!je.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(je.isDate(e))return e.toISOString();if(!a&&je.isBlob(e))throw new qe("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(e)||je.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(je.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(je.isArray(e)&&function(e){return je.isArray(e)&&!e.some(Ke)}(e)||(je.isFileList(e)||je.endsWith(n,"[]"))&&(a=je.toArray(e)))return n=We(n),a.forEach((function(e,r){!je.isUndefined(e)&&null!==e&&t.append(!0===s?Ge([n],r,o):null===s?n:n+"[]",c(e))})),!1;return!!Ke(e)||(t.append(Ge(i,n,o),c(e)),!1)}const l=[],h=Object.assign(He,{defaultVisitor:u,convertValue:c,isVisitable:Ke});if(!je.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!je.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),je.forEach(n,(function(n,o){!0===(!(je.isUndefined(n)||null===n)&&i.call(t,n,je.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])})),l.pop()}}(e),t};function Ye(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function $e(e,t){this._pairs=[],e&&Qe(e,this,t)}const Je=$e.prototype;Je.append=function(e,t){this._pairs.push([e,t])},Je.toString=function(e){const t=e?function(t){return e.call(this,t,Ye)}:Ye;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Xe=$e;function Ze(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function et(e,t,n){if(!t)return e;const r=n&&n.encode||Ze,i=n&&n.serialize;let o;if(o=i?i(t,n):je.isURLSearchParams(t)?t.toString():new Xe(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const tt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){je.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},nt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Xe,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},it="undefined"!==typeof window&&"undefined"!==typeof document,ot=(st="undefined"!==typeof navigator&&navigator.product,it&&["ReactNative","NativeScript","NS"].indexOf(st)<0);var st;const at="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ct={...e,...rt};const ut=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&je.isArray(r)?r.length:o,a)return je.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&je.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&je.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(je.isFormData(e)&&je.isFunction(e.entries)){const n={};return je.forEachEntry(e,((e,r)=>{t(function(e){return je.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const lt={transitional:nt,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=je.isObject(e);i&&je.isHTMLForm(e)&&(e=new FormData(e));if(je.isFormData(e))return r?JSON.stringify(ut(e)):e;if(je.isArrayBuffer(e)||je.isBuffer(e)||je.isStream(e)||je.isFile(e)||je.isBlob(e))return e;if(je.isArrayBufferView(e))return e.buffer;if(je.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Qe(e,new ct.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ct.isNode&&je.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=je.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Qe(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(je.isString(e))try{return(t||JSON.parse)(e),je.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||lt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&je.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw qe.from(i,qe.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ct.classes.FormData,Blob:ct.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};je.forEach(["delete","get","head","post","put","patch"],(e=>{lt.headers[e]={}}));const ht=lt,dt=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ft=Symbol("internals");function pt(e){return e&&String(e).trim().toLowerCase()}function mt(e){return!1===e||null==e?e:je.isArray(e)?e.map(mt):String(e)}function gt(e,t,n,r,i){return je.isFunction(r)?r.call(this,t,n):(i&&(t=n),je.isString(t)?je.isString(r)?-1!==t.indexOf(r):je.isRegExp(r)?r.test(t):void 0:void 0)}class yt{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=pt(t);if(!i)throw new Error("header name must be a non-empty string");const o=je.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=mt(e))}const o=(e,t)=>je.forEach(e,((e,n)=>i(e,n,t)));return je.isPlainObject(e)||e instanceof this.constructor?o(e,t):je.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&dt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=pt(e)){const n=je.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(je.isFunction(t))return t.call(this,e,n);if(je.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=pt(e)){const n=je.findKey(this,e);return!(!n||void 0===this[n]||t&&!gt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=pt(e)){const i=je.findKey(n,e);!i||t&&!gt(0,n[i],i,t)||(delete n[i],r=!0)}}return je.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!gt(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return je.forEach(this,((r,i)=>{const o=je.findKey(n,i);if(o)return t[o]=mt(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=mt(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return je.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&je.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[ft]=this[ft]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=pt(e);t[r]||(!function(e,t){const n=je.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return je.isArray(e)?e.forEach(r):r(e),this}}yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),je.reduceDescriptors(yt.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),je.freezeMethods(yt);const vt=yt;function wt(e,t){const n=this||ht,r=t||n,i=vt.from(r.headers);let o=r.data;return je.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function bt(e){return!(!e||!e.__CANCEL__)}function _t(e,t,n){qe.call(this,null==e?"canceled":e,qe.ERR_CANCELED,t,n),this.name="CanceledError"}je.inherits(_t,qe,{__CANCEL__:!0});const St=_t;const Et=ct.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];je.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),je.isString(r)&&s.push("path="+r),je.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function It(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Tt=ct.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=je.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const kt=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=r[s];i||(i=c),n[o]=a,r[o]=c;let l=s,h=0;for(;l!==o;)h+=n[l++],l%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const d=u&&c-u;return d?Math.round(1e3*h/d):void 0}};function Ct(e,t){let n=0;const r=kt(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;const u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}const xt="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=vt.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:c}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(je.isFormData(r))if(ct.hasStandardBrowserEnv||ct.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=It(e.baseURL,e.url);function d(){if(!l)return;const r=vt.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new qe("Request failed with status code "+n.status,[qe.ERR_BAD_REQUEST,qe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),et(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(d)},l.onabort=function(){l&&(n(new qe("Request aborted",qe.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new qe("Network Error",qe.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||nt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new qe(t,r.clarifyTimeoutError?qe.ETIMEDOUT:qe.ECONNABORTED,e,l)),l=null},ct.hasStandardBrowserEnv&&(c&&je.isFunction(c)&&(c=c(e)),c||!1!==c&&Tt(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&Et.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in l&&je.forEach(i.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),je.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&"json"!==a&&(l.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&l.addEventListener("progress",Ct(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Ct(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{l&&(n(!t||t.type?new St(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===ct.protocols.indexOf(f)?n(new qe("Unsupported protocol "+f+":",qe.ERR_BAD_REQUEST,e)):l.send(r||null)}))},At={http:null,xhr:xt};je.forEach(At,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const Nt=e=>"- ".concat(e),Pt=e=>je.isFunction(e)||null===e||!1===e,Ot=e=>{e=je.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Pt(n)&&(r=At[(t=String(n)).toLowerCase()],void 0===r))throw new qe("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Nt).join("\n"):" "+Nt(e[0]):"as no adapter specified";throw new qe("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Rt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new St(null,e)}function Dt(e){Rt(e),e.headers=vt.from(e.headers),e.data=wt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ot(e.adapter||ht.adapter)(e).then((function(t){return Rt(e),t.data=wt.call(e,e.transformResponse,t),t.headers=vt.from(t.headers),t}),(function(t){return bt(t)||(Rt(e),t&&t.response&&(t.response.data=wt.call(e,e.transformResponse,t.response),t.response.headers=vt.from(t.response.headers))),Promise.reject(t)}))}const Lt=e=>e instanceof vt?e.toJSON():e;function Mt(e,t){t=t||{};const n={};function r(e,t,n){return je.isPlainObject(e)&&je.isPlainObject(t)?je.merge.call({caseless:n},e,t):je.isPlainObject(t)?je.merge({},t):je.isArray(t)?t.slice():t}function i(e,t,n){return je.isUndefined(t)?je.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!je.isUndefined(t))return r(void 0,t)}function s(e,t){return je.isUndefined(t)?je.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(Lt(e),Lt(t),!0)};return je.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=c[r]||i,s=o(e[r],t[r],r);je.isUndefined(s)&&o!==a||(n[r]=s)})),n}const Ft="1.6.7",Ut={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ut[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const jt={};Ut.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new qe(r(i," has been removed"+(t?" in "+t:"")),qe.ERR_DEPRECATED);return t&&!jt[i]&&(jt[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const Vt={assertOptions:function(e,t,n){if("object"!==typeof e)throw new qe("options must be an object",qe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new qe("option "+o+" must be "+n,qe.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new qe("Unknown option "+o,qe.ERR_BAD_OPTION)}},validators:Ut},zt=Vt.validators;class Bt{constructor(e){this.defaults=e,this.interceptors={request:new tt,response:new tt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Mt(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Vt.assertOptions(n,{silentJSONParsing:zt.transitional(zt.boolean),forcedJSONParsing:zt.transitional(zt.boolean),clarifyTimeoutError:zt.transitional(zt.boolean)},!1),null!=r&&(je.isFunction(r)?t.paramsSerializer={serialize:r}:Vt.assertOptions(r,{encode:zt.function,serialize:zt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&je.merge(i.common,i[t.method]);i&&je.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=vt.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,h=0;if(!a){const e=[Dt.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,u=Promise.resolve(t);h<l;)u=u.then(e[h++],e[h++]);return u}l=s.length;let d=t;for(h=0;h<l;){const e=s[h++],t=s[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{u=Dt.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,l=c.length;h<l;)u=u.then(c[h++],c[h++]);return u}getUri(e){return et(It((e=Mt(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}je.forEach(["delete","get","head","options"],(function(e){Bt.prototype[e]=function(t,n){return this.request(Mt(n||{},{method:e,url:t,data:(n||{}).data}))}})),je.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Mt(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Bt.prototype[e]=t(),Bt.prototype[e+"Form"]=t(!0)}));const qt=Bt;class Kt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new St(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new Kt((function(t){e=t}));return{token:t,cancel:e}}}const Wt=Kt;const Gt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gt).forEach((e=>{let[t,n]=e;Gt[n]=t}));const Ht=Gt;const Qt=function e(t){const n=new qt(t),r=se(qt.prototype.request,n);return je.extend(r,qt.prototype,n,{allOwnKeys:!0}),je.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Mt(t,n))},r}(ht);Qt.Axios=qt,Qt.CanceledError=St,Qt.CancelToken=Wt,Qt.isCancel=bt,Qt.VERSION=Ft,Qt.toFormData=Qe,Qt.AxiosError=qe,Qt.Cancel=Qt.CanceledError,Qt.all=function(e){return Promise.all(e)},Qt.spread=function(e){return function(t){return e.apply(null,t)}},Qt.isAxiosError=function(e){return je.isObject(e)&&!0===e.isAxiosError},Qt.mergeConfig=Mt,Qt.AxiosHeaders=vt,Qt.formToJSON=e=>ut(je.isHTMLForm(e)?new FormData(e):e),Qt.getAdapter=Ot,Qt.HttpStatusCode=Ht,Qt.default=Qt;const Yt=Qt.create({baseURL:"https://api.themoviedb.org/3"}),$t="cf9ee3d27fae857c9525a8fe499e92a3",Jt={fetchTrending:"/trending/all/week?api_key=".concat($t,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat($t,"&with_network=213"),fetchTopRated:"/movie/top_rated?api_key=".concat($t,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat($t,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat($t,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat($t,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat($t,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat($t,"&with_genres=99")};const Xt=function(){const[e,t]=(0,r.useState)([]);return(0,r.useEffect)((()=>{!async function(){const e=await Yt.get(Jt.fetchNetflixOriginals);t(e.data.results[Math.floor(Math.random()*e.data.results.length-1)])}()}),[]),console.log(e),(0,ie.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:"url('https://image.tmdb.org/t/p/original/".concat(null===e||void 0===e?void 0:e.backdrop_path,"')"),backgroundPosition:"center center"},children:[(0,ie.jsxs)("div",{className:"banner__contents",children:[(0,ie.jsx)("h1",{className:"banner__title",children:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.original_name)}),(0,ie.jsxs)("div",{className:"banner__buttons",children:[(0,ie.jsx)("button",{className:"banner__button",children:"Play"}),(0,ie.jsx)("button",{className:"banner__button",children:"My List"})]}),(0,ie.jsx)("div",{className:"banner__description",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e}(null===e||void 0===e?void 0:e.overview,150)})]}),(0,ie.jsx)("div",{className:"banner--fadeBottom"})]})};const Zt=function(e){let{title:t,fetchUrl:n,isLargeRow:i=!1}=e;const[o,s]=(0,r.useState)([]),a="https://image.tmdb.org/t/p/original/";return(0,r.useEffect)((()=>{!async function(){const e=await Yt.get(n);s(e.data.results)}()}),[n]),console.log(o),(0,ie.jsxs)("div",{className:"row",children:[(0,ie.jsx)("h2",{children:t}),(0,ie.jsx)("div",{className:"row__posters",children:o.map((e=>!i&&e.backdrop_path&&(0,ie.jsx)("img",{className:"row__poster ".concat(i&&"row__posterLarge"),src:"".concat(a).concat(i?e.poster_path:e.backdrop_path),alt:e.name},e.id)||i&&e.poster_path&&(0,ie.jsx)("img",{className:"row__poster ".concat(i&&"row__posterLarge"),src:"".concat(a).concat(i?e.poster_path:e.backdrop_path),alt:e.name},e.id)))})]})};function en(){return(0,ie.jsxs)("div",{className:"homeScreen",children:[(0,ie.jsx)(oe,{}),(0,ie.jsx)(Xt,{}),(0,ie.jsx)(Zt,{title:"Netflix originals",fetchUrl:Jt.fetchNetflixOriginals,isLargeRow:!0}),(0,ie.jsx)(Zt,{title:"Trending Now",fetchUrl:Jt.fetchTrending}),(0,ie.jsx)(Zt,{title:"Top Rated",fetchUrl:Jt.fetchTopRated}),(0,ie.jsx)(Zt,{title:"Action Movies ",fetchUrl:Jt.fetchActionMovies}),(0,ie.jsx)(Zt,{title:"Comedy Movies",fetchUrl:Jt.fetchComedyMovies}),(0,ie.jsx)(Zt,{title:"Horror Movies",fetchUrl:Jt.fetchHorrorMovies}),(0,ie.jsx)(Zt,{title:"Romance Movies",fetchUrl:Jt.fetchRomanceMovies}),(0,ie.jsx)(Zt,{title:"Documentaries",fetchUrl:Jt.fetchDocumentaries})]})}var tn=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=x(t.props),t}return s(t,e),t.prototype.render=function(){return r.createElement(W,{history:this.history,children:this.props.children})},t}(r.Component);r.Component;var nn=function(e,t){return"function"===typeof e?e(t):e},rn=function(e,t){return"string"===typeof e?_(e,null,null,t):e},on=function(e){return e},sn=r.forwardRef;"undefined"===typeof sn&&(sn=on);var an=sn((function(e,t){var n=e.innerRef,i=e.navigate,o=e.onClick,s=U(e,["innerRef","navigate","onClick"]),a=s.target,c=u({},s,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=on!==sn&&t||n,r.createElement("a",c)}));var cn=sn((function(e,t){var n=e.component,i=void 0===n?an:n,o=e.replace,s=e.to,a=e.innerRef,c=U(e,["component","replace","to","innerRef"]);return r.createElement(K.Consumer,null,(function(e){e||m(!1);var n=e.history,l=rn(nn(s,e.location),e.location),h=l?n.createHref(l):"",d=u({},c,{href:h,navigate:function(){var t=nn(s,e.location),r=b(e.location)===b(rn(t));(o||r?n.replace:n.push)(t)}});return on!==sn?d.ref=t||a:d.innerRef=a,r.createElement(i,d)}))})),un=function(e){return e},ln=r.forwardRef;"undefined"===typeof ln&&(ln=un);ln((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,o=e.activeClassName,s=void 0===o?"active":o,a=e.activeStyle,c=e.className,l=e.exact,h=e.isActive,d=e.location,f=e.sensitive,p=e.strict,g=e.style,y=e.to,v=e.innerRef,w=U(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return r.createElement(K.Consumer,null,(function(e){e||m(!1);var n=d||e.location,o=rn(nn(y,n),n),b=o.pathname,_=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=_?Y(n.pathname,{path:_,exact:l,sensitive:f,strict:p}):null,E=!!(h?h(S,n):S),I="function"===typeof c?c(E):c,T="function"===typeof g?g(E):g;E&&(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(I,s),T=u({},T,a));var k=u({"aria-current":E&&i||null,className:I,style:T,to:o},w);return un!==ln?k.ref=t||v:k.innerRef=v,r.createElement(cn,k)}))}));const hn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},dn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(hn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new fn;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class fn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pn=function(e){return function(e){const t=hn(e);return dn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},mn=function(e){try{return dn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function gn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&yn(n)&&(e[n]=gn(e[n],t[n]));return e}function yn(e){return"__proto__"!==e}const vn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,wn=()=>{try{return vn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&mn(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},bn=()=>{var e;return null===(e=wn())||void 0===e?void 0:e.config};class _n{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Sn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function En(){var e;const t=null===(e=wn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function In(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Tn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function kn(){const e=Sn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Cn(){return!En()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xn(){try{return"object"===typeof indexedDB}catch(e){return!1}}class An extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nn.prototype.create)}}class Nn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Pn,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new An(n,o,t)}}const Pn=/\{\$([^}]+)}/g;function On(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Rn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Dn(n)&&Dn(o)){if(!Rn(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Dn(e){return null!==e&&"object"===typeof e}function Ln(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Mn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Fn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Un(e,t){const n=new jn(e,t);return n.subscribe.bind(n)}class jn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Vn),void 0===r.error&&(r.error=Vn),void 0===r.complete&&(r.complete=Vn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Vn(){}function zn(e){return e&&e._delegate?e._delegate:e}class Bn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qn="[DEFAULT]";class Kn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new _n;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:qn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===qn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn;return this.component?this.component.multipleInstances?e:qn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Wn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Kn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Gn=[];var Hn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Hn||(Hn={}));const Qn={debug:Hn.DEBUG,verbose:Hn.VERBOSE,info:Hn.INFO,warn:Hn.WARN,error:Hn.ERROR,silent:Hn.SILENT},Yn=Hn.INFO,$n={[Hn.DEBUG]:"log",[Hn.VERBOSE]:"log",[Hn.INFO]:"info",[Hn.WARN]:"warn",[Hn.ERROR]:"error"},Jn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=$n[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Xn{constructor(e){this.name=e,this._logLevel=Yn,this._logHandler=Jn,this._userLogHandler=null,Gn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Hn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Qn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.DEBUG,...t),this._logHandler(this,Hn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.VERBOSE,...t),this._logHandler(this,Hn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.INFO,...t),this._logHandler(this,Hn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.WARN,...t),this._logHandler(this,Hn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Hn.ERROR,...t),this._logHandler(this,Hn.ERROR,...t)}}const Zn=(e,t)=>t.some((t=>e instanceof t));let er,tr;const nr=new WeakMap,rr=new WeakMap,ir=new WeakMap,or=new WeakMap,sr=new WeakMap;let ar={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return rr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ir.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function cr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tr||(tr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(hr(this),n),lr(nr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return lr(e.apply(hr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(hr(this),t,...r);return ir.set(o,t.sort?t.sort():[t]),lr(o)}}function ur(e){return"function"===typeof e?cr(e):(e instanceof IDBTransaction&&function(e){if(rr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));rr.set(e,t)}(e),Zn(e,er||(er=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ar):e)}function lr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(lr(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&nr.set(t,e)})).catch((()=>{})),sr.set(t,e),t}(e);if(or.has(e))return or.get(e);const t=ur(e);return t!==e&&(or.set(e,t),sr.set(t,e)),t}const hr=e=>sr.get(e);const dr=["get","getKey","getAll","getAllKeys","count"],fr=["put","add","delete","clear"],pr=new Map;function mr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(pr.get(t))return pr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=fr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!dr.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return pr.set(t,o),o}ar=(e=>({...e,get:(t,n,r)=>mr(t,n)||e.get(t,n,r),has:(t,n)=>!!mr(t,n)||e.has(t,n)}))(ar);class gr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const yr="@firebase/app",vr="0.9.28",wr=new Xn("@firebase/app"),br="[DEFAULT]",_r={[yr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Sr=new Map,Er=new Map;function Ir(e,t){try{e.container.addComponent(t)}catch(n){wr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Tr(e,t){e.container.addOrOverwriteComponent(t)}function kr(e){const t=e.name;if(Er.has(t))return wr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Er.set(t,e);for(const n of Sr.values())Ir(n,e);return!0}function Cr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:br;Cr(e,t).clearInstance(n)}function Ar(){Er.clear()}const Nr=new Nn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}const Or="10.8.1";function Rr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:br,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=bn()),!n)throw Nr.create("no-options");const o=Sr.get(i);if(o){if(Rn(n,o.options)&&Rn(r,o.config))return o;throw Nr.create("duplicate-app",{appName:i})}const s=new Wn(i);for(const c of Er.values())s.addComponent(c);const a=new Pr(n,r,s);return Sr.set(i,a),a}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br;const t=Sr.get(e);if(!t&&e===br&&bn())return Rr();if(!t)throw Nr.create("no-app",{appName:e});return t}function Lr(){return Array.from(Sr.values())}async function Mr(e){const t=e.name;Sr.has(t)&&(Sr.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Fr(e,t,n){var r;let i=null!==(r=_r[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void wr.warn(e.join(" "))}kr(new Bn("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ur(e,t){if(null!==e&&"function"!==typeof e)throw Nr.create("invalid-log-argument");!function(e,t){for(const n of Gn){let r=null;t&&t.level&&(r=Qn[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Hn[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function jr(e){var t;t=e,Gn.forEach((e=>{e.setLogLevel(t)}))}const Vr="firebase-heartbeat-database",zr=1,Br="firebase-heartbeat-store";let qr=null;function Kr(){return qr||(qr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=lr(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(lr(s.result),e.oldVersion,e.newVersion,lr(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Vr,zr,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Br)}catch(n){console.warn(n)}}}).catch((e=>{throw Nr.create("idb-open",{originalErrorMessage:e.message})}))),qr}async function Wr(e,t){try{const n=(await Kr()).transaction(Br,"readwrite"),r=n.objectStore(Br);await r.put(t,Gr(e)),await n.done}catch(n){if(n instanceof An)wr.warn(n.message);else{const e=Nr.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});wr.warn(e.message)}}}function Gr(e){return"".concat(e.name,"!").concat(e.options.appId)}class Hr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Yr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Qr();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Qr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),$r(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$r(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=pn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Qr(){return(new Date).toISOString().substring(0,10)}class Yr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!xn()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Kr()).transaction(Br),n=await t.objectStore(Br).get(Gr(e));return await t.done,n}catch(t){if(t instanceof An)wr.warn(t.message);else{const e=Nr.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});wr.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Wr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Wr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function $r(e){return pn(JSON.stringify({version:2,heartbeats:e})).length}var Jr;Jr="",kr(new Bn("platform-logger",(e=>new gr(e)),"PRIVATE")),kr(new Bn("heartbeat",(e=>new Hr(e)),"PRIVATE")),Fr(yr,vr,Jr),Fr(yr,vr,"esm2017"),Fr("fire-js","");class Xr{constructor(e,t){this._delegate=e,this.firebase=t,Ir(e,new Bn("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Mr(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:br;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:br;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ir(this._delegate,e)}_addOrOverwriteComponent(e){Tr(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Zr=new Nn("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const ei=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=Rr(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(On(n,i.name))return n[i.name];const o=new e(i,r);return n[i.name]=o,o},app:i,registerVersion:Fr,setLogLevel:jr,onLog:Ur,apps:null,SDK_VERSION:Or,INTERNAL:{registerComponent:function(t){const n=t.name,o=n.replace("-compat","");if(kr(t)&&"PUBLIC"===t.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw Zr.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==t.serviceProps&&gn(s,t.serviceProps),r[o]=s,e.prototype[o]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!On(n,e=e||br))throw Zr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(Xr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){gn(n,e)},createSubscribe:Un,ErrorFactory:Nn,deepExtend:gn}),n}(),ti=new Xn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ti.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ti.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ni=ei;!function(e){Fr("@firebase/app-compat","0.2.28",e)}();ni.registerVersion("firebase","10.8.1","app-compat");function ri(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const ii={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},oi="EMAIL_SIGNIN",si="PASSWORD_RESET",ai="RECOVER_EMAIL",ci="REVERT_SECOND_FACTOR_ADDITION",ui="VERIFY_AND_CHANGE_EMAIL",li="VERIFY_EMAIL";function hi(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const di=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},fi=hi,pi=new Nn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mi=new Xn("@firebase/auth");function gi(e){if(mi.logLevel<=Hn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mi.error("Auth (".concat(Or,"): ").concat(e),...n)}}function yi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw _i(e,...n)}function vi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _i(e,...n)}function wi(e,t,n){const r=Object.assign(Object.assign({},fi()),{[t]:n});return new Nn("auth","Firebase",r).create(t,{appName:e.name})}function bi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&yi(e,"argument-error"),wi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function _i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return pi.create(e,...n)}function Si(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw _i(t,...r)}}function Ei(e){const t="INTERNAL ASSERTION FAILED: "+e;throw gi(t),new Error(t)}function Ii(e,t){e||Ei(t)}function Ti(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ki(){return"http:"===Ci()||"https:"===Ci()}function Ci(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class xi{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ii(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())||Tn()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ki()||In()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ai(e,t){Ii(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ni{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Oi=new xi(3e4,6e4);function Ri(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Di(e,t,n,r){return Li(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=Ln(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Ni.fetch()(Fi(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Li(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pi),t);try{const t=new ji(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vi(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Vi(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Vi(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Vi(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw wi(e,a,s);yi(e,a)}}catch(i){if(i instanceof An)throw i;yi(e,"network-request-failed",{message:String(i)})}}async function Mi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Di(e,t,n,r,i);return"mfaPendingCredential"in o&&yi(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Fi(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ai(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Ui(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ji{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(vi(this.auth,"network-request-failed"))),Oi.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vi(e,t,r);return i.customData._tokenResponse=n,i}function zi(e){return void 0!==e&&void 0!==e.getResponse}function Bi(e){return void 0!==e&&void 0!==e.enterprise}class qi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ui(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ki(e,t){return Di(e,"GET","/v2/recaptchaConfig",Ri(e,t))}function Wi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Gi(e){return 1e3*Number(e)}function Hi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return gi("JWT malformed, contained fewer than 3 sections"),null;try{const e=mn(n);return e?JSON.parse(e):(gi("Failed to decode base64 JWT payload"),null)}catch(i){return gi("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Qi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof An&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Yi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class $i{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wi(this.lastLoginAt),this.creationTime=Wi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ji(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Qi(e,async function(e,t){return Di(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Si(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=ri(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,s),c=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),l=!!c&&u,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new $i(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(e,h)}class Xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Si(e.idToken,"internal-error"),Si("undefined"!==typeof e.idToken,"internal-error"),Si("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Hi(e);return Si(t,"internal-error"),Si("undefined"!==typeof t.exp,"internal-error"),Si("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Si(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Li(e,{},(async()=>{const n=Ln({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Fi(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Ni.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Xi;return n&&(Si("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Si("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Si("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xi,this.toJSON())}_performRefresh(){return Ei("not implemented")}}function Zi(e,t){Si("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class eo{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ri(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $i(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Qi(this,this.stsTokenManager.getToken(this.auth,e));return Si(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=zn(e),r=await n.getIdToken(t),i=Hi(r);Si(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Wi(Gi(i.auth_time)),issuedAtTime:Wi(Gi(i.iat)),expirationTime:Wi(Gi(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=zn(e);await Ji(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Si(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new eo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Si(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ji(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Qi(this,async function(e,t){return Di(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:S}=t;Si(v&&S,e,"internal-error");const E=Xi.fromJSON(this.name,S);Si("string"===typeof v,e,"internal-error"),Zi(l,e.name),Zi(h,e.name),Si("boolean"===typeof w,e,"internal-error"),Si("boolean"===typeof b,e,"internal-error"),Zi(d,e.name),Zi(f,e.name),Zi(p,e.name),Zi(m,e.name),Zi(g,e.name),Zi(y,e.name);const I=new eo({uid:v,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Xi;r.updateFromServerResponse(t);const i=new eo({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ji(i),i}}const to=new Map;function no(e){Ii(e instanceof Function,"Expected a class definition");let t=to.get(e);return t?(Ii(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,to.set(e,t),t)}class ro{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ro.type="NONE";const io=ro;function oo(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class so{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=oo(this.userKey,r.apiKey,i),this.fullPersistenceKey=oo("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?eo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new so(no(io),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||no(io);const o=oo(n,e.config.apiKey,e.name);let s=null;for(const u of t)try{const t=await u._get(o);if(t){const n=eo._fromJSON(e,t);u!==i&&(s=n),i=u;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(c){}}))),new so(i,e,n)):new so(i,e,n)}}function ao(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ho(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(co(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(po(t))return"Blackberry";if(mo(t))return"Webos";if(uo(t))return"Safari";if((t.includes("chrome/")||lo(t))&&!t.includes("edge/"))return"Chrome";if(fo(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function co(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/firefox\//i.test(e)}function uo(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/crios\//i.test(e)}function ho(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/iemobile/i.test(e)}function fo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/android/i.test(e)}function po(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/blackberry/i.test(e)}function mo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/webos/i.test(e)}function go(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function yo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return go(e)||fo(e)||mo(e)||po(e)||/windows phone/i.test(e)||ho(e)}function vo(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ao(Sn());break;case"Worker":t="".concat(ao(Sn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Or,"/").concat(r)}class wo{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(Ak){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class bo{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class _o{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eo(this),this.idTokenSubscription=new Eo(this),this.beforeStateQueue=new wo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=no(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Si(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ji(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?zn(e):null;return t&&Si(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Si(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(no(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Di(e,"GET","/v2/passwordPolicy",Ri(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bo(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Di(e,"POST","/v2/accounts:revokeToken",Ri(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&no(e)||this._popupRedirectResolver;Si(t,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[no(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Si(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Si(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(mi.logLevel<=Hn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mi.warn("Auth (".concat(Or,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function So(e){return zn(e)}class Eo{constructor(e){this.auth=e,this.observer=null,this.addObserver=Un((e=>this.observer=e))}get next(){return Si(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Io={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function To(e){return Io.loadJS(e)}function ko(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Co{constructor(e){this.type="recaptcha-enterprise",this.auth=So(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Bi(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ki(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new qi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Bi(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Io.recaptchaEnterpriseScript;0!==t.length&&(t+=i),To(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function xo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Co(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Ao(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xo(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await xo(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function No(e,t,n){const r=So(e);Si(r._canInitEmulator,r,"emulator-config-failed"),Si(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Po(t),{host:s,port:a}=function(e){const t=Po(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Oo(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Oo(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Po(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Oo(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ro{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,t){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function Do(e,t){return Di(e,"POST","/v1/accounts:resetPassword",Ri(e,t))}async function Lo(e,t){return Di(e,"POST","/v1/accounts:signUp",t)}async function Mo(e,t){return Mi(e,"POST","/v1/accounts:signInWithPassword",Ri(e,t))}async function Fo(e,t){return Di(e,"POST","/v1/accounts:sendOobCode",Ri(e,t))}async function Uo(e,t){return Fo(e,t)}async function jo(e,t){return Fo(e,t)}class Vo extends Ro{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Vo(e,t,"password")}static _fromEmailAndCode(e,t){return new Vo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ao(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Mo);case"emailLink":return async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithEmailLink",Ri(e,t))}(e,{email:this._email,oobCode:this._password});default:yi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ao(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lo);case"emailLink":return async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithEmailLink",Ri(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:yi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function zo(e,t){return Mi(e,"POST","/v1/accounts:signInWithIdp",Ri(e,t))}class Bo extends Ro{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ri(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Bo(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return zo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ln(t)}return e}}const qo={USER_NOT_FOUND:"user-not-found"};class Ko extends Ro{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ko({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ko({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithPhoneNumber",Ri(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Mi(e,"POST","/v1/accounts:signInWithPhoneNumber",Ri(e,t));if(n.temporaryProof)throw Vi(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithPhoneNumber",Ri(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),qo)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ko({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Wo{constructor(e){var t,n,r,i,o,s;const a=Mn(Fn(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Si(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Mn(Fn(e)).link,n=t?Mn(Fn(t)).deep_link_id:null,r=Mn(Fn(e)).deep_link_id;return(r?Mn(Fn(r)).link:null)||r||n||t||e}(e);try{return new Wo(t)}catch(n){return null}}}class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,t){return Vo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Wo.parseLink(t);return Si(n,"argument-error"),Vo._fromEmailAndCode(e,n.code,n.tenantId)}}Go.PROVIDER_ID="password",Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ho{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qo extends Ho{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yo extends Qo{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Si("providerId"in t&&"signInMethod"in t,"argument-error"),Bo._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Si(e.idToken||e.accessToken,"argument-error"),Bo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Yo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Yo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new Yo(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(c){return null}}}class $o extends Qo{constructor(){super("facebook.com")}static credential(e){return Bo._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $o.credential(t.oauthAccessToken)}catch(n){return null}}}$o.FACEBOOK_SIGN_IN_METHOD="facebook.com",$o.PROVIDER_ID="facebook.com";class Jo extends Qo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bo._fromParams({providerId:Jo.PROVIDER_ID,signInMethod:Jo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jo.credentialFromTaggedObject(e)}static credentialFromError(e){return Jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Jo.credential(n,r)}catch(i){return null}}}Jo.GOOGLE_SIGN_IN_METHOD="google.com",Jo.PROVIDER_ID="google.com";class Xo extends Qo{constructor(){super("github.com")}static credential(e){return Bo._fromParams({providerId:Xo.PROVIDER_ID,signInMethod:Xo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xo.credentialFromTaggedObject(e)}static credentialFromError(e){return Xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Xo.credential(t.oauthAccessToken)}catch(n){return null}}}Xo.GITHUB_SIGN_IN_METHOD="github.com",Xo.PROVIDER_ID="github.com";class Zo extends Ro{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return zo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zo(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Zo(n,i):null}static _create(e,t){return new Zo(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class es extends Ho{constructor(e){Si(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return es.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return es.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Zo.fromJSON(e);return Si(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Zo._create(r,n)}catch(i){return null}}}class ts extends Qo{constructor(){super("twitter.com")}static credential(e,t){return Bo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ts.credential(n,r)}catch(i){return null}}}async function ns(e,t){return Mi(e,"POST","/v1/accounts:signUp",Ri(e,t))}ts.TWITTER_SIGN_IN_METHOD="twitter.com",ts.PROVIDER_ID="twitter.com";class rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await eo._fromIdTokenResponse(e,n,r),o=is(n);return new rs({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=is(n);return new rs({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function is(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class os extends An{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,os.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new os(e,t,n,r)}}function ss(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw os._fromErrorAndOperation(e,n,t,r);throw n}))}function as(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function cs(e,t){const n=zn(e);await ls(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Di(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=as(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function us(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Qi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rs._forOperation(e,"link",r)}async function ls(e,t,n){await Ji(t);const r=!1===e?"provider-already-linked":"no-such-provider";Si(as(t.providerData).has(n)===e,t.auth,r)}async function hs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await Qi(e,ss(r,i,t,e),n);Si(o.idToken,r,"internal-error");const s=Hi(o.idToken);Si(s,r,"internal-error");const{sub:a}=s;return Si(e.uid===a,r,"user-mismatch"),rs._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&yi(r,"user-mismatch"),o}}async function ds(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await ss(e,r,t),o=await rs._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function fs(e,t){return ds(So(e),t)}async function ps(e,t){const n=zn(e);return await ls(!1,n,t.providerId),us(n,t)}async function ms(e,t){return hs(zn(e),t)}async function gs(e,t){const n=So(e),r=await async function(e,t){return Mi(e,"POST","/v1/accounts:signInWithCustomToken",Ri(e,t))}(n,{token:t,returnSecureToken:!0}),i=await rs._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class ys{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?vs._fromServerResponse(e,t):"totpInfo"in t?ws._fromServerResponse(e,t):yi(e,"internal-error")}}class vs extends ys{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new vs(t)}}class ws extends ys{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ws(t)}}function bs(e,t,n){var r;Si((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Si("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Si(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Si(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function _s(e){const t=So(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ss(e,t){await async function(e,t){return Di(e,"POST","/v1/accounts:update",Ri(e,t))}(zn(e),{oobCode:t})}async function Es(e,t){const n=zn(e),r=await Do(n,{oobCode:t}),i=r.requestType;switch(Si(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Si(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Si(r.mfaInfo,n,"internal-error");default:Si(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=ys._fromServerResponse(So(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function Is(e,t){const n={identifier:t,continueUri:ki()?Ti():"http://localhost"},{signinMethods:r}=await async function(e,t){return Di(e,"POST","/v1/accounts:createAuthUri",Ri(e,t))}(zn(e),n);return r||[]}async function Ts(e,t){const n=zn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&bs(n.auth,r,t);const{email:i}=await async function(e,t){return Fo(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ks(e,t,n){const r=zn(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&bs(r.auth,i,n);const{email:o}=await async function(e,t){return Fo(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function Cs(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=zn(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await Qi(i,async function(e,t){return Di(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function xs(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await Qi(e,async function(e,t){return Di(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class As{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ns extends As{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Ps extends As{constructor(e,t){super(e,"facebook.com",t)}}class Os extends Ns{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Rs extends As{constructor(e,t){super(e,"google.com",t)}}class Ds extends Ns{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ls(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Hi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new As(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Ps(o,i);case"github.com":return new Os(o,i);case"google.com":return new Rs(o,i);case"twitter.com":return new Ds(o,i,e.screenName||null);case"custom":case"anonymous":return new As(o,null);default:return new As(o,r,i)}}(n)}class Ms{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Ms("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ms("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Ms._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Ms._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Fs{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=So(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>ys._fromServerResponse(n,e)));Si(r.mfaPendingCredential,n,"internal-error");const o=Ms._fromMfaPendingCredential(r.mfaPendingCredential);return new Fs(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await rs._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Si(t.user,n,"internal-error"),rs._forOperation(t.user,t.operationType,s);default:yi(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Us{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ys._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Us(e)}async getSession(){return Ms._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Qi(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Qi(this.user,function(e,t){return Di(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ri(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const js=new WeakMap;const Vs="__sak";class zs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vs,"1"),this.storage.removeItem(Vs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Bs extends zs{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Sn();return uo(e)||go(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=yo(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);kn()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bs.type="LOCAL";const qs=Bs;class Ks extends zs{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ks.type="SESSION";const Ws=Ks;class Gs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Gs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Hs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Gs.receivers=[];class Qs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const c=Hs("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Ys(){return window}function $s(){return"undefined"!==typeof Ys().WorkerGlobalScope&&"function"===typeof Ys().importScripts}const Js="firebaseLocalStorageDb",Xs="firebaseLocalStorage",Zs="fbase_key";class ea{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ta(e,t){return e.transaction([Xs],t?"readwrite":"readonly").objectStore(Xs)}function na(){const e=indexedDB.open(Js,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Xs,{keyPath:Zs})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Xs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Js);return new ea(e).toPromise()}(),t(await na()))}))}))}async function ra(e,t,n){const r=ta(e,!0).put({[Zs]:t,value:n});return new ea(r).toPromise()}function ia(e,t){const n=ta(e,!0).delete(t);return new ea(n).toPromise()}class oa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await na()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $s()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gs._getInstance($s()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Qs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await na();return await ra(e,Vs,"1"),await ia(e,Vs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ra(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ta(e,!1).get(t),r=await new ea(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ia(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ta(e,!1).getAll();return new ea(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}oa.type="LOCAL";const sa=oa;const aa=1e12;class ca{constructor(e){this.auth=e,this.counter=aa,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new ua(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||aa;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||aa;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||aa;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class ua{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Si(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const la=ko("rcb"),ha=new xi(3e4,6e4);class da{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ys().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Si(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&zi(Ys().grecaptcha)?Promise.resolve(Ys().grecaptcha):new Promise(((n,r)=>{const i=Ys().setTimeout((()=>{r(vi(e,"network-request-failed"))}),ha.get());Ys()[la]=()=>{Ys().clearTimeout(i),delete Ys()[la];const o=Ys().grecaptcha;if(!o||!zi(o))return void r(vi(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};To("".concat(Io.recaptchaV2Script,"?").concat(Ln({onload:la,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(vi(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ys().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fa{async load(e){return new ca(e)}clearedOneInstance(){}}const pa="recaptcha",ma={theme:"light",type:"image"};class ga{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},ma);this.parameters=n,this.type=pa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=So(e),this.isInvisible="invisible"===this.parameters.size,Si("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Si(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fa:new da,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Si(!this.parameters.sitekey,this.auth,"argument-error"),Si(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Si("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Ys()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Si(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Si(ki()&&!$s(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Di(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Si(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Si(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ya{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ko._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function va(e,t,n){var r;const i=await n.verify();try{let o;if(Si("string"===typeof i,e,"argument-error"),Si(n.type===pa,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Si("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Di(e,"POST","/v2/accounts/mfaEnrollment:start",Ri(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Si("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Si(n,e,"missing-multi-factor-info");const s=await function(e,t){return Di(e,"POST","/v2/accounts/mfaSignIn:start",Ri(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Di(e,"POST","/v1/accounts:sendVerificationCode",Ri(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class wa{constructor(e){this.providerId=wa.PROVIDER_ID,this.auth=So(e)}verifyPhoneNumber(e,t){return va(this.auth,e,zn(t))}static credential(e,t){return Ko._fromVerification(e,t)}static credentialFromResult(e){const t=e;return wa.credentialFromTaggedObject(t)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ko._fromTokenResponse(n,r):null}}function ba(e,t){return t?no(t):(Si(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wa.PROVIDER_ID="phone",wa.PHONE_SIGN_IN_METHOD="phone";class _a extends Ro{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Sa(e){return ds(e.auth,new _a(e),e.bypassAuthState)}function Ea(e){const{auth:t,user:n}=e;return Si(n,t,"internal-error"),hs(n,new _a(e),e.bypassAuthState)}async function Ia(e){const{auth:t,user:n}=e;return Si(n,t,"internal-error"),us(n,new _a(e),e.bypassAuthState)}class Ta{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sa;case"linkViaPopup":case"linkViaRedirect":return Ia;case"reauthViaPopup":case"reauthViaRedirect":return Ea;default:yi(this.auth,"internal-error")}}resolve(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ka=new xi(2e3,1e4);class Ca extends Ta{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Si(e,this.auth,"internal-error"),e}async onExecution(){Ii(1===this.filter.length,"Popup operations only handle one event");const e=Hs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(vi(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ka.get())};e()}}Ca.currentPopupAction=null;const xa="pendingRedirect",Aa=new Map;class Na extends Ta{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Aa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Da(t),r=Ra(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Aa.set(this.auth._key(),e)}return this.bypassAuthState||Aa.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Pa(e,t){return Ra(e)._set(Da(t),"true")}function Oa(e,t){Aa.set(e._key(),t)}function Ra(e){return no(e._redirectPersistence)}function Da(e){return oo(xa,e.config.apiKey,e.name)}function La(e,t,n){return async function(e,t,n){const r=So(e);bi(e,t,Ho),await r._initializationPromise;const i=ba(r,n);return await Pa(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Ma(e,t,n){return async function(e,t,n){const r=zn(e);bi(r.auth,t,Ho),await r.auth._initializationPromise;const i=ba(r.auth,n);await Pa(i,r.auth);const o=await ja(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function Fa(e,t,n){return async function(e,t,n){const r=zn(e);bi(r.auth,t,Ho),await r.auth._initializationPromise;const i=ba(r.auth,n);await ls(!1,r,t.providerId),await Pa(i,r.auth);const o=await ja(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function Ua(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=So(e),i=ba(r,t),o=new Na(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function ja(e){const t=Hs("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Va{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ba(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ba(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(vi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(za(e))}saveEventToCache(e){this.cachedEventUids.add(za(e)),this.lastProcessedEventTime=Date.now()}}function za(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ba(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function qa(e){return Di(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Ka=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wa=/^https?/;function Ga(e){const t=Ti(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Wa.test(n))return!1;if(Ka.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ha=new xi(3e4,6e4);function Qa(){const e=Ys().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ya(e){return new Promise(((t,n)=>{var r,i,o;function s(){Qa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qa(),n(vi(e,"network-request-failed"))},timeout:Ha.get()})}if(null===(i=null===(r=Ys().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Ys().gapi)||void 0===o?void 0:o.load)){const t=ko("iframefcb");return Ys()[t]=()=>{gapi.load?s():n(vi(e,"network-request-failed"))},To("".concat(Io.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw $a=null,e}))}let $a=null;const Ja=new xi(5e3,15e3),Xa="__/auth/iframe",Za="emulator/auth/iframe",ec={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nc(e){const t=e.config;Si(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ai(t,Za):"https://".concat(e.config.authDomain,"/").concat(Xa),r={apiKey:t.apiKey,appName:e.name,v:Or},i=tc.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Ln(r).slice(1))}async function rc(e){const t=await function(e){return $a=$a||Ya(e),$a}(e),n=Ys().gapi;return Si(n,e,"internal-error"),t.open({where:document.body,url:nc(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ec,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=vi(e,"network-request-failed"),o=Ys().setTimeout((()=>{r(i)}),Ja.get());function s(){Ys().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const ic={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oc{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function sc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},ic),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Sn().toLowerCase();n&&(a=lo(u)?"_blank":n),co(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return go(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new oc(null);const h=window.open(t||"",a,l);Si(h,e,"popup-blocked");try{h.focus()}catch(d){}return new oc(h)}const ac="__/auth/handler",cc="emulator/auth/handler",uc=encodeURIComponent("fac");async function lc(e,t,n,r,i,o){Si(e.config.authDomain,e,"auth-domain-config-required"),Si(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Or,eventId:i};if(t instanceof Ho){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Qo){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=await e._getAppCheckToken(),u=c?"#".concat(uc,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ac);return Ai(t,cc)}(e),"?").concat(Ln(a).slice(1)).concat(u)}const hc="webStorageSupport";const dc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=Ua,this._overrideRedirectResult=Oa}async _openPopup(e,t,n,r){var i;Ii(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return sc(e,await lc(e,t,n,Ti(),r),Hs())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ys().location.href=e}(await lc(e,t,n,Ti(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ii(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await rc(e),n=new Va(e);return t.register("authEvent",(t=>{Si(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hc,{type:hc},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[hc];void 0!==i&&t(!!i),yi(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await qa(e);for(const r of t)try{if(Ga(r))return}catch(n){}yi(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yo()||uo()||go()}};class fc{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ei("unexpected MultiFactorSessionType")}}}class pc extends fc{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new pc(e)}_finalizeEnroll(e,t,n){return function(e,t){return Di(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ri(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Di(e,"POST","/v2/accounts/mfaSignIn:finalize",Ri(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class mc{constructor(){}static assertion(e){return pc._fromCredential(e)}}mc.FACTOR_ID="phone";var gc="@firebase/auth",yc="1.6.1";class vc{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Si(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=wn())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var wc;function bc(){return window}!function(e){Io=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=vi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),wc="Browser",kr(new Bn("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Si(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:wc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vo(wc)},u=new _o(r,i,o,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(no);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),kr(new Bn("auth-internal",(e=>(e=>new vc(e))(So(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(gc,yc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(wc)),Fr(gc,yc,"esm2017");async function _c(e,t,n){var r;const{BuildInfo:i}=bc();Ii(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(Ii(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),s={};return go()?s.ibi=i.packageName:fo()?s.apn=i.packageName:yi(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,lc(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function Sc(e){const{cordova:t}=bc();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Ec=20;class Ic extends Va{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Tc(e){const t=await xc()._get(Ac(e));return t&&await xc()._remove(Ac(e)),t}function kc(e,t){var n,r;const i=function(e){const t=Nc(e),n=t.link?decodeURIComponent(t.link):void 0,r=Nc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Nc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Nc(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?vi(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Cc(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Ec;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function xc(){return no(qs)}function Ac(e){return oo("authEvent",e.config.apiKey,e.name)}function Nc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Mn(n.join("?"))}const Pc=class{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ua,this._overrideRedirectResult=Oa}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Ic(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){yi(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,c,u,l;const h=bc();Si("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Si("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Si("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Si("function"===typeof(null===(c=null===(a=null===(s=null===h||void 0===h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Si("function"===typeof(null===(l=null===(u=null===h||void 0===h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Aa.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Cc(),postBody:null,tenantId:e.tenantId,error:vi(e,"no-auth-event")}}(e,n,r);await function(e,t){return xc()._set(Ac(e),t)}(e,o);const s=await _c(e,o,t);return async function(e,t,n){const{cordova:r}=bc();let i=()=>{};try{await new Promise(((o,s)=>{let a=null;function c(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout((()=>{s(vi(e,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(c),document.addEventListener("resume",u,!1),fo()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Sc(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=bc(),n={};go()?n.iosBundleId=t.packageName:fo()?n.androidPackageName=t.packageName:yi(e,"operation-not-supported-in-this-environment"),await qa(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=bc(),o=setTimeout((async()=>{await Tc(e),t.onEvent(Oc())}),500),s=async n=>{clearTimeout(o);const r=await Tc(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=kc(r,n.url)),t.onEvent(i||Oc())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,c="".concat(i.packageName.toLowerCase(),"://");bc().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&s({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Oc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vi("no-auth-event")}}function Rc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Dc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return!("file:"!==Rc()&&"ionic:"!==Rc()&&"capacitor:"!==Rc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Lc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return kn()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn();return/Edge\/\d+/.test(e)}(e)}function Mc(){try{const e=self.localStorage,t=Hs();if(e)return e.setItem(t,"1"),e.removeItem(t),!Lc()||xn()}catch(e){return Fc()&&xn()}return!1}function Fc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Uc(){return("http:"===Rc()||"https:"===Rc()||In()||Dc())&&!(Tn()||En())&&Mc()&&!Fc()}function jc(){return Dc()&&"undefined"!==typeof document}const Vc={LOCAL:"local",NONE:"none",SESSION:"session"},zc=Si,Bc="persistence";async function qc(e){await e._initializationPromise;const t=Kc(),n=oo(Bc,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Kc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const Wc=Si;class Gc{constructor(){this.browserResolver=no(dc),this.cordovaResolver=no(Pc),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=Ua,this._overrideRedirectResult=Oa}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return jc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wc(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!jc()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Hc(e){return e.unwrap()}function Qc(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Xc(e,function(e,t){var n;const r=zn(e),i=t;return Si(t.customData.operationType,r,"argument-error"),Si(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Fs._fromError(r,i)}(e,t))}else if(r){const e=Yc(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Yc(e){const{_tokenResponse:t}=e instanceof An?e.customData:e;if(!t)return null;if(!(e instanceof An)&&"temporaryProof"in t&&"phoneNumber"in t)return wa.credentialFromResult(e);const n=t.providerId;if(!n||n===ii.PASSWORD)return null;let r;switch(n){case ii.GOOGLE:r=Jo;break;case ii.FACEBOOK:r=$o;break;case ii.GITHUB:r=Xo;break;case ii.TWITTER:r=ts;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?Zo._create(n,s):Bo._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new Yo(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof An?r.credentialFromError(e):r.credentialFromResult(e)}function $c(e,t){return t.catch((t=>{throw t instanceof An&&Qc(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Yc(r)),additionalUserInfo:Ls(e),user:Zc.getOrCreate(n)};var r}))}async function Jc(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>$c(e,n.confirm(t))}}class Xc{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return $c(Hc(this.auth),this.resolver.resolveSignIn(e))}}class Zc{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=zn(e);return js.has(t)||js.set(t,Us._fromUser(t)),js.get(t)}(e)}static getOrCreate(e){return Zc.USER_MAP.has(e)||Zc.USER_MAP.set(e,new Zc(e)),Zc.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return $c(this.auth,ps(this._delegate,e))}async linkWithPhoneNumber(e,t){return Jc(this.auth,async function(e,t,n){const r=zn(e);await ls(!1,r,"phone");const i=await va(r.auth,t,zn(n));return new ya(i,(e=>ps(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return $c(this.auth,async function(e,t,n){const r=zn(e);bi(r.auth,t,Ho);const i=ba(r.auth,n);return new Ca(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Gc))}async linkWithRedirect(e){return await qc(So(this.auth)),Fa(this._delegate,e,Gc)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return $c(this.auth,ms(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Jc(this.auth,async function(e,t,n){const r=zn(e),i=await va(r.auth,t,zn(n));return new ya(i,(e=>ms(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return $c(this.auth,async function(e,t,n){const r=zn(e);bi(r.auth,t,Ho);const i=ba(r.auth,n);return new Ca(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Gc))}async reauthenticateWithRedirect(e){return await qc(So(this.auth)),Ma(this._delegate,e,Gc)}sendEmailVerification(e){return Ts(this._delegate,e)}async unlink(e){return await cs(this._delegate,e),this}updateEmail(e){return function(e,t){return xs(zn(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return xs(zn(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await us(zn(e),t)}(this._delegate,e)}updateProfile(e){return Cs(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ks(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zc.USER_MAP=new WeakMap;const eu=Si;class tu{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;eu(n,"invalid-api-key",{appName:e.name}),eu(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Gc:void 0;this._delegate=t.initialize({options:{persistence:ru(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(di),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zc.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){No(this._delegate,e,t)}applyActionCode(e){return Ss(this._delegate,e)}checkActionCode(e){return Es(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Do(zn(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_s(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return $c(this._delegate,async function(e,t,n){const r=So(e),i=Ao(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ns),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_s(e),t})),s=await rs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Is(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Wo.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){eu(Uc(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await So(e)._initializationPromise,Ua(e,t,!1)}(this._delegate,Gc);return e?$c(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){So(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=nu(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=nu(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=So(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Si(t.handleCodeInApp,r,"argument-error"),t&&bs(r,e,t)}(i,n),await Ao(r,i,"getOobCode",jo)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=So(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&bs(r,i,n),await Ao(r,i,"getOobCode",Uo)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){zc(Object.values(Vc).includes(t),e,"invalid-persistence-type"),Tn()?zc(t!==Vc.SESSION,e,"unsupported-persistence-type"):En()?zc(t===Vc.NONE,e,"unsupported-persistence-type"):Fc()?zc(t===Vc.NONE||t===Vc.LOCAL&&xn(),e,"unsupported-persistence-type"):zc(t===Vc.NONE||Mc(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Vc.SESSION:t=Ws;break;case Vc.LOCAL:t=await no(sa)._isAvailable()?sa:qs;break;case Vc.NONE:t=io;break;default:return yi("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return $c(this._delegate,async function(e){var t;const n=So(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new rs({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ns(n,{returnSecureToken:!0}),i=await rs._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return $c(this._delegate,fs(this._delegate,e))}signInWithCustomToken(e){return $c(this._delegate,gs(this._delegate,e))}signInWithEmailAndPassword(e,t){return $c(this._delegate,function(e,t,n){return fs(zn(e),Go.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_s(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return $c(this._delegate,async function(e,t,n){const r=zn(e),i=Go.credentialWithLink(t,n||Ti());return Si(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),fs(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Jc(this._delegate,async function(e,t,n){const r=So(e),i=await va(r,t,zn(n));return new ya(i,(e=>fs(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return eu(Uc(),this._delegate,"operation-not-supported-in-this-environment"),$c(this._delegate,async function(e,t,n){const r=So(e);bi(e,t,Ho);const i=ba(r,n);return new Ca(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Gc))}async signInWithRedirect(e){return eu(Uc(),this._delegate,"operation-not-supported-in-this-environment"),await qc(this._delegate),La(this._delegate,e,Gc)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Es(zn(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function nu(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Zc.getOrCreate(e)),error:t,complete:n}}function ru(e,t){const n=function(e,t){const n=Kc();if(!n)return[];const r=oo(Bc,e,t);switch(n.getItem(r)){case Vc.NONE:return[io];case Vc.LOCAL:return[sa,Ws];case Vc.SESSION:return[Ws];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(sa)||n.push(sa),"undefined"!==typeof window)for(const r of[qs,Ws])n.includes(r)||n.push(r);return n.includes(io)||n.push(io),n}tu.Persistence=Vc;class iu{constructor(){this.providerId="phone",this._delegate=new wa(Hc(ni.auth()))}static credential(e,t){return wa.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}iu.PHONE_SIGN_IN_METHOD=wa.PHONE_SIGN_IN_METHOD,iu.PROVIDER_ID=wa.PROVIDER_ID;const ou=Si;class su{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ni.app();var r;ou(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ga(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Bn("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new tu(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:oi,PASSWORD_RESET:si,RECOVER_EMAIL:ai,REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:li}},EmailAuthProvider:Go,FacebookAuthProvider:$o,GithubAuthProvider:Xo,GoogleAuthProvider:Jo,OAuthProvider:Yo,SAMLAuthProvider:es,PhoneAuthProvider:iu,PhoneMultiFactorGenerator:mc,RecaptchaVerifier:su,TwitterAuthProvider:ts,Auth:tu,AuthCredential:Ro,Error:An}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.3")}(ni);var au,cu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},uu={},lu=lu||{},hu=cu||self;function du(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function fu(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var pu="closure_uid_"+(1e9*Math.random()>>>0),mu=0;function gu(e,t,n){return e.call.apply(e.bind,arguments)}function yu(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vu(e,t,n){return(vu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gu:yu).apply(null,arguments)}function wu(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function bu(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function _u(){this.s=this.s,this.o=this.o}_u.prototype.s=!1,_u.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,pu)&&e[pu]||(e[pu]=++mu)}(this)},_u.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Su=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Eu(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Iu(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(du(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Tu(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Tu.prototype.h=function(){this.defaultPrevented=!0};var ku=function(){if(!hu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};hu.addEventListener("test",e,t),hu.removeEventListener("test",e,t)}catch(wk){}return e}();function Cu(e){return/^[\s\xa0]*$/.test(e)}function xu(){var e=hu.navigator;return e&&(e=e.userAgent)?e:""}function Au(e){return-1!=xu().indexOf(e)}function Nu(e){return Nu[" "](e),e}Nu[" "]=function(){};var Pu,Ou,Ru=Au("Opera"),Du=Au("Trident")||Au("MSIE"),Lu=Au("Edge"),Mu=Lu||Du,Fu=Au("Gecko")&&!(-1!=xu().toLowerCase().indexOf("webkit")&&!Au("Edge"))&&!(Au("Trident")||Au("MSIE"))&&!Au("Edge"),Uu=-1!=xu().toLowerCase().indexOf("webkit")&&!Au("Edge");function ju(){var e=hu.document;return e?e.documentMode:void 0}e:{var Vu="",zu=function(){var e=xu();return Fu?/rv:([^\);]+)(\)|;)/.exec(e):Lu?/Edge\/([\d\.]+)/.exec(e):Du?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Uu?/WebKit\/(\S+)/.exec(e):Ru?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(zu&&(Vu=zu?zu[1]:""),Du){var Bu=ju();if(null!=Bu&&Bu>parseFloat(Vu)){Pu=String(Bu);break e}}Pu=Vu}if(hu.document&&Du){var qu=ju();Ou=qu||(parseInt(Pu,10)||void 0)}else Ou=void 0;var Ku=Ou;function Wu(e,t){if(Tu.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fu){e:{try{Nu(t.nodeName);var i=!0;break e}catch(vk){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Gu[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Wu.$.h.call(this)}}bu(Wu,Tu);var Gu={2:"touch",3:"pen",4:"mouse"};Wu.prototype.h=function(){Wu.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Hu="closure_listenable_"+(1e6*Math.random()|0),Qu=0;function Yu(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Qu,this.fa=this.ia=!1}function $u(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ju(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Xu(e){const t={};for(const n in e)t[n]=e[n];return t}const Zu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function el(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Zu.length;t++)n=Zu[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function tl(e){this.src=e,this.g={},this.h=0}function nl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Su(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&($u(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function rl(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}tl.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=rl(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Yu(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var il="closure_lm_"+(1e6*Math.random()|0),ol={};function sl(e,t,n,r,i){if(r&&r.once)return cl(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)sl(e,t[o],n,r,i);return null}return n=ml(n),e&&e[Hu]?e.O(t,n,fu(r)?!!r.capture:!!r,i):al(e,t,n,!1,r,i)}function al(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=fu(i)?!!i.capture:!!i,a=fl(e);if(a||(e[il]=a=new tl(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=dl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ku||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function cl(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)cl(e,t[o],n,r,i);return null}return n=ml(n),e&&e[Hu]?e.P(t,n,fu(r)?!!r.capture:!!r,i):al(e,t,n,!0,r,i)}function ul(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ul(e,t[o],n,r,i);else r=fu(r)?!!r.capture:!!r,n=ml(n),e&&e[Hu]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=rl(o=e.g[t],n,r,i))&&($u(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=fl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=rl(t,n,r,i)),(n=-1<e?t[e]:null)&&ll(n))}function ll(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Hu])nl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fl(t))?(nl(n,e),0==n.h&&(n.src=null,t[il]=null)):$u(e)}}}function hl(e){return e in ol?ol[e]:ol[e]="on"+e}function dl(e,t){if(e.fa)e=!0;else{t=new Wu(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ll(e),e=n.call(r,t)}return e}function fl(e){return(e=e[il])instanceof tl?e:null}var pl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ml(e){return"function"===typeof e?e:(e[pl]||(e[pl]=function(t){return e.handleEvent(t)}),e[pl])}function gl(){_u.call(this),this.i=new tl(this),this.S=this,this.J=null}function yl(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Tu(t,e);else if(t instanceof Tu)t.target=t.target||e;else{var i=t;el(t=new Tu(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=vl(s,r,!0,t)&&i}if(i=vl(s=t.g=e,r,!0,t)&&i,i=vl(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=vl(s=t.g=n[o],r,!1,t)&&i}function vl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&nl(e.i,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}bu(gl,_u),gl.prototype[Hu]=!0,gl.prototype.removeEventListener=function(e,t,n,r){ul(this,e,t,n,r)},gl.prototype.N=function(){if(gl.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$u(n[r]);delete t.g[e],t.h--}}this.J=null},gl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},gl.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var wl=hu.JSON.stringify;function bl(){var e=Cl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _l=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Sl),(e=>e.reset()));class Sl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function El(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Il(e){hu.setTimeout((()=>{throw e}),0)}let Tl,kl=!1,Cl=new class{constructor(){this.h=this.g=null}add(e,t){const n=_l.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},xl=()=>{const e=hu.Promise.resolve(void 0);Tl=()=>{e.then(Al)}};var Al=()=>{for(var e;e=bl();){try{e.h.call(e.g)}catch(wk){Il(wk)}var t=_l;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}kl=!1};function Nl(e,t){gl.call(this),this.h=e||1,this.g=t||hu,this.j=vu(this.qb,this),this.l=Date.now()}function Pl(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ol(e,t,n){if("function"===typeof e)n&&(e=vu(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vu(e.handleEvent,e)}return 2147483647<Number(t)?-1:hu.setTimeout(e,t||0)}function Rl(e){e.g=Ol((()=>{e.g=null,e.i&&(e.i=!1,Rl(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}bu(Nl,gl),(au=Nl.prototype).ga=!1,au.T=null,au.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yl(this,"tick"),this.ga&&(Pl(this),this.start()))}},au.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},au.N=function(){Nl.$.N.call(this),Pl(this),delete this.g};class Dl extends _u{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Rl(this)}N(){super.N(),this.g&&(hu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ll(e){_u.call(this),this.h=e,this.g={}}bu(Ll,_u);var Ml=[];function Fl(e,t,n,r){Array.isArray(n)||(n&&(Ml[0]=n.toString()),n=Ml);for(var i=0;i<n.length;i++){var o=sl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Ul(e){Ju(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ll(e)}),e),e.g={}}function jl(){this.g=!0}function Vl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return wl(n)}catch(hk){return t}}(e,n)+(r?" "+r:"")}))}Ll.prototype.N=function(){Ll.$.N.call(this),Ul(this)},Ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jl.prototype.Ea=function(){this.g=!1},jl.prototype.info=function(){};var zl={},Bl=null;function ql(){return Bl=Bl||new gl}function Kl(e){Tu.call(this,zl.Ta,e)}function Wl(e){const t=ql();yl(t,new Kl(t))}function Gl(e,t){Tu.call(this,zl.STAT_EVENT,e),this.stat=t}function Hl(e){const t=ql();yl(t,new Gl(t,e))}function Ql(e,t){Tu.call(this,zl.Ua,e),this.size=t}function Yl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return hu.setTimeout((function(){e()}),t)}zl.Ta="serverreachability",bu(Kl,Tu),zl.STAT_EVENT="statevent",bu(Gl,Tu),zl.Ua="timingevent",bu(Ql,Tu);var $l={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jl={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xl(){}function Zl(e){return e.h||(e.h=e.i())}function eh(){}Xl.prototype.h=null;var th,nh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rh(){Tu.call(this,"d")}function ih(){Tu.call(this,"c")}function oh(){}function sh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ll(this),this.P=ch,e=Mu?125:void 0,this.V=new Nl(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ah}function ah(){this.i=null,this.g="",this.h=!1}bu(rh,Tu),bu(ih,Tu),bu(oh,Xl),oh.prototype.g=function(){return new XMLHttpRequest},oh.prototype.i=function(){return{}},th=new oh;var ch=45e3,uh={},lh={};function hh(e,t,n){e.L=1,e.A=Nh(Th(t)),e.u=n,e.S=!0,dh(e,null)}function dh(e,t){e.G=Date.now(),gh(e),e.B=Th(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),qh(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ah,e.g=qd(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Dl(vu(e.Pa,e,e.g),e.O)),Fl(e.U,e.g,"readystatechange",e.nb),t=e.I?Xu(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Wl(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function fh(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ph(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=mh(e,n),r==lh){4==t&&(e.s=4,Hl(14),i=!1),Vl(e.j,e.m,null,"[Incomplete Response]");break}if(r==uh){e.s=4,Hl(15),Vl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Vl(e.j,e.m,r,null),_h(e,r)}fh(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Hl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ld(t),t.M=!0,Hl(11))):(Vl(e.j,e.m,n,"[Invalid Chunked Response]"),bh(e),wh(e))}function mh(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?lh:(n=Number(t.substring(n,r)),isNaN(n)?uh:(r+=1)+n>t.length?lh:(t=t.slice(r,r+n),e.o=r+n,t))}function gh(e){e.Y=Date.now()+e.P,yh(e,e.P)}function yh(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Yl(vu(e.lb,e),t)}function vh(e){e.C&&(hu.clearTimeout(e.C),e.C=null)}function wh(e){0==e.l.H||e.J||Ud(e.l,e)}function bh(e){vh(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Pl(e.V),Ul(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _h(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||$h(n.i,e)))if(!e.K&&$h(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(xk){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Fd(n),Cd(n)}Dd(n),Hl(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Yl(vu(n.ib,n),6e3));if(1>=Yh(n.i)&&n.oa){try{n.oa()}catch(xk){}n.oa=void 0}}else Vd(n,11)}else if((e.K||n.g==e)&&Fd(n),!Cu(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const l=u[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Jh(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ah(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Bd(r,r.J?r.pa:null,r.Y),s.K){Xh(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(vh(a),gh(a)),r.g=s}else Rd(r);0<n.j.length&&Ad(n)}else"stop"!=u[0]&&"close"!=u[0]||Vd(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Vd(n,7):kd(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Wl()}catch(xk){}}function Sh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(du(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(du(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(du(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(au=sh.prototype).setTimeout=function(e){this.P=e},au.nb=function(e){e=e.target;const t=this.M;t&&3==bd(e)?t.l():this.Pa(e)},au.Pa=function(e){try{if(e==this.g)e:{const l=bd(this.g);var t=this.g.Ia();this.g.da();if(!(3>l)&&(3!=l||Mu||this.g&&(this.h.h||this.g.ja()||_d(this.g)))){this.J||4!=l||7==t||Wl(),vh(this);var n=this.g.da();this.ca=n;t:if(fh(this)){var r=_d(this.g);e="";var i=r.length,o=4==bd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bh(this),wh(this);var s="";break t}this.h.i=new hu.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cu(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,Hl(12),bh(this),wh(this);break e}Vl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_h(this,n)}this.S?(ph(this,l,s),Mu&&this.i&&3==l&&(Fl(this.U,this.V,"tick",this.mb),this.V.start())):(Vl(this.j,this.m,s,null),_h(this,s)),4==l&&bh(this),this.i&&!this.J&&(4==l?Ud(this.l,this):(this.i=!1,gh(this)))}else(function(e){const t={};e=(e.g&&2<=bd(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Cu(e[r]))continue;var n=El(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Hl(12)):(this.s=0,Hl(13)),bh(this),wh(this)}}}catch(gk){}},au.mb=function(){if(this.g){var e=bd(this.g),t=this.g.ja();this.o<t.length&&(vh(this),ph(this,e,t),this.i&&4!=e&&gh(this))}},au.cancel=function(){this.J=!0,bh(this)},au.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Wl(),Hl(17)),bh(this),this.s=2,wh(this)):yh(this,this.Y-e)};var Eh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ih(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ih){this.h=e.h,kh(this,e.j),this.s=e.s,this.g=e.g,Ch(this,e.m),this.l=e.l;var t=e.i,n=new jh;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xh(this,n),this.o=e.o}else e&&(t=String(e).match(Eh))?(this.h=!1,kh(this,t[1]||"",!0),this.s=Ph(t[2]||""),this.g=Ph(t[3]||"",!0),Ch(this,t[4]),this.l=Ph(t[5]||"",!0),xh(this,t[6]||"",!0),this.o=Ph(t[7]||"")):(this.h=!1,this.i=new jh(null,this.h))}function Th(e){return new Ih(e)}function kh(e,t,n){e.j=n?Ph(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ch(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function xh(e,t,n){t instanceof jh?(e.i=t,function(e,t){t&&!e.j&&(Vh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zh(this,t),qh(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Oh(t,Fh)),e.i=new jh(t,e.h))}function Ah(e,t,n){e.i.set(t,n)}function Nh(e){return Ah(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ph(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Oh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Rh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Rh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ih.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Oh(t,Dh,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Oh(t,Dh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Oh(n,"/"==n.charAt(0)?Mh:Lh,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Oh(n,Uh)),e.join("")};var Dh=/[#\/\?@]/g,Lh=/[#\?:]/g,Mh=/[#\?]/g,Fh=/[#\?@]/g,Uh=/#/g;function jh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vh(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zh(e,t){Vh(e),t=Kh(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Bh(e,t){return Vh(e),t=Kh(e,t),e.g.has(t)}function qh(e,t,n){zh(e,t),0<n.length&&(e.i=null,e.g.set(Kh(e,t),Eu(n)),e.h+=n.length)}function Kh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(au=jh.prototype).add=function(e,t){Vh(this),this.i=null,e=Kh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},au.forEach=function(e,t){Vh(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},au.ta=function(){Vh(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},au.Z=function(e){Vh(this);let t=[];if("string"===typeof e)Bh(this,e)&&(t=t.concat(this.g.get(Kh(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},au.set=function(e,t){return Vh(this),this.i=null,Bh(this,e=Kh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},au.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},au.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Wh=class{constructor(e,t){this.g=e,this.map=t}};function Gh(e){this.l=e||Hh,hu.PerformanceNavigationTiming?e=0<(e=hu.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(hu.g&&hu.g.Ka&&hu.g.Ka()&&hu.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Hh=10;function Qh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yh(e){return e.h?1:e.g?e.g.size:0}function $h(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Jh(e,t){e.g?e.g.add(t):e.h=t}function Xh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zh(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Eu(e.i)}Gh.prototype.cancel=function(){if(this.i=Zh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ed=class{stringify(e){return hu.JSON.stringify(e,void 0)}parse(e){return hu.JSON.parse(e,void 0)}};function td(){this.g=new ed}function nd(e,t,n){const r=n||"";try{Sh(e,(function(e,n){let i=e;fu(e)&&(i=wl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function rd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(vk){}}function id(e){this.l=e.ec||null,this.j=e.ob||!1}function od(e,t){gl.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=sd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bu(id,Xl),id.prototype.g=function(){return new od(this.l,this.j)},id.prototype.i=function(e){return function(){return e}}({}),bu(od,gl);var sd=0;function ad(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function cd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ud(e)}function ud(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(au=od.prototype).open=function(e,t){if(this.readyState!=sd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ud(this)},au.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||hu).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},au.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cd(this)),this.readyState=sd},au.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ud(this)),this.g&&(this.readyState=3,ud(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof hu.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ad(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},au.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?cd(this):ud(this),3==this.readyState&&ad(this)}},au.Za=function(e){this.g&&(this.response=this.responseText=e,cd(this))},au.Ya=function(e){this.g&&(this.response=e,cd(this))},au.ka=function(){this.g&&cd(this)},au.setRequestHeader=function(e,t){this.v.append(e,t)},au.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},au.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(od.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ld=hu.JSON.parse;function hd(e){gl.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dd,this.L=this.M=!1}bu(hd,gl);var dd="",fd=/^https?$/i,pd=["POST","PUT"];function md(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gd(e),vd(e)}function gd(e){e.F||(e.F=!0,yl(e,"complete"),yl(e,"error"))}function yd(e){if(e.h&&"undefined"!=typeof lu&&(!e.C[1]||4!=bd(e)||2!=e.da()))if(e.v&&4==bd(e))Ol(e.La,0,e);else if(yl(e,"readystatechange"),4==bd(e)){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var i=String(e.I).match(Eh)[1]||null;!i&&hu.self&&hu.self.location&&(i=hu.self.location.protocol.slice(0,-1)),r=!fd.test(i?i.toLowerCase():"")}n=r}if(n)yl(e,"complete"),yl(e,"success");else{e.m=6;try{var o=2<bd(e)?e.g.statusText:""}catch(hk){o=""}e.j=o+" ["+e.da()+"]",gd(e)}}finally{vd(e)}}}function vd(e,t){if(e.g){wd(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||yl(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function wd(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(hu.clearTimeout(e.A),e.A=null)}function bd(e){return e.g?e.g.readyState:0}function _d(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case dd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Af){return null}}function Sd(e){let t="";return Ju(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ed(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Sd(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ah(e,t,n))}function Id(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Td(e){this.Ga=0,this.j=[],this.l=new jl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Id("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Id("baseRetryDelayMs",5e3,e),this.hb=Id("retryDelaySeedMs",1e4,e),this.eb=Id("forwardChannelMaxRetries",2,e),this.xa=Id("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Gh(e&&e.concurrentRequestLimit),this.Ja=new td,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function kd(e){if(xd(e),3==e.H){var t=e.W++,n=Th(e.I);if(Ah(n,"SID",e.K),Ah(n,"RID",t),Ah(n,"TYPE","terminate"),Pd(e,n),(t=new sh(e,e.l,t)).L=2,t.A=Nh(Th(n)),n=!1,hu.navigator&&hu.navigator.sendBeacon)try{n=hu.navigator.sendBeacon(t.A.toString(),"")}catch(Ik){}!n&&hu.Image&&((new Image).src=t.A,n=!0),n||(t.g=qd(t.l,null),t.g.ha(t.A)),t.G=Date.now(),gh(t)}zd(e)}function Cd(e){e.g&&(Ld(e),e.g.cancel(),e.g=null)}function xd(e){Cd(e),e.u&&(hu.clearTimeout(e.u),e.u=null),Fd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&hu.clearTimeout(e.m),e.m=null)}function Ad(e){if(!Qh(e.i)&&!e.m){e.m=!0;var t=e.Na;Tl||xl(),kl||(Tl(),kl=!0),Cl.add(t,e),e.C=0}}function Nd(e,t){var n;n=t?t.m:e.W++;const r=Th(e.I);Ah(r,"SID",e.K),Ah(r,"RID",n),Ah(r,"AID",e.V),Pd(e,r),e.o&&e.s&&Ed(r,e.o,e.s),n=new sh(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Od(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Jh(e.i,n),hh(n,r,t)}function Pd(e,t){e.na&&Ju(e.na,(function(e,n){Ah(t,n,e)})),e.h&&Sh({},(function(e,n){Ah(t,n,e)}))}function Od(e,t,n){n=Math.min(e.j.length,n);var r=e.h?vu(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{nd(a,e,"req"+n+"_")}catch(Gp){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Rd(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Tl||xl(),kl||(Tl(),kl=!0),Cl.add(t,e),e.A=0}}function Dd(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Yl(vu(e.Ma,e),jd(e,e.A)),e.A++,!0)}function Ld(e){null!=e.B&&(hu.clearTimeout(e.B),e.B=null)}function Md(e){e.g=new sh(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Th(e.wa);Ah(t,"RID","rpc"),Ah(t,"SID",e.K),Ah(t,"AID",e.V),Ah(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ah(t,"TO",e.qa),Ah(t,"TYPE","xmlhttp"),Pd(e,t),e.o&&e.s&&Ed(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Nh(Th(t)),n.u=null,n.S=!0,dh(n,e)}function Fd(e){null!=e.v&&(hu.clearTimeout(e.v),e.v=null)}function Ud(e,t){var n=null;if(e.g==t){Fd(e),Ld(e),e.g=null;var r=2}else{if(!$h(e.i,t))return;n=t.F,Xh(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;yl(r=ql(),new Ql(r,n)),Ad(e)}else Rd(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Yh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Yl(vu(e.Na,e,t),jd(e,e.C)),e.C++,!0))}(e,t)||2==r&&Dd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vd(e,5);break;case 4:Vd(e,10);break;case 3:Vd(e,6);break;default:Vd(e,2)}}function jd(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vd(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=vu(e.pb,e);n||(n=new Ih("//www.google.com/images/cleardot.gif"),hu.location&&"http"==hu.location.protocol||kh(n,"https"),Nh(n)),function(e,t){const n=new jl;if(hu.Image){const r=new Image;r.onload=wu(rd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=wu(rd,n,r,"TestLoadImage: error",!1,t),r.onabort=wu(rd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=wu(rd,n,r,"TestLoadImage: timeout",!1,t),hu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Hl(2);e.H=0,e.h&&e.h.za(t),zd(e),xd(e)}function zd(e){if(e.H=0,e.ma=[],e.h){const t=Zh(e.i);0==t.length&&0==e.j.length||(Iu(e.ma,t),Iu(e.ma,e.j),e.i.i.length=0,Eu(e.j),e.j.length=0),e.h.ya()}}function Bd(e,t,n){var r=n instanceof Ih?Th(n):new Ih(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ch(r,r.m);else{var i=hu.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Ih(null);r&&kh(o,r),t&&(o.g=t),i&&Ch(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Ah(r,n,t),Ah(r,"VER",e.ra),Pd(e,r),r}function qd(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new hd(new id({ob:n})):new hd(e.va)).Oa(e.J),t}function Kd(){}function Wd(){if(Du&&!(10<=Number(Ku)))throw Error("Environmental error: no available transport.")}function Gd(e,t){gl.call(this),this.g=new Td(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Cu(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Cu(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Yd(this)}function Hd(e){rh.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Qd(){ih.call(this),this.status=1}function Yd(e){this.g=e}function $d(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Jd(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function Xd(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(au=hd.prototype).Oa=function(e){this.M=e},au.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():th.g(),this.C=this.u?Zl(this.u):Zl(th),this.g.onreadystatechange=vu(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(vk){return void md(this,vk)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=hu.FormData&&e instanceof hu.FormData,!(0<=Su(pd,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wd(this),0<this.B&&((this.L=function(e){return Du&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vu(this.ua,this)):this.A=Ol(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(vk){md(this,vk)}},au.ua=function(){"undefined"!=typeof lu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yl(this,"timeout"),this.abort(8))},au.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,yl(this,"complete"),yl(this,"abort"),vd(this))},au.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vd(this,!0)),hd.$.N.call(this)},au.La=function(){this.s||(this.G||this.v||this.l?yd(this):this.kb())},au.kb=function(){yd(this)},au.isActive=function(){return!!this.g},au.da=function(){try{return 2<bd(this)?this.g.status:-1}catch(yk){return-1}},au.ja=function(){try{return this.g?this.g.responseText:""}catch(yk){return""}},au.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ld(t)}},au.Ia=function(){return this.m},au.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(au=Td.prototype).ra=8,au.H=1,au.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new sh(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Xu(o),el(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Od(this,i,t),Ah(n=Th(this.I),"RID",e),Ah(n,"CVER",22),this.F&&Ah(n,"X-HTTP-Session-Id",this.F),Pd(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Sd(o)))+"&"+t:this.o&&Ed(n,this.o,o)),Jh(this.i,i),this.bb&&Ah(n,"TYPE","init"),this.P?(Ah(n,"$req",t),Ah(n,"SID","null"),i.aa=!0,hh(i,n,null)):hh(i,n,t),this.H=2}}else 3==this.H&&(e?Nd(this,e):0==this.j.length||Qh(this.i)||Nd(this))},au.Ma=function(){if(this.u=null,Md(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Yl(vu(this.jb,this),e)}},au.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hl(10),Cd(this),Md(this))},au.ib=function(){null!=this.v&&(this.v=null,Cd(this),Dd(this),Hl(19))},au.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Hl(2)):(this.l.info("Failed to ping google.com"),Hl(1))},au.isActive=function(){return!!this.h&&this.h.isActive(this)},(au=Kd.prototype).Ba=function(){},au.Aa=function(){},au.za=function(){},au.ya=function(){},au.isActive=function(){return!0},au.Va=function(){},Wd.prototype.g=function(e,t){return new Gd(e,t)},bu(Gd,gl),Gd.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Hl(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Bd(e,null,e.Y),Ad(e)},Gd.prototype.close=function(){kd(this.g)},Gd.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=wl(e),e=n);t.j.push(new Wh(t.fb++,e)),3==t.H&&Ad(t)},Gd.prototype.N=function(){this.g.h=null,delete this.j,kd(this.g),delete this.g,Gd.$.N.call(this)},bu(Hd,rh),bu(Qd,ih),bu(Yd,Kd),Yd.prototype.Ba=function(){yl(this.g,"a")},Yd.prototype.Aa=function(e){yl(this.g,new Hd(e))},Yd.prototype.za=function(e){yl(this.g,new Qd)},Yd.prototype.ya=function(){yl(this.g,"b")},bu($d,(function(){this.blockSize=-1})),$d.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},$d.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Jd(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Jd(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Jd(this,r),i=0;break}}this.h=i,this.i+=t},$d.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Zd={};function ef(e){return-128<=e&&128>e?function(e,t){var n=Zd;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Xd([0|e],0>e?-1:0)})):new Xd([0|e],0>e?-1:0)}function tf(e){if(isNaN(e)||!isFinite(e))return rf;if(0>e)return uf(tf(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=nf;return new Xd(t,0)}var nf=4294967296,rf=ef(0),of=ef(1),sf=ef(16777216);function af(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cf(e){return-1==e.h}function uf(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Xd(n,~e.h).add(of)}function lf(e,t){return e.add(uf(t))}function hf(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function df(e,t){this.g=e,this.h=t}function ff(e,t){if(af(t))throw Error("division by zero");if(af(e))return new df(rf,rf);if(cf(e))return t=ff(uf(e),t),new df(uf(t.g),uf(t.h));if(cf(t))return t=ff(e,uf(t)),new df(uf(t.g),t.h);if(30<e.g.length){if(cf(e)||cf(t))throw Error("slowDivide_ only works with positive integers.");for(var n=of,r=t;0>=r.X(e);)n=pf(n),r=pf(r);var i=mf(n,1),o=mf(r,1);for(r=mf(r,2),n=mf(n,2);!af(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=mf(r,1),n=mf(n,1)}return t=lf(e,i.R(t)),new df(i,t)}for(i=rf;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=tf(n)).R(t);cf(s)||0<s.X(e);)s=(o=tf(n-=r)).R(t);af(o)&&(o=of),i=i.add(o),e=lf(e,s)}return new df(i,e)}function pf(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Xd(n,e.h)}function mf(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Xd(i,e.h)}(au=Xd.prototype).ea=function(){if(cf(this))return-uf(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:nf+r)*t,t*=nf}return e},au.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(af(this))return"0";if(cf(this))return"-"+uf(this).toString(e);for(var t=tf(Math.pow(e,6)),n=this,r="";;){var i=ff(n,t).g,o=((0<(n=lf(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(af(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},au.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},au.X=function(e){return cf(e=lf(this,e))?-1:af(e)?0:1},au.abs=function(){return cf(this)?uf(this):this},au.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Xd(n,-2147483648&n[n.length-1]?-1:0)},au.R=function(e){if(af(this)||af(e))return rf;if(cf(this))return cf(e)?uf(this).R(uf(e)):uf(uf(this).R(e));if(cf(e))return uf(this.R(uf(e)));if(0>this.X(sf)&&0>e.X(sf))return tf(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=s*c,hf(n,2*r+2*i),n[2*r+2*i+1]+=o*c,hf(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,hf(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,hf(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Xd(n,0)},au.gb=function(e){return ff(this,e).h},au.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Xd(n,this.h&e.h)},au.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Xd(n,this.h|e.h)},au.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Xd(n,this.h^e.h)},Wd.prototype.createWebChannel=Wd.prototype.g,Gd.prototype.send=Gd.prototype.u,Gd.prototype.open=Gd.prototype.m,Gd.prototype.close=Gd.prototype.close,$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,Jl.COMPLETE="complete",eh.EventType=nh,nh.OPEN="a",nh.CLOSE="b",nh.ERROR="c",nh.MESSAGE="d",gl.prototype.listen=gl.prototype.O,hd.prototype.listenOnce=hd.prototype.P,hd.prototype.getLastError=hd.prototype.Sa,hd.prototype.getLastErrorCode=hd.prototype.Ia,hd.prototype.getStatus=hd.prototype.da,hd.prototype.getResponseJson=hd.prototype.Wa,hd.prototype.getResponseText=hd.prototype.ja,hd.prototype.send=hd.prototype.ha,hd.prototype.setWithCredentials=hd.prototype.Oa,$d.prototype.digest=$d.prototype.l,$d.prototype.reset=$d.prototype.reset,$d.prototype.update=$d.prototype.j,Xd.prototype.add=Xd.prototype.add,Xd.prototype.multiply=Xd.prototype.R,Xd.prototype.modulo=Xd.prototype.gb,Xd.prototype.compare=Xd.prototype.X,Xd.prototype.toNumber=Xd.prototype.ea,Xd.prototype.toString=Xd.prototype.toString,Xd.prototype.getBits=Xd.prototype.D,Xd.fromNumber=tf,Xd.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return uf(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=tf(Math.pow(n,8)),i=rf,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=tf(Math.pow(n,s)),i=i.R(s).add(tf(a))):i=(i=i.R(r)).add(tf(a))}return i};var gf=uu.createWebChannelTransport=function(){return new Wd},yf=uu.getStatEventTarget=function(){return ql()},vf=uu.ErrorCode=$l,wf=uu.EventType=Jl,bf=uu.Event=zl,_f=uu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sf=(uu.FetchXmlHttpFactory=id,uu.WebChannel=eh),Ef=uu.XhrIo=hd,If=uu.Md5=$d,Tf=uu.Integer=Xd;const kf="@firebase/firestore";class Cf{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cf.UNAUTHENTICATED=new Cf(null),Cf.GOOGLE_CREDENTIALS=new Cf("google-credentials-uid"),Cf.FIRST_PARTY=new Cf("first-party-uid"),Cf.MOCK_USER=new Cf("mock-user");let xf="10.8.1";const Af=new Xn("@firebase/firestore");function Nf(){return Af.logLevel}function Pf(e){if(Af.logLevel<=Hn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Df);Af.debug("Firestore (".concat(xf,"): ").concat(e),...i)}}function Of(e){if(Af.logLevel<=Hn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Df);Af.error("Firestore (".concat(xf,"): ").concat(e),...i)}}function Rf(e){if(Af.logLevel<=Hn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Df);Af.warn("Firestore (".concat(xf,"): ").concat(e),...i)}}function Df(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(fk){return e}}function Lf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(xf,") INTERNAL ASSERTION FAILED: ")+e;throw Of(t),new Error(t)}function Mf(e,t){e||Lf()}function Ff(e,t){return e}const Uf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jf extends An{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Vf{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class zf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Bf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cf.UNAUTHENTICATED)))}shutdown(){}}class qf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Kf{constructor(e){this.t=e,this.currentUser=Cf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Vf;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vf,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Pf("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Pf("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vf)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Pf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Mf("string"==typeof t.accessToken),new zf(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mf(null===e||"string"==typeof e),new Cf(e)}}class Wf{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Cf.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gf{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Wf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Cf.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qf{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Pf("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Pf("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Pf("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Pf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Mf("string"==typeof e.token),this.R=e.token,new Hf(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yf(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class $f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Yf(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Jf(e,t){return e<t?-1:e>t?1:0}function Xf(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Zf(e){return e+"\0"}class ep{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new jf(Uf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new jf(Uf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new jf(Uf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jf(Uf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ep.fromMillis(Date.now())}static fromDate(e){return ep.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ep(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jf(this.nanoseconds,e.nanoseconds):Jf(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tp{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tp(e)}static min(){return new tp(new ep(0,0))}static max(){return new tp(new ep(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class np{constructor(e,t,n){void 0===t?t=0:t>e.length&&Lf(),void 0===n?n=e.length-t:n>e.length-t&&Lf(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===np.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof np?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rp extends np{construct(e,t,n){return new rp(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new jf(Uf.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new rp(e)}static emptyPath(){return new rp([])}}const ip=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class op extends np{construct(e,t,n){return new op(e,t,n)}static isValidIdentifier(e){return ip.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),op.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new op(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new jf(Uf.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new jf(Uf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new jf(Uf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new jf(Uf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new op(t)}static emptyPath(){return new op([])}}class sp{constructor(e){this.path=e}static fromPath(e){return new sp(rp.fromString(e))}static fromName(e){return new sp(rp.fromString(e).popFirst(5))}static empty(){return new sp(rp.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rp.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rp.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sp(new rp(e.slice()))}}class ap{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function cp(e){return e.fields.find((e=>2===e.kind))}function up(e){return e.fields.filter((e=>2!==e.kind))}ap.UNKNOWN_ID=-1;class lp{constructor(e,t){this.fieldPath=e,this.kind=t}}class hp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hp(0,pp.min())}}function dp(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=tp.fromTimestamp(1e9===r?new ep(n+1,0):new ep(n,r));return new pp(i,sp.empty(),t)}function fp(e){return new pp(e.readTime,e.key,-1)}class pp{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new pp(tp.min(),sp.empty(),-1)}static max(){return new pp(tp.max(),sp.empty(),-1)}}function mp(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=sp.comparator(e.documentKey,t.documentKey),0!==n?n:Jf(e.largestBatchId,t.largestBatchId))}const gp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vp(e){if(e.code!==Uf.FAILED_PRECONDITION||e.message!==gp)throw e;Pf("LocalStore","Unexpectedly lost primary lease")}class wp{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Lf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wp(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof wp?t:wp.resolve(t)}catch(e){return wp.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):wp.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):wp.reject(t)}static resolve(e){return new wp(((t,n)=>{t(e)}))}static reject(e){return new wp(((t,n)=>{n(e)}))}static waitFor(e){return new wp(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=wp.resolve(!1);for(const n of e)t=t.next((e=>e?wp.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new wp(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{o[c]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new wp(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class bp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Vf,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ep(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=xp(t.target.error);this.V.reject(new Ep(e,n))}}static open(e,t,n,r){try{return new bp(t,e.transaction(r,n))}catch(e){throw new Ep(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Pf("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Tp(t)}}class _p{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===_p.S(Sn())&&Of("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pf("SimpleDb","Removing database:",e),kp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xn())return!1;if(_p.C())return!0;const e=Sn(),t=_p.S(e),n=0<t&&t<10,r=_p.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Pf("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ep(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new jf(Uf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new jf(Uf.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ep(e,r))},r.onupgradeneeded=e=>{Pf("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Pf("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=bp.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),wp.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Pf("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Sp{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return kp(this.k.delete())}}class Ep extends jf{constructor(e,t){super(Uf.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ip(e){return"IndexedDbTransactionError"===e.name}class Tp{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Pf("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Pf("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),kp(n)}add(e){return Pf("SimpleDb","ADD",this.store.name,e,e),kp(this.store.add(e))}get(e){return kp(this.store.get(e)).next((t=>(void 0===t&&(t=null),Pf("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Pf("SimpleDb","DELETE",this.store.name,e),kp(this.store.delete(e))}count(){return Pf("SimpleDb","COUNT",this.store.name),kp(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new wp(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new wp(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Pf("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new wp(((n,r)=>{t.onerror=e=>{const t=xp(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new wp(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Sp(i),s=t(i.primaryKey,i.value,o);if(s instanceof wp){const e=s.catch((e=>(o.done(),wp.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>wp.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function kp(e){return new wp(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=xp(e.target.error);n(t)}}))}let Cp=!1;function xp(e){const t=_p.S(Sn());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new jf("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Cp||(Cp=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ap{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Pf("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Pf("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Ip(e)?Pf("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await vp(e)}await this.ee(6e4)}))}}class Np{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return wp.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Pf("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Pf("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=fp(t);mp(r,n)>0&&(n=r)})),new pp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Pp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Op(e){return null==e}function Rp(e){return 0===e&&1/e==-1/0}function Dp(e){return"number"==typeof e&&Number.isInteger(e)&&!Rp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Lp(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fp(t)),t=Mp(e.get(n),t);return Fp(t)}function Mp(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Fp(e){return e+"\x01\x01"}function Up(e){const t=e.length;if(Mf(t>=2),2===t)return Mf("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),rp.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&Lf(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Lf()}o=t+2}return new rp(r)}Pp._e=-1;const jp=["userId","batchId"];function Vp(e,t){return[e,Lp(t)]}function zp(e,t,n){return[e,Lp(t),n]}const Bp={},qp=["prefixPath","collectionGroup","readTime","documentId"],Kp=["prefixPath","collectionGroup","documentId"],Wp=["collectionGroup","readTime","prefixPath","documentId"],Gp=["canonicalId","targetId"],Hp=["targetId","path"],Qp=["path","targetId"],Yp=["collectionId","parent"],$p=["indexId","uid"],Jp=["uid","sequenceNumber"],Xp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zp=["indexId","uid","orderedDocumentKey"],em=["userId","collectionPath","documentId"],tm=["userId","collectionPath","largestBatchId"],nm=["userId","collectionGroup","largestBatchId"],rm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],im=[...rm,"documentOverlays"],om=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sm=om,am=[...sm,"indexConfiguration","indexState","indexEntries"];class cm extends yp{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function um(e,t){const n=Ff(e);return _p.M(n.ae,t)}function lm(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hm(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class fm{constructor(e,t){this.comparator=e,this.root=t||mm.EMPTY}insert(e,t){return new fm(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mm.BLACK,null,null))}remove(e){return new fm(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mm.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pm(this.root,e,this.comparator,!1)}getReverseIterator(){return new pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pm(this.root,e,this.comparator,!0)}}class pm{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mm{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:mm.RED,this.left=null!=r?r:mm.EMPTY,this.right=null!=i?i:mm.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new mm(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mm.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mm.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mm.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mm.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Lf();if(this.right.isRed())throw Lf();const e=this.left.check();if(e!==this.right.check())throw Lf();return e+(this.isRed()?0:1)}}mm.EMPTY=null,mm.RED=!0,mm.BLACK=!1,mm.EMPTY=new class{constructor(){this.size=0}get key(){throw Lf()}get value(){throw Lf()}get color(){throw Lf()}get left(){throw Lf()}get right(){throw Lf()}copy(e,t,n,r,i){return this}insert(e,t,n){return new mm(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gm{constructor(e){this.comparator=e,this.data=new fm(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ym(this.data.getIterator())}getIteratorFrom(e){return new ym(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof gm))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gm(this.comparator);return t.data=e,t}}class ym{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vm(e){return e.hasNext()?e.getNext():void 0}class wm{constructor(e){this.fields=e,e.sort(op.comparator)}static empty(){return new wm([])}unionWith(e){let t=new gm(op.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new wm(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xf(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class bm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _m{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new bm("Invalid base64 string: "+e):e}}(e);return new _m(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _m(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jf(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_m.EMPTY_BYTE_STRING=new _m("");const Sm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Em(e){if(Mf(!!e),"string"==typeof e){let t=0;const n=Sm.exec(e);if(Mf(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Im(e.seconds),nanos:Im(e.nanos)}}function Im(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Tm(e){return"string"==typeof e?_m.fromBase64String(e):_m.fromUint8Array(e)}function km(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Cm(e){const t=e.mapValue.fields.__previous_value__;return km(t)?Cm(t):t}function xm(e){const t=Em(e.mapValue.fields.__local_write_time__.timestampValue);return new ep(t.seconds,t.nanos)}class Am{constructor(e,t,n,r,i,o,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=c}}class Nm{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nm("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nm&&e.projectId===this.projectId&&e.database===this.database}}const Pm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Om={nullValue:"NULL_VALUE"};function Rm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?km(e)?4:Hm(e)?9007199254740991:10:Lf()}function Dm(e,t){if(e===t)return!0;const n=Rm(e);if(n!==Rm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xm(e).isEqual(xm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Em(e.timestampValue),r=Em(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Tm(e.bytesValue).isEqual(Tm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Im(e.geoPointValue.latitude)===Im(t.geoPointValue.latitude)&&Im(e.geoPointValue.longitude)===Im(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Im(e.integerValue)===Im(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Im(e.doubleValue),r=Im(t.doubleValue);return n===r?Rp(n)===Rp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Xf(e.arrayValue.values||[],t.arrayValue.values||[],Dm);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(lm(n)!==lm(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dm(n[i],r[i])))return!1;return!0}(e,t);default:return Lf()}}function Lm(e,t){return void 0!==(e.values||[]).find((e=>Dm(e,t)))}function Mm(e,t){if(e===t)return 0;const n=Rm(e),r=Rm(t);if(n!==r)return Jf(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Jf(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Im(e.integerValue||e.doubleValue),r=Im(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fm(e.timestampValue,t.timestampValue);case 4:return Fm(xm(e),xm(t));case 5:return Jf(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Tm(e),r=Tm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Jf(n[i],r[i]);if(0!==e)return e}return Jf(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Jf(Im(e.latitude),Im(t.latitude));return 0!==n?n:Jf(Im(e.longitude),Im(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Mm(n[i],r[i]);if(e)return e}return Jf(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Pm.mapValue&&t===Pm.mapValue)return 0;if(e===Pm.mapValue)return 1;if(t===Pm.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Jf(r[s],o[s]);if(0!==e)return e;const t=Mm(n[r[s]],i[o[s]]);if(0!==t)return t}return Jf(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Lf()}}function Fm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Jf(e,t);const n=Em(e),r=Em(t),i=Jf(n.seconds,r.seconds);return 0!==i?i:Jf(n.nanos,r.nanos)}function Um(e){return jm(e)}function jm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Em(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Tm(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return sp.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jm(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(jm(e.fields[i]));return n+"}"}(e.mapValue):Lf()}function Vm(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function zm(e){return!!e&&"integerValue"in e}function Bm(e){return!!e&&"arrayValue"in e}function qm(e){return!!e&&"nullValue"in e}function Km(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wm(e){return!!e&&"mapValue"in e}function Gm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hm(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gm(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gm(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Hm(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qm(e){return"nullValue"in e?Om:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Vm(Nm.empty(),sp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Lf()}function Ym(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Vm(Nm.empty(),sp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Pm:Lf()}function $m(e,t){const n=Mm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Jm(e,t){const n=Mm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Xm{constructor(e){this.value=e}static empty(){return new Xm({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gm(t)}setAll(e){let t=op.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Gm(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Wm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dm(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Wm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){hm(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Xm(Gm(this.value))}}function Zm(e){const t=[];return hm(e.fields,((e,n)=>{const r=new op([e]);if(Wm(n)){const e=Zm(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new wm(t)}class eg{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new eg(e,0,tp.min(),tp.min(),tp.min(),Xm.empty(),0)}static newFoundDocument(e,t,n,r){return new eg(e,1,t,tp.min(),n,r,0)}static newNoDocument(e,t){return new eg(e,2,t,tp.min(),tp.min(),Xm.empty(),0)}static newUnknownDocument(e,t){return new eg(e,3,t,tp.min(),tp.min(),Xm.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xm.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xm.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tp.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof eg&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new eg(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class tg{constructor(e,t){this.position=e,this.inclusive=t}}function ng(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?sp.comparator(sp.fromName(s.referenceValue),n.key):Mm(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function rg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dm(e.position[n],t.position[n]))return!1;return!0}class ig{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function og(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class sg{}class ag extends sg{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new yg(e,t,n):"array-contains"===t?new _g(e,n):"in"===t?new Sg(e,n):"not-in"===t?new Eg(e,n):"array-contains-any"===t?new Ig(e,n):new ag(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new vg(e,n):new wg(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mm(t,this.value)):null!==t&&Rm(this.value)===Rm(t)&&this.matchesComparison(Mm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Lf()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cg extends sg{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new cg(e,t)}matches(e){return ug(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ug(e){return"and"===e.op}function lg(e){return"or"===e.op}function hg(e){return dg(e)&&ug(e)}function dg(e){for(const t of e.filters)if(t instanceof cg)return!1;return!0}function fg(e){if(e instanceof ag)return e.field.canonicalString()+e.op.toString()+Um(e.value);if(hg(e))return e.filters.map((e=>fg(e))).join(",");{const t=e.filters.map((e=>fg(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function pg(e,t){return e instanceof ag?function(e,t){return t instanceof ag&&e.op===t.op&&e.field.isEqual(t.field)&&Dm(e.value,t.value)}(e,t):e instanceof cg?function(e,t){return t instanceof cg&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&pg(n,t.filters[r])),!0)}(e,t):void Lf()}function mg(e,t){const n=e.filters.concat(t);return cg.create(n,e.op)}function gg(e){return e instanceof ag?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Um(e.value))}(e):e instanceof cg?function(e){return e.op.toString()+" {"+e.getFilters().map(gg).join(" ,")+"}"}(e):"Filter"}class yg extends ag{constructor(e,t,n){super(e,t,n),this.key=sp.fromName(n.referenceValue)}matches(e){const t=sp.comparator(e.key,this.key);return this.matchesComparison(t)}}class vg extends ag{constructor(e,t){super(e,"in",t),this.keys=bg("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wg extends ag{constructor(e,t){super(e,"not-in",t),this.keys=bg("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>sp.fromName(e.referenceValue)))}class _g extends ag{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bm(t)&&Lm(t.arrayValue,this.value)}}class Sg extends ag{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lm(this.value.arrayValue,t)}}class Eg extends ag{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lm(this.value.arrayValue,t)}}class Ig extends ag{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Lm(this.value.arrayValue,e)))}}class Tg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function kg(e){return new Tg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Cg(e){const t=Ff(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>fg(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Op(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Um(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Um(e))).join(",")),t.ce=e}return t.ce}function xg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!og(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!pg(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!rg(e.startAt,t.startAt)&&rg(e.endAt,t.endAt)}function Ag(e){return sp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ng(e,t){return e.filters.filter((e=>e instanceof ag&&e.field.isEqual(t)))}function Pg(e,t,n){let r=Om,i=!0;for(const o of Ng(e,t)){let e=Om,t=!0;switch(o.op){case"<":case"<=":e=Qm(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=Om}$m({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];$m({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Og(e,t,n){let r=Pm,i=!0;for(const o of Ng(e,t)){let e=Pm,t=!0;switch(o.op){case">=":case">":e=Ym(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Pm}Jm({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Jm({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Rg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Dg(e,t,n,r,i,o,s,a){return new Rg(e,t,n,r,i,o,s,a)}function Lg(e){return new Rg(e)}function Mg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fg(e){return null!==e.collectionGroup}function Ug(e){const t=Ff(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new gm(op.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new ig(r,n))})),e.has(op.keyField().canonicalString())||t.le.push(new ig(op.keyField(),n))}return t.le}function jg(e){const t=Ff(e);return t.he||(t.he=Vg(t,Ug(e))),t.he}function Vg(e,t){if("F"===e.limitType)return kg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ig(e.field,t)}));const n=e.endAt?new tg(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new tg(e.startAt.position,e.startAt.inclusive):null;return kg(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zg(e,t){const n=e.filters.concat([t]);return new Rg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Bg(e,t,n){return new Rg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qg(e,t){return xg(jg(e),jg(t))&&e.limitType===t.limitType}function Kg(e){return"".concat(Cg(jg(e)),"|lt:").concat(e.limitType)}function Wg(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>gg(e))).join(", "),"]")),Op(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Um(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Um(e))).join(",")),"Target(".concat(t,")")}(jg(e)),"; limitType=").concat(e.limitType,")")}function Gg(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ug(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ng(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ug(e),t))&&!(e.endAt&&!function(e,t,n){const r=ng(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ug(e),t))}(e,t)}function Hg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qg(e){return(t,n)=>{let r=!1;for(const i of Ug(e)){const e=Yg(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Yg(e,t,n){const r=e.field.isKeyField()?sp.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Mm(r,i):Lf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Lf()}}class $g{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hm(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return dm(this.inner)}size(){return this.innerSize}}const Jg=new fm(sp.comparator);function Xg(){return Jg}const Zg=new fm(sp.comparator);function ey(){let e=Zg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ty(e){let t=Zg;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ny(){return iy()}function ry(){return iy()}function iy(){return new $g((e=>e.toString()),((e,t)=>e.isEqual(t)))}const oy=new fm(sp.comparator),sy=new gm(sp.comparator);function ay(){let e=sy;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const cy=new gm(Jf);function uy(){return cy}function ly(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rp(t)?"-0":t}}function hy(e){return{integerValue:""+e}}function dy(e,t){return Dp(t)?hy(t):ly(e,t)}class fy{constructor(){this._=void 0}}function py(e,t,n){return e instanceof yy?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&km(t)&&(t=Cm(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof vy?wy(e,t):e instanceof by?_y(e,t):function(e,t){const n=gy(e,t),r=Ey(n)+Ey(e.Ie);return zm(n)&&zm(e.Ie)?hy(r):ly(e.serializer,r)}(e,t)}function my(e,t,n){return e instanceof vy?wy(e,t):e instanceof by?_y(e,t):n}function gy(e,t){return e instanceof Sy?function(e){return zm(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yy extends fy{}class vy extends fy{constructor(e){super(),this.elements=e}}function wy(e,t){const n=Iy(t);for(const r of e.elements)n.some((e=>Dm(e,r)))||n.push(r);return{arrayValue:{values:n}}}class by extends fy{constructor(e){super(),this.elements=e}}function _y(e,t){let n=Iy(t);for(const r of e.elements)n=n.filter((e=>!Dm(e,r)));return{arrayValue:{values:n}}}class Sy extends fy{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ey(e){return Im(e.integerValue||e.doubleValue)}function Iy(e){return Bm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ty{constructor(e,t){this.field=e,this.transform=t}}class ky{constructor(e,t){this.version=e,this.transformResults=t}}class Cy{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cy}static exists(e){return new Cy(void 0,e)}static updateTime(e){return new Cy(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xy(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ay{}function Ny(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vy(e.key,Cy.none()):new Ly(e.key,e.data,Cy.none());{const n=e.data,r=Xm.empty();let i=new gm(op.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new My(e.key,r,new wm(i.toArray()),Cy.none())}}function Py(e,t,n){e instanceof Ly?function(e,t,n){const r=e.value.clone(),i=Uy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof My?function(e,t,n){if(!xy(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Uy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Fy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Oy(e,t,n,r){return e instanceof Ly?function(e,t,n,r){if(!xy(e.precondition,t))return n;const i=e.value.clone(),o=jy(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof My?function(e,t,n,r){if(!xy(e.precondition,t))return n;const i=jy(e.fieldTransforms,r,t),o=t.data;return o.setAll(Fy(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return xy(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ry(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=gy(r.transform,e||null);null!=i&&(null===n&&(n=Xm.empty()),n.set(r.field,i))}return n||null}function Dy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Xf(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vy&&t instanceof vy||e instanceof by&&t instanceof by?Xf(e.elements,t.elements,Dm):e instanceof Sy&&t instanceof Sy?Dm(e.Ie,t.Ie):e instanceof yy&&t instanceof yy}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ly extends Ay{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class My extends Ay{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fy(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Uy(e,t,n){const r=new Map;Mf(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,my(s,a,n[i]))}return r}function jy(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,py(e,o,t))}return r}class Vy extends Ay{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zy extends Ay{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class By{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Py(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Oy(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Oy(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ry();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Ny(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(tp.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ay())}isEqual(e){return this.batchId===e.batchId&&Xf(this.mutations,e.mutations,((e,t)=>Dy(e,t)))&&Xf(this.baseMutations,e.baseMutations,((e,t)=>Dy(e,t)))}}class qy{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Mf(e.mutations.length===n.length);let r=oy;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new qy(e,t,n,r)}}class Ky{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Wy{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gy,Hy;function Qy(e){switch(e){default:return Lf();case Uf.CANCELLED:case Uf.UNKNOWN:case Uf.DEADLINE_EXCEEDED:case Uf.RESOURCE_EXHAUSTED:case Uf.INTERNAL:case Uf.UNAVAILABLE:case Uf.UNAUTHENTICATED:return!1;case Uf.INVALID_ARGUMENT:case Uf.NOT_FOUND:case Uf.ALREADY_EXISTS:case Uf.PERMISSION_DENIED:case Uf.FAILED_PRECONDITION:case Uf.ABORTED:case Uf.OUT_OF_RANGE:case Uf.UNIMPLEMENTED:case Uf.DATA_LOSS:return!0}}function Yy(e){if(void 0===e)return Of("GRPC error has no .code"),Uf.UNKNOWN;switch(e){case Gy.OK:return Uf.OK;case Gy.CANCELLED:return Uf.CANCELLED;case Gy.UNKNOWN:return Uf.UNKNOWN;case Gy.DEADLINE_EXCEEDED:return Uf.DEADLINE_EXCEEDED;case Gy.RESOURCE_EXHAUSTED:return Uf.RESOURCE_EXHAUSTED;case Gy.INTERNAL:return Uf.INTERNAL;case Gy.UNAVAILABLE:return Uf.UNAVAILABLE;case Gy.UNAUTHENTICATED:return Uf.UNAUTHENTICATED;case Gy.INVALID_ARGUMENT:return Uf.INVALID_ARGUMENT;case Gy.NOT_FOUND:return Uf.NOT_FOUND;case Gy.ALREADY_EXISTS:return Uf.ALREADY_EXISTS;case Gy.PERMISSION_DENIED:return Uf.PERMISSION_DENIED;case Gy.FAILED_PRECONDITION:return Uf.FAILED_PRECONDITION;case Gy.ABORTED:return Uf.ABORTED;case Gy.OUT_OF_RANGE:return Uf.OUT_OF_RANGE;case Gy.UNIMPLEMENTED:return Uf.UNIMPLEMENTED;case Gy.DATA_LOSS:return Uf.DATA_LOSS;default:return Lf()}}(Hy=Gy||(Gy={}))[Hy.OK=0]="OK",Hy[Hy.CANCELLED=1]="CANCELLED",Hy[Hy.UNKNOWN=2]="UNKNOWN",Hy[Hy.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hy[Hy.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hy[Hy.NOT_FOUND=5]="NOT_FOUND",Hy[Hy.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hy[Hy.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hy[Hy.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hy[Hy.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hy[Hy.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hy[Hy.ABORTED=10]="ABORTED",Hy[Hy.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hy[Hy.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hy[Hy.INTERNAL=13]="INTERNAL",Hy[Hy.UNAVAILABLE=14]="UNAVAILABLE",Hy[Hy.DATA_LOSS=15]="DATA_LOSS";let $y=null;function Jy(){return new TextEncoder}const Xy=new Tf([4294967295,4294967295],0);function Zy(e){const t=Jy().encode(e),n=new If;return n.update(t),new Uint8Array(n.digest())}function ev(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Tf([n,r],0),new Tf([i,o],0)]}class tv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new nv("Invalid padding: ".concat(t));if(n<0)throw new nv("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new nv("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new nv("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Tf.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Tf.fromNumber(n)));return 1===r.compare(Xy)&&(r=new Tf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Zy(e),[n,r]=ev(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new tv(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=Zy(e),[n,r]=ev(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class nv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rv{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,iv.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new rv(tp.min(),r,new fm(Jf),Xg(),ay())}}class iv{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new iv(n,t,ay(),ay(),ay())}}class ov{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class sv{constructor(e,t){this.targetId=e,this.fe=t}}class av{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_m.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class cv{constructor(){this.ge=0,this.pe=hv(),this.ye=_m.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ay(),t=ay(),n=ay();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Lf()}})),new iv(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=hv()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Mf(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class uv{constructor(e){this.Le=e,this.ke=new Map,this.qe=Xg(),this.Qe=lv(),this.Ke=new fm(Jf)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Lf()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Ag(i))if(0===n){const e=new sp(i.path);this.We(t,e,eg.newNoDocument(e,tp.min()))}else Mf(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==$y||$y.tt(function(e,t,n,r,i){var o,s,a,c,u,l;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(c=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(l=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=Tm(n).toUint8Array()}catch(e){if(e instanceof bm)return Rf("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new tv(o,r,i)}catch(e){return Rf(e instanceof nv?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Ag(i.target)){const t=new sp(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,eg.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=ay();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new rv(e,t,this.Ke,this.qe,n);return this.qe=Xg(),this.Qe=lv(),this.Ke=new fm(Jf),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new cv,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new gm(Jf),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Pf("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new cv),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function lv(){return new fm(sp.comparator)}function hv(){return new fm(sp.comparator)}const dv={asc:"ASCENDING",desc:"DESCENDING"},fv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pv={and:"AND",or:"OR"};class mv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function gv(e,t){return e.useProto3Json||Op(t)?t:{value:t}}function yv(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function vv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wv(e,t){return yv(e,t.toTimestamp())}function bv(e){return Mf(!!e),tp.fromTimestamp(function(e){const t=Em(e);return new ep(t.seconds,t.nanos)}(e))}function _v(e,t){return Sv(e,t).canonicalString()}function Sv(e,t){const n=function(e){return new rp(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ev(e){const t=rp.fromString(e);return Mf(Wv(t)),t}function Iv(e,t){return _v(e.databaseId,t.path)}function Tv(e,t){const n=Ev(t);if(n.get(1)!==e.databaseId.projectId)throw new jf(Uf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new jf(Uf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new sp(Av(n))}function kv(e,t){return _v(e.databaseId,t)}function Cv(e){const t=Ev(e);return 4===t.length?rp.emptyPath():Av(t)}function xv(e){return new rp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Av(e){return Mf(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Nv(e,t,n){return{name:Iv(e,t),fields:n.value.mapValue.fields}}function Pv(e,t,n){const r=Tv(e,t.name),i=bv(t.updateTime),o=t.createTime?bv(t.createTime):tp.min(),s=new Xm({mapValue:{fields:t.fields}}),a=eg.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ov(e,t){let n;if(t instanceof Ly)n={update:Nv(e,t.key,t.value)};else if(t instanceof Vy)n={delete:Iv(e,t.key)};else if(t instanceof My)n={update:Nv(e,t.key,t.data),updateMask:Kv(t.fieldMask)};else{if(!(t instanceof zy))return Lf();n={verify:Iv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof yy)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof by)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sy)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Lf()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wv(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Lf()}(e,t.precondition)),n}function Rv(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Cy.updateTime(bv(e.updateTime)):void 0!==e.exists?Cy.exists(e.exists):Cy.none()}(t.currentDocument):Cy.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Mf("REQUEST_TIME"===t.setToServerValue),n=new yy;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new vy(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new by(e)}else"increment"in t?n=new Sy(e,t.increment):Lf();const r=op.fromServerFormat(t.fieldPath);return new Ty(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Tv(e,t.update.name),o=new Xm({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new wm(t.map((e=>op.fromServerFormat(e))))}(t.updateMask);return new My(i,o,e,n,r)}return new Ly(i,o,n,r)}if(t.delete){const r=Tv(e,t.delete);return new Vy(r,n)}if(t.verify){const r=Tv(e,t.verify);return new zy(r,n)}return Lf()}function Dv(e,t){return{documents:[kv(e,t.path)]}}function Lv(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kv(e,i);const o=function(e){if(0!==e.length)return qv(cg.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:zv(e.field),direction:Uv(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=gv(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Mv(e){let t=Cv(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mf(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Fv(e);return t instanceof cg&&hg(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new ig(Bv(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Op(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new tg(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new tg(n,t)}(n.endAt)),Dg(t,i,s,o,a,"F",c,u)}function Fv(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bv(e.unaryFilter.field);return ag.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Bv(e.unaryFilter.field);return ag.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bv(e.unaryFilter.field);return ag.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bv(e.unaryFilter.field);return ag.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Lf()}}(e):void 0!==e.fieldFilter?function(e){return ag.create(Bv(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lf()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cg.create(e.compositeFilter.filters.map((e=>Fv(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Lf()}}(e.compositeFilter.op))}(e):Lf()}function Uv(e){return dv[e]}function jv(e){return fv[e]}function Vv(e){return pv[e]}function zv(e){return{fieldPath:e.canonicalString()}}function Bv(e){return op.fromServerFormat(e.fieldPath)}function qv(e){return e instanceof ag?function(e){if("=="===e.op){if(Km(e.value))return{unaryFilter:{field:zv(e.field),op:"IS_NAN"}};if(qm(e.value))return{unaryFilter:{field:zv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Km(e.value))return{unaryFilter:{field:zv(e.field),op:"IS_NOT_NAN"}};if(qm(e.value))return{unaryFilter:{field:zv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zv(e.field),op:jv(e.op),value:e.value}}}(e):e instanceof cg?function(e){const t=e.getFilters().map((e=>qv(e)));return 1===t.length?t[0]:{compositeFilter:{op:Vv(e.op),filters:t}}}(e):Lf()}function Kv(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Wv(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Gv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:tp.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_m.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Gv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gv(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hv{constructor(e){this.ct=e}}function Qv(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Yv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Iv(e,t.key),fields:t.data.value.mapValue.fields,updateTime:yv(e,t.version.toTimestamp()),createTime:yv(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$v(t.version)};else{if(!t.isUnknownDocument())return Lf();r.unknownDocument={path:n.path.toArray(),version:$v(t.version)}}return r}function Yv(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $v(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Jv(e){const t=new ep(e.seconds,e.nanoseconds);return tp.fromTimestamp(t)}function Xv(e,t){const n=(t.baseMutations||[]).map((t=>Rv(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>Rv(e.ct,t))),i=ep.fromMillis(t.localWriteTimeMs);return new By(t.batchId,i,n,r)}function Zv(e){const t=Jv(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Jv(e.lastLimboFreeSnapshotVersion):tp.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Mf(1===e.documents.length),jg(Lg(Cv(e.documents[0])))}(e.query):function(e){return jg(Mv(e))}(e.query),new Gv(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,_m.fromBase64String(e.resumeToken))}function ew(e,t){const n=$v(t.snapshotVersion),r=$v(t.lastLimboFreeSnapshotVersion);let i;i=Ag(t.target)?Dv(e.ct,t.target):Lv(e.ct,t.target).ut;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Cg(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tw(e){const t=Mv({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bg(t,t.limit,"L"):t}function nw(e,t){return new Ky(t.largestBatchId,Rv(e.ct,t.overlayMutation))}function rw(e,t){const n=t.path.lastSegment();return[e,Lp(t.path.popLast()),n]}function iw(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:$v(r.readTime),documentKey:Lp(r.documentKey.path),largestBatchId:r.largestBatchId}}class ow{getBundleMetadata(e,t){return sw(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Jv(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return sw(e).put(function(e){return{bundleId:e.id,createTime:$v(bv(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return aw(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:tw(e.bundledQuery),readTime:Jv(e.readTime)}}(e)}))}saveNamedQuery(e,t){return aw(e).put(function(e){return{name:e.name,readTime:$v(bv(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function sw(e){return um(e,"bundles")}function aw(e){return um(e,"namedQueries")}class cw{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new cw(e,n)}getOverlay(e,t){return uw(e).get(rw(this.userId,t)).next((e=>e?nw(this.serializer,e):null))}getOverlays(e,t){const n=ny();return wp.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new Ky(t,i);r.push(this.ht(e,o))})),wp.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Lp(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(uw(e).H("collectionPathOverlayIndex",r))})),wp.waitFor(i)}getOverlaysForCollection(e,t,n){const r=ny(),i=Lp(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return uw(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=nw(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=ny();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uw(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=nw(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return uw(e).put(function(e,t,n){const[r,i,o]=rw(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ov(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function uw(e){return um(e,"documentOverlays")}class lw{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Im(e.integerValue));else if("doubleValue"in e){const n=Im(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Rp(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Tm(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Hm(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Lf()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),sp.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function hw(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function dw(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=hw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}lw.bt=new lw;class fw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=dw(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=dw(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class pw{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class mw{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class gw{constructor(){this.Gt=new fw,this.zt=new pw(this.Gt),this.jt=new mw(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class yw{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new yw(this.indexId,this.documentKey,this.arrayValue,n)}}function vw(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=ww(e.arrayValue,t.arrayValue),0!==n?n:(n=ww(e.directionalValue,t.directionalValue),0!==n?n:sp.comparator(e.documentKey,t.documentKey)))}function ww(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class bw{constructor(e){this.Yt=new gm(((e,t)=>op.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Mf(e.collectionGroup===this.collectionId),this.en)return!1;const t=cp(e);if(void 0!==t&&!this.nn(t))return!1;const n=up(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new gm(op.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new lp(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new lp(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new lp(n.field,"asc"===n.dir?0:1)));return new ap(ap.UNKNOWN_ID,this.collectionId,t,hp.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function _w(e){var t,n;if(Mf(e instanceof ag||e instanceof cg),e instanceof ag){if(e instanceof Sg){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>ag.create(e.field,"==",t))))||[];return cg.create(r,"or")}return e}const r=e.filters.map((e=>_w(e)));return cg.create(r,e.op)}function Sw(e){if(0===e.getFilters().length)return[];const t=kw(_w(e));return Mf(Tw(t)),Ew(t)||Iw(t)?[t]:t.getFilters()}function Ew(e){return e instanceof ag}function Iw(e){return e instanceof cg&&hg(e)}function Tw(e){return Ew(e)||Iw(e)||function(e){if(e instanceof cg&&lg(e)){for(const t of e.getFilters())if(!Ew(t)&&!Iw(t))return!1;return!0}return!1}(e)}function kw(e){if(Mf(e instanceof ag||e instanceof cg),e instanceof ag)return e;if(1===e.filters.length)return kw(e.filters[0]);const t=e.filters.map((e=>kw(e)));let n=cg.create(t,e.op);return n=Aw(n),Tw(n)?n:(Mf(n instanceof cg),Mf(ug(n)),Mf(n.filters.length>1),n.filters.reduce(((e,t)=>Cw(e,t))))}function Cw(e,t){let n;return Mf(e instanceof ag||e instanceof cg),Mf(t instanceof ag||t instanceof cg),n=e instanceof ag?t instanceof ag?function(e,t){return cg.create([e,t],"and")}(e,t):xw(e,t):t instanceof ag?xw(t,e):function(e,t){if(Mf(e.filters.length>0&&t.filters.length>0),ug(e)&&ug(t))return mg(e,t.getFilters());const n=lg(e)?e:t,r=lg(e)?t:e,i=n.filters.map((e=>Cw(e,r)));return cg.create(i,"or")}(e,t),Aw(n)}function xw(e,t){if(ug(t))return mg(t,e.getFilters());{const n=t.filters.map((t=>Cw(e,t)));return cg.create(n,"or")}}function Aw(e){if(Mf(e instanceof ag||e instanceof cg),e instanceof ag)return e;const t=e.getFilters();if(1===t.length)return Aw(t[0]);if(dg(e))return e;const n=t.map((e=>Aw(e))),r=[];return n.forEach((t=>{t instanceof ag?r.push(t):t instanceof cg&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:cg.create(r,e.op)}class Nw{constructor(){this._n=new Pw}addToCollectionParentIndex(e,t){return this._n.add(t),wp.resolve()}getCollectionParents(e,t){return wp.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return wp.resolve()}deleteFieldIndex(e,t){return wp.resolve()}deleteAllFieldIndexes(e){return wp.resolve()}createTargetIndexes(e,t){return wp.resolve()}getDocumentsMatchingTarget(e,t){return wp.resolve(null)}getIndexType(e,t){return wp.resolve(0)}getFieldIndexes(e,t){return wp.resolve([])}getNextCollectionGroupToUpdate(e){return wp.resolve(null)}getMinOffset(e,t){return wp.resolve(pp.min())}getMinOffsetFromCollectionGroup(e,t){return wp.resolve(pp.min())}updateCollectionGroup(e,t,n){return wp.resolve()}updateIndexEntries(e,t){return wp.resolve()}}class Pw{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gm(rp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gm(rp.comparator)).toArray()}}const Ow=new Uint8Array(0);class Rw{constructor(e,t){this.databaseId=t,this.an=new Pw,this.un=new $g((e=>Cg(e)),((e,t)=>xg(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Lp(r)};return Dw(e).put(i)}return wp.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Zf(t),""],!1,!0);return Dw(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Up(r.parent))}return n}))}addFieldIndex(e,t){const n=Mw(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Fw(e);return i.next((e=>{n.put(iw(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Mw(e),r=Fw(e),i=Lw(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Mw(e),n=Lw(e),r=Fw(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return wp.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new bw(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Lw(e);let r=!0;const i=new Map;return wp.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=ay();const r=[];return wp.forEach(i,((i,o)=>{Pf("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Cg(t)));const s=function(e,t){const n=cp(t);if(void 0===n)return null;for(const r of Ng(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of up(t))for(const t of Ng(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of up(t)){const t=0===i.kind?Pg(e,i.fieldPath,e.startAt):Og(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new tg(n,r)}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of up(t)){const t=0===i.kind?Og(e,i.fieldPath,e.endAt):Pg(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new tg(n,r)}(o,i),l=this.hn(i,o,c),h=this.hn(i,o,u),d=this.Pn(i,o,a),f=this.In(i.indexId,s,l,c.inclusive,h,u.inclusive,d);return wp.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=sp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return wp.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Sw(cg.create(e.filters,"and")).map((t=>kg(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.Tn(t[l/c]):Ow,h=this.En(e,a,n[l%c],r),d=this.dn(e,a,i[l%c],o),f=s.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new yw(e,sp.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new yw(e,sp.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new bw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return wp.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new gm(op.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new gw;for(const r of up(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);lw.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new gw;return lw.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new gw;return lw.bt.Pt(Vm(this.databaseId,t),n.Ht(function(e){const t=up(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new gw);let i=0;for(const o of up(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&Bm(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);lw.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new gw;n.seed(e.Wt()),lw.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof ag&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Mw(e),r=Fw(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return wp.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new hp(t.sequenceNumber,new pp(Jv(t.readTime),new sp(Up(t.documentKey)),t.largestBatchId)):hp.empty(),r=e.fields.map((e=>{let[t,n]=e;return new lp(op.fromServerFormat(t),n)}));return new ap(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Jf(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Mw(e),i=Fw(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>wp.forEach(t,(t=>i.put(iw(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return wp.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?wp.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),wp.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?wp.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Lw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Lw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Lw(e);let i=new gm(vw);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new yw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new gm(vw);const r=this.An(t,e);if(null==r)return n;const i=cp(t);if(null!=i){const o=e.data.field(i.fieldPath);if(Bm(o))for(const i of o.arrayValue.values||[])n=n.add(new yw(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new yw(t.indexId,e.key,Ow,r));return n}wn(e,t,n,r,i){Pf("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=vm(o),c=vm(s);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=vm(s)):t?(i(a),a=vm(o)):(a=vm(o),c=vm(s))}}(r,i,vw,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),wp.waitFor(o)}gn(e){let t=1;return Fw(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>vw(e,t))).filter(((e,t,n)=>!t||0!==vw(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=vw(o,e),i=vw(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Ow,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Ow,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return vw(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Uw)}getMinOffset(e,t){return wp.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Lf())))).next(Uw)}}function Dw(e){return um(e,"collectionParents")}function Lw(e){return um(e,"indexEntries")}function Mw(e){return um(e,"indexConfiguration")}function Fw(e){return um(e,"indexState")}function Uw(e){Mf(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;mp(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new pp(t.readTime,t.documentKey,n)}const jw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vw{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Vw(e,Vw.DEFAULT_COLLECTION_PERCENTILE,Vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zw(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(c.next((()=>{Mf(1===a)})));const u=[];for(const l of n.mutations){const e=zp(t,l.key.path,n.batchId);o.push(i.delete(e)),u.push(l.key)}return wp.waitFor(o).next((()=>u))}function Bw(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Lf();t=e.noDocument}return JSON.stringify(t).length}Vw.DEFAULT_COLLECTION_PERCENTILE=10,Vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vw.DEFAULT=new Vw(41943040,Vw.DEFAULT_COLLECTION_PERCENTILE,Vw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vw.DISABLED=new Vw(-1,0,0);class qw{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Mf(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new qw(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ww(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Gw(e),o=Ww(e);return o.add({}).next((s=>{Mf("number"==typeof s);const a=new By(s,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Ov(e.ct,t))),i=n.mutations.map((t=>Ov(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let l=new gm(((e,t)=>Jf(e.canonicalString(),t.canonicalString())));for(const e of r){const t=zp(this.userId,e.key.path,s);l=l.add(e.key.path.popLast()),u.push(o.put(c)),u.push(i.put(t,Bp))}return l.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),wp.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Ww(e).get(t).next((e=>e?(Mf(e.userId===this.userId),Xv(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?wp.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ww(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Mf(t.batchId>=n),i=Xv(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ww(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ww(e).W("userMutationsIndex",t).next((e=>e.map((e=>Xv(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Vp(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Gw(e).Y({range:r},((n,r,o)=>{const[s,a,c]=n,u=Up(a);if(s===this.userId&&t.path.isEqual(u))return Ww(e).get(c).next((e=>{if(!e)throw Lf();Mf(e.userId===this.userId),i.push(Xv(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gm(Jf);const r=[];return t.forEach((t=>{const i=Vp(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=Gw(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,c=Up(s);o===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(s)})),wp.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Vp(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new gm(Jf);return Gw(e).Y({range:o},((e,t,i)=>{const[o,a,c]=e,u=Up(a);o===this.userId&&n.isPrefixOf(u)?u.length===r&&(s=s.add(c)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Ww(e).get(t).next((e=>{if(null===e)throw Lf();Mf(e.userId===this.userId),n.push(Xv(this.serializer,e))})))})),wp.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return zw(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),wp.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return wp.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Gw(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Up(e[1]);r.push(t)}else n.done()})).next((()=>{Mf(0===r.length)}))}))}containsKey(e,t){return Kw(e,this.userId,t)}xn(e){return Hw(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Kw(e,t,n){const r=Vp(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Gw(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,c]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function Ww(e){return um(e,"mutations")}function Gw(e){return um(e,"documentMutations")}function Hw(e){return um(e,"mutationQueues")}class Qw{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Qw(0)}static Bn(){return new Qw(-1)}}class Yw{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Qw(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>tp.fromTimestamp(new ep(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>$w(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Mf(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return $w(e).Y(((o,s)=>{const a=Zv(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>wp.waitFor(i))).next((()=>r))}forEachTarget(e,t){return $w(e).Y(((e,n)=>{const r=Zv(n);t(r)}))}Ln(e){return Jw(e).get("targetGlobalKey").next((e=>(Mf(null!==e),e)))}kn(e,t){return Jw(e).put("targetGlobalKey",t)}qn(e,t){return $w(e).put(ew(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Cg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return $w(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=Zv(n);xg(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Xw(e);return t.forEach((t=>{const o=Lp(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),wp.waitFor(r)}removeMatchingKeys(e,t,n){const r=Xw(e);return wp.forEach(t,(t=>{const i=Lp(t.path);return wp.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Xw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Xw(e);let i=ay();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Up(e[1]),o=new sp(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Lp(t.path),r=IDBKeyRange.bound([n],[Zf(n)],!1,!0);let i=0;return Xw(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return $w(e).get(t).next((e=>e?Zv(e):null))}}function $w(e){return um(e,"targets")}function Jw(e){return um(e,"targetGlobal")}function Xw(e){return um(e,"targetDocuments")}function Zw(e,t){let[n,r]=e,[i,o]=t;const s=Jf(n,i);return 0===s?Jf(r,o):s}class eb{constructor(e){this.Kn=e,this.buffer=new gm(Zw),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Zw(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tb{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Pf("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ip(e)?Pf("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await vp(e)}await this.zn(3e5)}))}}class nb{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return wp.resolve(Pp._e);const n=new eb(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pf("LruGarbageCollector","Garbage collection skipped; disabled"),wp.resolve(jw)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Pf("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),jw):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Pf("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Nf()<=Hn.DEBUG&&Pf("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),wp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function rb(e,t){return new nb(e,t)}class ib{constructor(e,t){this.db=e,this.garbageCollector=rb(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return ob(e,n)}removeReference(e,t,n){return ob(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ob(e,t)}er(e,t){return function(e,t){let n=!1;return Hw(e).Z((r=>Kw(e,r,t).next((e=>(e&&(n=!0),wp.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,tp.min()),Xw(e).delete(function(e){return[0,Lp(e.path)]}(o)))))}));r.push(t)}})).next((()=>wp.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ob(e,t)}Xn(e,t){const n=Xw(e);let r,i=Pp._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:c}=n;0===o?(i!==Pp._e&&t(new sp(Up(r)),i),i=c,r=a):i=Pp._e})).next((()=>{i!==Pp._e&&t(new sp(Up(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ob(e,t){return Xw(e).put(function(e,t){return{targetId:0,path:Lp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class sb{constructor(){this.changes=new $g((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,eg.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?wp.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ab{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return hb(e).put(n)}removeEntry(e,t,n){return hb(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Yv(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=eg.newInvalidDocument(t);return hb(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(db(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:eg.newInvalidDocument(t)};return hb(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(db(t))},((e,r)=>{n={document:this.nr(t,r),size:Bw(r)}})).next((()=>n))}getEntries(e,t){let n=Xg();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Xg(),r=new fm(sp.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Bw(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return wp.resolve();let r=new gm(pb);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(db(r.first()),db(r.last())),o=r.getIterator();let s=o.getNext();return hb(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=sp.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&pb(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(db(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Yv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hb(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Xg();for(const i of e){const e=this.nr(sp.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Gg(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Xg();const o=fb(t,n),s=fb(t,pp.max());return hb(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(sp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new ub(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return lb(e).get("remoteDocumentGlobalKey").next((e=>(Mf(!!e),e)))}tr(e,t){return lb(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Pv(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=sp.fromSegments(t.noDocument.path),r=Jv(t.noDocument.readTime);n=eg.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Lf();{const e=sp.fromSegments(t.unknownDocument.path),r=Jv(t.unknownDocument.version);n=eg.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ep(e[0],e[1]);return tp.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(tp.min()))return e}return eg.newInvalidDocument(e)}}function cb(e){return new ab(e)}class ub extends sb{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new $g((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new gm(((e,t)=>Jf(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=Qv(this.ar.serializer,o);r=r.add(i.path.popLast());const c=Bw(a);n+=c-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=Qv(this.ar.serializer,o.convertToNoDocument(tp.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),wp.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function lb(e){return um(e,"remoteDocumentGlobal")}function hb(e){return um(e,"remoteDocumentsV14")}function db(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function fb(e,t){const n=t.documentKey.path.toArray();return[e,Yv(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pb(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Jf(n[o],r[o]),i)return i;return i=Jf(n.length,r.length),i||(i=Jf(n[n.length-2],r[r.length-2]),i||Jf(n[n.length-1],r[r.length-1]))}class mb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gb{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Oy(n.mutation,e,wm.empty(),ep.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ay()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ay();const r=ny();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ey();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ny();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ay())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Xg();const o=iy(),s=iy();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof My)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Oy(s.mutation,t,s.mutation.getFieldMask(),ep.now())):o.set(t.key,wm.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new mb(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=iy();let r=new fm(((e,t)=>e-t)),i=ay();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||wm.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||ay()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,c=r.value,u=ry();c.forEach((e=>{if(!i.has(e)){const r=Ny(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return wp.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return sp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):wp.resolve(ny());let s=-1,a=i;return o.next((t=>wp.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?wp.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,ay()))).next((e=>({batchId:s,changes:ty(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sp(t)).next((e=>{let t=ey();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=ey();return this.indexManager.getCollectionParents(e,i).next((s=>wp.forEach(s,(s=>{const a=function(e,t){return new Rg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,eg.newInvalidDocument(r)))}));let n=ey();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Oy(o.mutation,r,wm.empty(),ep.now()),Gg(t,r)&&(n=n.insert(e,r))})),n}))}}class yb{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return wp.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:bv(e.createTime)}}(t)),wp.resolve()}getNamedQuery(e,t){return wp.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:tw(e.bundledQuery),readTime:bv(e.readTime)}}(t)),wp.resolve()}}class vb{constructor(){this.overlays=new fm(sp.comparator),this.hr=new Map}getOverlay(e,t){return wp.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ny();return wp.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),wp.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),wp.resolve()}getOverlaysForCollection(e,t,n){const r=ny(),i=t.length+1,o=new sp(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return wp.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new fm(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ny(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=ny(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return wp.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ky(t,n));let i=this.hr.get(t);void 0===i&&(i=ay(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class wb{constructor(){this.Pr=new gm(bb.Ir),this.Tr=new gm(bb.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new bb(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new bb(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new sp(new rp([])),n=new bb(t,e),r=new bb(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new sp(new rp([])),n=new bb(t,e),r=new bb(t,e+1);let i=ay();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new bb(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class bb{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return sp.comparator(e.key,t.key)||Jf(e.pr,t.pr)}static Er(e,t){return Jf(e.pr,t.pr)||sp.comparator(e.key,t.key)}}class _b{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new gm(bb.Ir)}checkEmpty(e){return wp.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new By(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new bb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return wp.resolve(o)}lookupMutationBatch(e,t){return wp.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return wp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return wp.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return wp.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new bb(t,0),r=new bb(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),wp.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gm(Jf);return t.forEach((e=>{const t=new bb(e,0),r=new bb(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),wp.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;sp.isDocumentKey(i)||(i=i.child(""));const o=new bb(new sp(i),0);let s=new gm(Jf);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),wp.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Mf(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return wp.forEach(t.mutations,(r=>{const i=new bb(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new bb(t,0),r=this.wr.firstAfterOrEqual(n);return wp.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,wp.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sb{constructor(e){this.vr=e,this.docs=new fm(sp.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return wp.resolve(n?n.document.mutableCopy():eg.newInvalidDocument(t))}getEntries(e,t){let n=Xg();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():eg.newInvalidDocument(e))})),wp.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Xg();const o=t.path,s=new sp(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||mp(fp(s),n)<=0||(r.has(s.key)||Gg(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return wp.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Lf()}Fr(e,t){return wp.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Eb(this)}getSize(e){return wp.resolve(this.size)}}class Eb extends sb{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),wp.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Ib{constructor(e){this.persistence=e,this.Mr=new $g((e=>Cg(e)),xg),this.lastRemoteSnapshotVersion=tp.min(),this.highestTargetId=0,this.Or=0,this.Nr=new wb,this.targetCount=0,this.Br=Qw.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),wp.resolve()}getLastRemoteSnapshotVersion(e){return wp.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wp.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),wp.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),wp.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Qw(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,wp.resolve()}updateTargetData(e,t){return this.qn(t),wp.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,wp.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),wp.waitFor(i).next((()=>r))}getTargetCount(e){return wp.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return wp.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),wp.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),wp.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),wp.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return wp.resolve(n)}containsKey(e,t){return wp.resolve(this.Nr.containsKey(t))}}class Tb{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Pp(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ib(this),this.indexManager=new Nw,this.remoteDocumentCache=function(e){return new Sb(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Hv(t),this.$r=new yb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new _b(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Pf("MemoryPersistence","Starting transaction:",e);const r=new kb(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return wp.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class kb extends yp{constructor(e){super(),this.currentSequenceNumber=e}}class Cb{constructor(e){this.persistence=e,this.zr=new wb,this.jr=null}static Hr(e){return new Cb(e)}get Jr(){if(this.jr)return this.jr;throw Lf()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),wp.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),wp.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),wp.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wp.forEach(this.Jr,(n=>{const r=sp.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,tp.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return wp.or([()=>wp.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class xb{constructor(e){this.serializer=e}N(e,t,n,r){const i=new bp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jp,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ab(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=wp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ab(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jp,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return wp.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:em});t.createIndex("collectionPathOverlayIndex",tm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",nm,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:qp});t.createIndex("documentKeyIndex",Kp),t.createIndex("collectionGroupIndex",Wp)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:$p}).createIndex("sequenceNumberIndex",Jp,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Xp}).createIndex("documentKeyIndex",Zp,{unique:!1})}(e)))),o}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Bw(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>wp.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>wp.forEach(n,(n=>{Mf(n.userId===t.userId);const r=Xv(this.serializer,n);return zw(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new rp(n),s=function(e){return[0,Lp(e)]}(o);r.push(t.get(s).next((n=>n?wp.resolve():(n=>t.put({targetId:0,path:Lp(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>wp.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Yp});const n=t.store("collectionParents"),r=new Pw,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Lp(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new rp(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=Up(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Zv(n),i=ew(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new sp(rp.fromString(e.document.name).popFirst(5)):e.noDocument?sp.fromSegments(e.noDocument.path):e.unknownDocument?sp.fromSegments(e.unknownDocument.path):Lf()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>wp.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=cb(this.serializer),i=new Tb(Cb.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ay();Xv(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),wp.forEach(n,((e,n)=>{const o=new Cf(n),s=cw.lt(this.serializer,o),a=i.getIndexManager(o),c=qw.lt(o,this.serializer,a,i.referenceDelegate);return new gb(r,c,s,a).recalculateAndSaveOverlaysForDocumentKeys(new cm(t,Pp._e),e).next()}))}))}}function Ab(e){e.createObjectStore("targetDocuments",{keyPath:Hp}).createIndex("documentTargetsIndex",Qp,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gp,{unique:!0}),e.createObjectStore("targetGlobal")}const Nb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Pb{constructor(e,t,n,r,i,o,s,a,c,u){let l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=c,this.ai=u,this.ui=l,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Pb.D())throw new jf(Uf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ib(this,r),this.Ti=t+"main",this.serializer=new Hv(a),this.Ei=new _p(this.Ti,this.ui,new xb(this.serializer)),this.Qr=new Yw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cb(this.serializer),this.$r=new ow,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Of("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new jf(Uf.FAILED_PRECONDITION,Nb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Pp(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Rb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Ip(e))return Pf("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pf("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Ob(e).get("owner").next((e=>wp.resolve(this.Si(e))))}bi(e){return Rb(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=um(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return wp.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?wp.resolve(!0):Ob(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new jf(Uf.FAILED_PRECONDITION,Nb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rb(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Pf("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new cm(e,Pp._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Rb(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return qw.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cw.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Pf("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?am:14===e?sm:13===e?om:12===e?im:11===e?rm:void Lf()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new cm(r,this.kr?this.kr.next():Pp._e),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw Of("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new jf(Uf.FAILED_PRECONDITION,gp);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return Ob(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new jf(Uf.FAILED_PRECONDITION,Nb)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ob(e).put("owner",t)}static D(){return _p.D()}yi(e){const t=Ob(e);return t.get("owner").next((e=>this.Si(e)?(Pf("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):wp.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Of("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Cn()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Pf("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Of("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Of("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Ob(e){return um(e,"owner")}function Rb(e){return um(e,"clientMetadata")}function Db(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Lb{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=ay(),r=ay();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Lb(e,t.fromCache,n,r)}}class Mb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Fb{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Cn()?8:_p.v(Sn())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Mb;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Nf()<=Hn.DEBUG&&Pf("QueryEngine","SDK will not create cache indexes for query:",Wg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),wp.resolve()):(Nf()<=Hn.DEBUG&&Pf("QueryEngine","Query:",Wg(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Nf()<=Hn.DEBUG&&Pf("QueryEngine","The SDK decides to create cache indexes for query:",Wg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jg(t))):wp.resolve())}ji(e,t){if(Mg(t))return wp.resolve(null);let n=jg(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Bg(t,null,"F"),n=jg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ay(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,Bg(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return Mg(t)||r.isEqual(tp.min())?wp.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?wp.resolve(null):(Nf()<=Hn.DEBUG&&Pf("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wg(t)),this.es(e,o,t,dp(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new gm(Qg(e));return t.forEach(((t,r)=>{Gg(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Nf()<=Hn.DEBUG&&Pf("QueryEngine","Using full collection scan to execute query:",Wg(t)),this.zi.getDocumentsMatchingQuery(e,t,pp.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Ub{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new fm(Jf),this.rs=new $g((e=>Cg(e)),xg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gb(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function jb(e,t,n,r){return new Ub(e,t,n,r)}async function Vb(e,t){const n=Ff(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=ay();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function zb(e){const t=Ff(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Bb(e,t,n){let r=ay(),i=ay();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Xg();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(tp.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Pf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function qb(e,t){const n=Ff(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Kb(e,t){const n=Ff(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,wp.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Gv(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Wb(e,t,n){const r=Ff(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ip(e))throw e;Pf("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Gb(e,t,n){const r=Ff(e);let i=tp.min(),o=ay();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ff(e),i=r.rs.get(n);return void 0!==i?wp.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,jg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:tp.min(),n?o:ay()))).next((e=>(Yb(r,Hg(t),e),{documents:e,hs:o})))))}function Hb(e,t){const n=Ff(e),r=Ff(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Qb(e,t){const n=Ff(e),r=n.ss.get(t)||tp.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,dp(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Yb(n,t,e),e)))}function Yb(e,t,n){let r=e.ss.get(t)||tp.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function $b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ay();const r=await Kb(e,jg(tw(t.bundledQuery))),i=Ff(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=bv(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(_m.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Jb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Xb(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Zb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class e_{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new jf(r.error.code,r.error.message))),o?new e_(e,t,r.state,i):(Of("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class t_{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new jf(n.error.code,n.error.message))),i?new t_(e,n.state,r):(Of("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class n_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=uy();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Dp(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new n_(e,i):(Of("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class r_{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new r_(t.clientId,t.onlineState):(Of("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class i_{constructor(){this.activeTargetIds=uy()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o_{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new fm(Jf),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Jb(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new i_),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Jb(this.persistenceKey,n));if(e){const t=n_.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Zb(this.persistenceKey,e));if(n){const r=t_.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zb(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pf("SharedClientState","READ",e,t),t}setItem(e,t){Pf("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pf("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Pf("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Of("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Pp._e;if(null!=e)try{const n=JSON.parse(e);Mf("number"==typeof n),t=n}catch(e){Of("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Pp._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new e_(this.currentUser,e,t,n),i=Xb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Xb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Zb(this.persistenceKey,e),i=new t_(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return n_.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return e_.Es(new Cf(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return t_.Es(r,t)}xs(e){return r_.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Pf("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=uy();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class s_{constructor(){this.no=new i_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new i_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a_{io(e){}shutdown(){}}class c_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Pf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Pf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let u_=null;function l_(){return null===u_?u_=268435456+Math.round(2147483648*Math.random()):u_++,"0x"+u_.toString(16)}const h_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class d_{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const f_="WebChannelConnection";class p_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const o=l_(),s=this.bo(e,t.toUriEncodedString());Pf("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,s,a,n).then((t=>(Pf("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Rf("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=h_[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=l_();return new Promise(((o,s)=>{const a=new Ef;a.setWithCredentials(!0),a.listenOnce(wf.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case vf.NO_ERROR:const t=a.getResponseJson();Pf(f_,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case vf.TIMEOUT:Pf(f_,"RPC '".concat(e,"' ").concat(i," timed out")),s(new jf(Uf.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const n=a.getStatus();if(Pf(f_,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Uf).indexOf(t)>=0?t:Uf.UNKNOWN}(t.status);s(new jf(e,t.message))}else s(new jf(Uf.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new jf(Uf.UNAVAILABLE,"Connection failed."));break;default:Lf()}}finally{Pf(f_,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Pf(f_,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=l_(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gf(),s=yf(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Pf(f_,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const l=o.createWebChannel(u,a);let h=!1,d=!1;const f=new d_({lo:t=>{d?Pf(f_,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Pf(f_,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),Pf(f_,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},ho:()=>l.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(l,Sf.EventType.OPEN,(()=>{d||Pf(f_,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Sf.EventType.CLOSE,(()=>{d||(d=!0,Pf(f_,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(l,Sf.EventType.ERROR,(t=>{d||(d=!0,Rf(f_,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new jf(Uf.UNAVAILABLE,"The operation could not be completed")))})),p(l,Sf.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Mf(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Pf(f_,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Gy[e];if(void 0!==t)return Yy(t)}(t),i=s.message;void 0===n&&(n=Uf.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Vo(new jf(n,i)),l.close()}else Pf(f_,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(s,bf.STAT_EVENT,(t=>{t.stat===_f.PROXY?Pf(f_,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===_f.NOPROXY&&Pf(f_,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function m_(){return"undefined"!=typeof window?window:null}function g_(){return"undefined"!=typeof document?document:null}function y_(e){return new mv(e,!0)}class v_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Pf("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class w_{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new v_(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Uf.RESOURCE_EXHAUSTED?(Of(t.toString()),Of("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Uf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new jf(Uf.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Pf("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Pf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class b_ extends w_{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Lf()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Mf(void 0===t||"string"==typeof t),_m.fromBase64String(t||"")):(Mf(void 0===t||t instanceof Uint8Array),_m.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Uf.UNKNOWN:Yy(e.code);return new jf(t,e.message||"")}(s);n=new av(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Tv(e,r.document.name),o=bv(r.document.updateTime),s=r.document.createTime?bv(r.document.createTime):tp.min(),a=new Xm({mapValue:{fields:r.document.fields}}),c=eg.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new ov(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Tv(e,r.document),o=r.readTime?bv(r.readTime):tp.min(),s=eg.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ov([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Tv(e,r.document),o=r.removedTargetIds||[];n=new ov([],o,i,null)}else{if(!("filter"in t))return Lf();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Wy(r,i),s=e.targetId;n=new sv(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return tp.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?tp.min():t.readTime?bv(t.readTime):tp.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=xv(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ag(r)?{documents:Dv(e,r)}:{query:Lv(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=vv(e,t.resumeToken);const r=gv(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(tp.min())>0){n.readTime=yv(e,t.snapshotVersion.toTimestamp());const r=gv(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lf()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=xv(this.serializer),t.removeTarget=e,this.t_(t)}}class __ extends w_{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Mf(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Mf(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?bv(e.updateTime):bv(t);return n.isEqual(tp.min())&&(n=bv(t)),new ky(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=bv(e.commitTime);return this.listener.T_(n,t)}return Mf(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=xv(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ov(this.serializer,e)))};this.t_(t)}}class S_ extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new jf(Uf.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,Sv(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Uf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jf(Uf.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(e,Sv(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Uf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jf(Uf.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class E_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Of(t),this.g_=!1):Pf("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class I_{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{R_(this)&&(Pf("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ff(e);t.v_.add(4),await k_(t),t.x_.set("Unknown"),t.v_.delete(4),await T_(t)}(this))}))})),this.x_=new E_(n,r)}}async function T_(e){if(R_(e))for(const t of e.F_)await t(!0)}async function k_(e){for(const t of e.F_)await t(!1)}function C_(e,t){const n=Ff(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),O_(n)?P_(n):J_(n).Jo()&&A_(n,t))}function x_(e,t){const n=Ff(e),r=J_(n);n.C_.delete(t),r.Jo()&&N_(n,t),0===n.C_.size&&(r.Jo()?r.Xo():R_(n)&&n.x_.set("Unknown"))}function A_(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tp.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}J_(e).c_(t)}function N_(e,t){e.O_.Oe(t),J_(e).l_(t)}function P_(e){e.O_=new uv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),J_(e).start(),e.x_.p_()}function O_(e){return R_(e)&&!J_(e).Ho()&&e.C_.size>0}function R_(e){return 0===Ff(e).v_.size}function D_(e){e.O_=void 0}async function L_(e){e.C_.forEach(((t,n)=>{A_(e,t)}))}async function M_(e,t){D_(e),O_(e)?(e.x_.S_(t),P_(e)):e.x_.set("Unknown")}async function F_(e,t,n){if(e.x_.set("Online"),t instanceof av&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Pf("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await U_(e,n)}else if(t instanceof ov?e.O_.$e(t):t instanceof sv?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(tp.min()))try{const t=await zb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(_m.EMPTY_BYTE_STRING,r.snapshotVersion)),N_(e,t);const i=new Gv(r.target,t,n,r.sequenceNumber);A_(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Pf("RemoteStore","Failed to raise snapshot:",t),await U_(e,t)}}async function U_(e,t,n){if(!Ip(t))throw t;e.v_.add(1),await k_(e),e.x_.set("Offline"),n||(n=()=>zb(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Pf("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await T_(e)}))}function j_(e,t){return t().catch((n=>U_(e,n,t)))}async function V_(e){const t=Ff(e),n=X_(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;z_(t);)try{const e=await qb(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,B_(t,e)}catch(e){await U_(t,e)}q_(t)&&K_(t)}function z_(e){return R_(e)&&e.D_.length<10}function B_(e,t){e.D_.push(t);const n=X_(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function q_(e){return R_(e)&&!X_(e).Ho()&&e.D_.length>0}function K_(e){X_(e).start()}async function W_(e){X_(e).d_()}async function G_(e){const t=X_(e);for(const n of e.D_)t.I_(n.mutations)}async function H_(e,t,n){const r=e.D_.shift(),i=qy.from(r,t,n);await j_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await V_(e)}async function Q_(e,t){t&&X_(e).P_&&await async function(e,t){if(function(e){return Qy(e)&&e!==Uf.ABORTED}(t.code)){const n=e.D_.shift();X_(e).Zo(),await j_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await V_(e)}}(e,t),q_(e)&&K_(e)}async function Y_(e,t){const n=Ff(e);n.asyncQueue.verifyOperationInProgress(),Pf("RemoteStore","RemoteStore received new credentials");const r=R_(n);n.v_.add(3),await k_(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await T_(n)}async function $_(e,t){const n=Ff(e);t?(n.v_.delete(2),await T_(n)):t||(n.v_.add(2),await k_(n),n.x_.set("Unknown"))}function J_(e){return e.N_||(e.N_=function(e,t,n){const r=Ff(e);return r.R_(),new b_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:L_.bind(null,e),To:M_.bind(null,e),u_:F_.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),O_(e)?P_(e):e.x_.set("Unknown")):(await e.N_.stop(),D_(e))}))),e.N_}function X_(e){return e.B_||(e.B_=function(e,t,n){const r=Ff(e);return r.R_(),new __(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:W_.bind(null,e),To:Q_.bind(null,e),E_:G_.bind(null,e),T_:H_.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await V_(e)):(await e.B_.stop(),e.D_.length>0&&(Pf("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class Z_{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Z_(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jf(Uf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eS(e,t){if(Of("AsyncQueue","".concat(t,": ").concat(e)),Ip(e))return new jf(Uf.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class tS{constructor(e){this.comparator=e?(t,n)=>e(t,n)||sp.comparator(t.key,n.key):(e,t)=>sp.comparator(e.key,t.key),this.keyedMap=ey(),this.sortedSet=new fm(this.comparator)}static emptySet(e){return new tS(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tS))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new tS;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class nS{constructor(){this.L_=new fm(sp.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Lf():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class rS{constructor(e,t,n,r,i,o,s,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new rS(e,t,tS.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class iS{constructor(){this.q_=void 0,this.Q_=[]}}class oS{constructor(){this.queries=new $g((e=>Kg(e)),qg),this.onlineState="Unknown",this.K_=new Set}}async function sS(e,t){const n=Ff(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new iS),i)try{o.q_=await n.onListen(r)}catch(e){const n=eS(e,"Initialization of query '".concat(Wg(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.Q_.push(t),t.U_(n.onlineState),o.q_&&t.W_(o.q_)&&lS(n)}async function aS(e,t){const n=Ff(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),i=0===o.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function cS(e,t){const n=Ff(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&lS(n)}function uS(e,t,n){const r=Ff(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function lS(e){e.K_.forEach((e=>{e.next()}))}class hS{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new rS(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=rS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class dS{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class fS{constructor(e){this.serializer=e}Ps(e){return Tv(this.serializer,e)}Is(e){return e.metadata.exists?Pv(this.serializer,e.document,!1):eg.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return bv(e)}}class pS{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mS(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=rp.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new fS(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||ay()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Ff(e);let o=ay(),s=Xg();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(o=o.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await Kb(i,function(e){return jg(Lg(rp.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Bb(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,o,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new fS(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await $b(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function mS(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class gS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class vS{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=ay(),this.mutatedKeys=ay(),this.ua=Qg(e),this.ca=new tS(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new nS,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),l=Gg(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ia(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.ua(l,a)>0||c&&this.ua(l,c)<0)&&(s=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(s=!0)),f&&(l?(o=o.add(l),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:o,Pa:n,Xi:s,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lf()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const s=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==o.length||c?{snapshot:new rS(this.query,e.ca,i,o,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:s}:{da:s}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new nS,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=ay(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new yS(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new gS(n))})),t}Ra(e){this.oa=e.hs,this.aa=ay();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return rS.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class wS{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class bS{constructor(e){this.key=e,this.ma=!1}}class _S{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new $g((e=>Kg(e)),qg),this.pa=new Map,this.ya=new Set,this.wa=new fm(sp.comparator),this.Sa=new Map,this.ba=new wb,this.Da={},this.Ca=new Map,this.va=Qw.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function SS(e,t){const n=QS(e);let r,i;const o=n.ga.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const e=await Kb(n.localStore,jg(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await ES(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&C_(n.remoteStore,e)}return i}async function ES(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Gb(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return DS(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const o=await Gb(e.localStore,t,!0),s=new vS(t,o.hs),a=s.ha(o.documents),c=iv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=s.applyChanges(a,e.isPrimaryClient,c);DS(e,n,u.da);const l=new wS(t,n,s);return e.ga.set(t,l),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function IS(e,t){const n=Ff(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!qg(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Wb(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),x_(n.remoteStore,r.targetId),OS(n,r.targetId)})).catch(vp)):(OS(n,r.targetId),await Wb(n.localStore,r.targetId,!0))}async function TS(e,t){const n=Ff(e);try{const e=await function(e,t){const n=Ff(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const c=i.get(a);if(!c)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(_m.EMPTY_BYTE_STRING,tp.min()).withLastLimboFreeSnapshotVersion(tp.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,o)&&s.push(n.Qr.updateTargetData(e,u))}));let a=Xg(),c=ay();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Bb(e,o,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(tp.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return wp.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Mf(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Mf(r.ma):e.removedDocuments.size>0&&(Mf(r.ma),r.ma=!1))})),await FS(n,e,t)}catch(e){await vp(e)}}function kS(e,t,n){const r=Ff(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ff(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&lS(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function CS(e,t,n){const r=Ff(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),o=i&&i.key;if(o){let e=new fm(sp.comparator);e=e.insert(o,eg.newNoDocument(o,tp.min()));const n=ay().add(o),i=new rv(tp.min(),new Map,new fm(Jf),e,n);await TS(r,i),r.wa=r.wa.remove(o),r.Sa.delete(t),MS(r)}else await Wb(r.localStore,t,!1).then((()=>OS(r,t,n))).catch(vp)}async function xS(e,t){const n=Ff(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ff(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=wp.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Mf(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ay();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);PS(n,r,null),NS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await FS(n,e)}catch(e){await vp(e)}}async function AS(e,t,n){const r=Ff(e);try{const e=await function(e,t){const n=Ff(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Mf(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);PS(r,t,n),NS(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await FS(r,e)}catch(n){await vp(n)}}function NS(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function PS(e,t,n){const r=Ff(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function OS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||RS(e,t)}))}function RS(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(x_(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),MS(e))}function DS(e,t,n){for(const r of n)r instanceof gS?(e.ba.addReference(r.key,t),LS(e,r)):r instanceof yS?(Pf("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||RS(e,r.key)):Lf()}function LS(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Pf("SyncEngine","New document in limbo: "+n),e.ya.add(r),MS(e))}function MS(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new sp(rp.fromString(t)),r=e.va.next();e.Sa.set(r,new bS(n)),e.wa=e.wa.insert(n,r),C_(e.remoteStore,new Gv(jg(Lg(n.path)),r,"TargetPurposeLimboResolution",Pp._e))}}async function FS(e,t,n){const r=Ff(e),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{s.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Lb.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.fa.u_(i),await async function(e,t){const n=Ff(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>wp.forEach(t,(t=>wp.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>wp.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ip(e))throw e;Pf("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function US(e,t){const n=Ff(e);if(!n.currentUser.isEqual(t)){Pf("SyncEngine","User change. New user:",t.toKey());const e=await Vb(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new jf(Uf.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await FS(n,e.us)}}function jS(e,t){const n=Ff(e),r=n.Sa.get(t);if(r&&r.ma)return ay().add(r.key);{let e=ay();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function VS(e,t){const n=Ff(e),r=await Gb(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&DS(n,t.targetId,i.da),i}async function zS(e,t){const n=Ff(e);return Qb(n.localStore,t).then((e=>FS(n,e)))}async function BS(e,t,n,r){const i=Ff(e),o=await function(e,t){const n=Ff(e),r=Ff(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):wp.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await V_(i.remoteStore):"acknowledged"===n||"rejected"===n?(PS(i,t,r||null),NS(i,t),function(e,t){Ff(Ff(e).mutationQueue).Mn(t)}(i.localStore,t)):Lf(),await FS(i,o)):Pf("SyncEngine","Cannot apply mutation batch with id: "+t)}async function qS(e,t,n){const r=Ff(e),i=[],o=[];for(const s of t){let e;const t=r.pa.get(s);if(t&&0!==t.length){e=await Kb(r.localStore,jg(t[0]));for(const e of t){const t=r.ga.get(e),n=await VS(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await Hb(r.localStore,s);e=await Kb(r.localStore,t),await ES(r,KS(t),s,!1,e.resumeToken)}i.push(e)}return r.fa.u_(o),i}function KS(e){return Dg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function WS(e){return function(e){return Ff(Ff(e).persistence).Li()}(Ff(e).localStore)}async function GS(e,t,n,r){const i=Ff(e);if(i.Fa)return void Pf("SyncEngine","Ignoring unexpected query state notification.");const o=i.pa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await Qb(i.localStore,Hg(o[0])),r=rv.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,_m.EMPTY_BYTE_STRING);await FS(i,e,r);break}case"rejected":await Wb(i.localStore,t,!0),OS(i,t,r);break;default:Lf()}}async function HS(e,t,n){const r=QS(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){Pf("SyncEngine","Adding an already active target "+e);continue}const t=await Hb(r.localStore,e),n=await Kb(r.localStore,t);await ES(r,KS(t),n.targetId,!1,n.resumeToken),C_(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Wb(r.localStore,e,!1).then((()=>{x_(r.remoteStore,e),OS(r,e)})).catch(vp)}}function QS(e){const t=Ff(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=TS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=CS.bind(null,t),t.fa.u_=cS.bind(null,t.eventManager),t.fa.xa=uS.bind(null,t.eventManager),t}function YS(e){const t=Ff(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=AS.bind(null,t),t}class $S{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=y_(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return jb(this.persistence,new Fb,e.initialUser,this.serializer)}createPersistence(e){return new Tb(Cb.Hr,this.serializer)}createSharedClientState(e){return new s_}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class JS extends $S{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await YS(this.Na.syncEngine),await V_(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return jb(this.persistence,new Fb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new tb(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Np(t,this.persistence);return new Ap(e.asyncQueue,n)}createPersistence(e){const t=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vw.withCacheSize(this.cacheSizeBytes):Vw.DEFAULT;return new Pb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,m_(),g_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new s_}}class XS extends JS{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof o_&&(this.sharedClientState.syncEngine={Zs:BS.bind(null,t),Xs:GS.bind(null,t),eo:HS.bind(null,t),Li:WS.bind(null,t),Ys:zS.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Ff(e);if(QS(n),YS(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await qS(n,e.toArray());n.Fa=!0,await $_(n.remoteStore,!0);for(const r of t)C_(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(OS(n,i),Wb(n.localStore,i,!0)))),x_(n.remoteStore,i)})),await t,await qS(n,e),function(e){const t=Ff(e);t.Sa.forEach(((e,n)=>{x_(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new fm(sp.comparator)}(n),n.Fa=!1,await $_(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=m_();if(!o_.D(t))throw new jf(Uf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new o_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ZS{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>kS(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=US.bind(null,this.syncEngine),await $_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oS}createDatastore(e){const t=y_(e.databaseInfo.databaseId),n=function(e){return new p_(e)}(e.databaseInfo);return function(e,t,n,r){return new S_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new I_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>kS(this.syncEngine,e,0)),c_.D()?new c_:new a_)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new _S(e,t,n,r,i,o);return s&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ff(e);Pf("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await k_(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function eE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class tE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Of("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class nE{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Vf,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new dS(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class rE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new jf(Uf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ff(e),r={documents:t.map((e=>Iv(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,rp.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Mf(!!t.found),t.found.name,t.found.updateTime;const n=Tv(e,t.found.name),r=bv(t.found.updateTime),i=t.found.createTime?bv(t.found.createTime):tp.min(),o=new Xm({mapValue:{fields:t.found.fields}});return eg.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Mf(!!t.missing),Mf(!!t.readTime);const n=Tv(e,t.missing),r=bv(t.readTime);return eg.newNoDocument(n,r)}(e,t):Lf()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());Mf(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=sp.fromPath(t);this.mutations.push(new zy(n,this.precondition(n)))})),await async function(e,t){const n=Ff(e),r={writes:t.map((e=>Ov(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,rp.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Lf();t=tp.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new jf(Uf.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(tp.min())?Cy.exists(!1):Cy.updateTime(t):Cy.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tp.min()))throw new jf(Uf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cy.updateTime(t)}return Cy.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iE{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new v_(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new rE(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!Op(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Qy(t)}return!1}}class oE{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Cf.UNAUTHENTICATED,this.clientId=$f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Pf("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Pf("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new jf(Uf.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(fk){const n=eS(fk,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function sE(e,t){e.asyncQueue.verifyOperationInProgress(),Pf("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Vb(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function aE(e,t){e.asyncQueue.verifyOperationInProgress();const n=await uE(e);Pf("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Y_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Y_(t.remoteStore,n))),e._onlineComponents=t}function cE(e){return"FirebaseError"===e.name?e.code===Uf.FAILED_PRECONDITION||e.code===Uf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function uE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Pf("FirestoreClient","Using user provided OfflineComponentProvider");try{await sE(e,e._uninitializedComponentsProvider._offline)}catch(fk){const n=fk;if(!cE(n))throw n;Rf("Error using user provided cache. Falling back to memory cache: "+n),await sE(e,new $S)}}else Pf("FirestoreClient","Using default OfflineComponentProvider"),await sE(e,new $S);return e._offlineComponents}async function lE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Pf("FirestoreClient","Using user provided OnlineComponentProvider"),await aE(e,e._uninitializedComponentsProvider._online)):(Pf("FirestoreClient","Using default OnlineComponentProvider"),await aE(e,new ZS))),e._onlineComponents}function hE(e){return uE(e).then((e=>e.persistence))}function dE(e){return uE(e).then((e=>e.localStore))}function fE(e){return lE(e).then((e=>e.remoteStore))}function pE(e){return lE(e).then((e=>e.syncEngine))}function mE(e){return lE(e).then((e=>e.datastore))}async function gE(e){const t=await lE(e),n=t.eventManager;return n.onListen=SS.bind(null,t.syncEngine),n.onUnlisten=IS.bind(null,t.syncEngine),n}function yE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vf;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new tE({next:o=>{t.enqueueAndForget((()=>aS(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new jf(Uf.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new jf(Uf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new hS(Lg(n.path),o,{includeMetadataChanges:!0,Z_:!0});return sS(e,s)}(await gE(e),e.asyncQueue,t,n,r))),r.promise}function vE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vf;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new tE({next:n=>{t.enqueueAndForget((()=>aS(e,s))),n.fromCache&&"server"===r.source?i.reject(new jf(Uf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new hS(n,o,{includeMetadataChanges:!0,Z_:!0});return sS(e,s)}(await gE(e),e.asyncQueue,t,n,r))),r.promise}function wE(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Jy().encode(e):e,function(e,t){return new nE(e,t)}(function(e,t){if(e instanceof Uint8Array)return eE(e,t);if(e instanceof ArrayBuffer)return eE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,y_(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Ff(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Ff(e),r=bv(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(mS(r));const i=new pS(r,e.localStore,t.serializer);let o=await t.Oa();for(;o;){const e=await i.na(o);e&&n._updateProgress(e),o=await t.Oa()}const s=await i.complete();return await FS(e,s.sa,void 0),await function(e,t){const n=Ff(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ia)}catch(e){return Rf("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await pE(e),i,r)}))}function bE(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _E=new Map;function SE(e,t,n){if(!n)throw new jf(Uf.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function EE(e,t,n,r){if(!0===t&&!0===r)throw new jf(Uf.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function IE(e){if(!sp.isDocumentKey(e))throw new jf(Uf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function TE(e){if(sp.isDocumentKey(e))throw new jf(Uf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function kE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Lf()}function CE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new jf(Uf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kE(e);throw new jf(Uf.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function xE(e,t){if(t<=0)throw new jf(Uf.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class AE{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new jf(Uf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new jf(Uf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bE(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new jf(Uf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new jf(Uf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new jf(Uf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class NE{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new jf(Uf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new jf(Uf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bf;switch(e.type){case"firstParty":return new Gf(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new jf(Uf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_E.get(e);t&&(Pf("ComponentProvider","Removing Datastore"),_E.delete(e),t.terminate())}(this),Promise.resolve()}}function PE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=CE(e,NE))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Rf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Cf.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[pn(JSON.stringify({alg:"none",type:"JWT"})),pn(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new jf(Uf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Cf(o)}e._authCredentials=new qf(new zf(t,n))}}class OE{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new OE(this.firestore,e,this._query)}}class RE{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new DE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new RE(this.firestore,e,this._key)}}class DE extends OE{constructor(e,t,n){super(e,t,Lg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new RE(this.firestore,null,new sp(e))}withConverter(e){return new DE(this.firestore,e,this._path)}}function LE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zn(e),SE("collection","path",t),e instanceof NE){const n=rp.fromString(t,...r);return TE(n),new DE(e,null,n)}{if(!(e instanceof RE||e instanceof DE))throw new jf(Uf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(rp.fromString(t,...r));return TE(n),new DE(e.firestore,null,n)}}function ME(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zn(e),1===arguments.length&&(t=$f.newId()),SE("doc","path",t),e instanceof NE){const n=rp.fromString(t,...r);return IE(n),new RE(e,null,new sp(n))}{if(!(e instanceof RE||e instanceof DE))throw new jf(Uf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(rp.fromString(t,...r));return IE(n),new RE(e.firestore,e instanceof DE?e.converter:null,new sp(n))}}function FE(e,t){return e=zn(e),t=zn(t),(e instanceof RE||e instanceof DE)&&(t instanceof RE||t instanceof DE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function UE(e,t){return e=zn(e),t=zn(t),e instanceof OE&&t instanceof OE&&e.firestore===t.firestore&&qg(e._query,t._query)&&e.converter===t.converter}class jE{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new v_(this,"async_queue_retry"),this._u=()=>{const e=g_();e&&Pf("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=g_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=g_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Vf;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Ip(e))throw e;Pf("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Of("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=Z_.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Lf()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function VE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class zE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class BE extends NE{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new jE,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||KE(this),this._firestoreClient.terminate()}}function qE(e){return e._firestoreClient||KE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function KE(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Am(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,bE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new oE(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function WE(e,t,n){const r=new Vf;return e.asyncQueue.enqueue((async()=>{try{await sE(e,n),await aE(e,t),r.resolve()}catch(e){const n=e;if(!cE(n))throw n;Rf("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function GE(e){return function(e){const t=new Vf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ff(e);R_(n.remoteStore)||Pf("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Ff(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=eS(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await pE(e),t))),t.promise}(qE(e=CE(e,BE)))}function HE(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await hE(e),n=await fE(e);return t.setNetworkEnabled(!0),function(e){const t=Ff(e);return t.v_.delete(0),T_(t)}(n)}))}(qE(e=CE(e,BE)))}function QE(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await hE(e),n=await fE(e);return t.setNetworkEnabled(!1),async function(e){const t=Ff(e);t.v_.add(0),await k_(t),t.x_.set("Offline")}(n)}))}(qE(e=CE(e,BE)))}function YE(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Ff(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await dE(e),t)))}(qE(e=CE(e,BE)),t).then((t=>t?new OE(e,null,t.query):null))}function $E(e){if(e._initialized||e._terminated)throw new jf(Uf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class JE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new JE(_m.fromBase64String(e))}catch(e){throw new jf(Uf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new JE(_m.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class XE{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new jf(Uf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new op(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ZE{constructor(e){this._methodName=e}}class eI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new jf(Uf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new jf(Uf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jf(this._lat,e._lat)||Jf(this._long,e._long)}}const tI=/^__.*__$/;class nI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new My(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ly(e,this.data,t,this.fieldTransforms)}}class rI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new My(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lf()}}class oI{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new oI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return TI(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(iI(this.du)&&tI.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class sI{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||y_(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new oI({du:e,methodName:t,wu:n,path:op.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aI(e){const t=e._freezeSettings(),n=y_(e._databaseId);return new sI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cI(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Su(o.merge||o.mergeFields?2:0,t,n,i);_I("Data must be an object, but it was:",s,r);const a=wI(r,s);let c,u;if(o.merge)c=new wm(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=SI(t,r,n);if(!s.contains(i))throw new jf(Uf.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));kI(e,i)||e.push(i)}c=new wm(e),u=s.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=s.fieldTransforms;return new nI(new Xm(a),c,u)}class uI extends ZE{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uI}}function lI(e,t,n){return new oI({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class hI extends ZE{_toFieldTransform(e){return new Ty(e.path,new yy)}isEqual(e){return e instanceof hI}}class dI extends ZE{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=lI(this,e,!0),n=this.bu.map((e=>vI(e,t))),r=new vy(n);return new Ty(e.path,r)}isEqual(e){return e instanceof dI&&Rn(this.bu,e.bu)}}class fI extends ZE{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=lI(this,e,!0),n=this.bu.map((e=>vI(e,t))),r=new by(n);return new Ty(e.path,r)}isEqual(e){return e instanceof fI&&Rn(this.bu,e.bu)}}class pI extends ZE{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Sy(e.serializer,dy(e.serializer,this.Du));return new Ty(e.path,t)}isEqual(e){return e instanceof pI&&this.Du===e.Du}}function mI(e,t,n,r){const i=e.Su(1,t,n);_I("Data must be an object, but it was:",i,r);const o=[],s=Xm.empty();hm(r,((e,r)=>{const a=II(t,e,n);r=zn(r);const c=i.fu(a);if(r instanceof uI)o.push(a);else{const e=vI(r,c);null!=e&&(o.push(a),s.set(a,e))}}));const a=new wm(o);return new rI(s,a,i.fieldTransforms)}function gI(e,t,n,r,i,o){const s=e.Su(1,t,n),a=[SI(t,r,n)],c=[i];if(o.length%2!=0)throw new jf(Uf.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(SI(t,o[d])),c.push(o[d+1]);const u=[],l=Xm.empty();for(let d=a.length-1;d>=0;--d)if(!kI(u,a[d])){const e=a[d];let t=c[d];t=zn(t);const n=s.fu(e);if(t instanceof uI)u.push(e);else{const r=vI(t,n);null!=r&&(u.push(e),l.set(e,r))}}const h=new wm(u);return new rI(l,h,s.fieldTransforms)}function yI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return vI(n,e.Su(r?4:3,t))}function vI(e,t){if(bI(e=zn(e)))return _I("Unsupported field value:",t,e),wI(e,t);if(e instanceof ZE)return function(e,t){if(!iI(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=vI(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=zn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dy(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ep.fromDate(e);return{timestampValue:yv(t.serializer,n)}}if(e instanceof ep){const n=new ep(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yv(t.serializer,n)}}if(e instanceof eI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof JE)return{bytesValue:vv(t.serializer,e._byteString)};if(e instanceof RE){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:_v(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(kE(e)))}(e,t)}function wI(e,t){const n={};return dm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hm(e,((e,r)=>{const i=vI(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function bI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ep||e instanceof eI||e instanceof JE||e instanceof RE||e instanceof ZE)}function _I(e,t,n){if(!bI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=kE(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function SI(e,t,n){if((t=zn(t))instanceof XE)return t._internalPath;if("string"==typeof t)return II(e,t);throw TI("Field path arguments must be of type string or ",e,!1,void 0,n)}const EI=new RegExp("[~\\*/\\[\\]]");function II(e,t,n){if(t.search(EI)>=0)throw TI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new XE(...t.split("."))._internalPath}catch(bu){throw TI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function TI(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=" in field ".concat(r)),s&&(c+=" in document ".concat(i)),c+=")"),new jf(Uf.INVALID_ARGUMENT,a+e+c)}function kI(e,t){return e.some((e=>e.isEqual(t)))}class CI{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new RE(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(AI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xI extends CI{data(){return super.data()}}function AI(e,t){return"string"==typeof t?II(e,t):t instanceof XE?t._internalPath:t._delegate._internalPath}function NI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new jf(Uf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PI{}class OI extends PI{}function RI(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof PI&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof LI)).length,n=e.filter((e=>e instanceof DI)).length;if(t>1||t>0&&n>0)throw new jf(Uf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class DI extends OI{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new DI(e,t,n)}_apply(e){const t=this._parse(e);return qI(e._query,t),new OE(e.firestore,e.converter,zg(e._query,t))}_parse(e){const t=aI(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new jf(Uf.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){BI(s,o);const t=[];for(const n of s)t.push(zI(r,e,n));a={arrayValue:{values:t}}}else a=zI(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||BI(s,o),a=yI(n,t,s,"in"===o||"not-in"===o);return ag.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class LI extends PI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new LI(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:cg.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)qI(n,i),n=zg(n,i)}(e._query,t),new OE(e.firestore,e.converter,zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class MI extends OI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new MI(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ig(t,n)}(e._query,this._field,this._direction);return new OE(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Rg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class FI extends OI{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new FI(e,t,n)}_apply(e){return new OE(e.firestore,e.converter,Bg(e._query,this._limit,this._limitType))}}class UI extends OI{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new UI(e,t,n)}_apply(e){const t=VI(e,this.type,this._docOrFields,this._inclusive);return new OE(e.firestore,e.converter,function(e,t){return new Rg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class jI extends OI{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new jI(e,t,n)}_apply(e){const t=VI(e,this.type,this._docOrFields,this._inclusive);return new OE(e.firestore,e.converter,function(e,t){return new Rg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function VI(e,t,n,r){if(n[0]=zn(n[0]),n[0]instanceof CI)return function(e,t,n,r,i){if(!r)throw new jf(Uf.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of Ug(e))if(s.field.isKeyField())o.push(Vm(t,r.key));else{const e=r.data.field(s.field);if(km(e))throw new jf(Uf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new tg(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=aI(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new jf(Uf.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const o=i[c];if(s[c].field.isKeyField()){if("string"!=typeof o)throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!Fg(e)&&-1!==o.indexOf("/"))throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(rp.fromString(o));if(!sp.isDocumentKey(n))throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new sp(n);a.push(Vm(t,i))}else{const e=yI(n,r,o);a.push(e)}}return new tg(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function zI(e,t,n){if("string"==typeof(n=zn(n))){if(""===n)throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fg(t)&&-1!==n.indexOf("/"))throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(rp.fromString(n));if(!sp.isDocumentKey(r))throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vm(e,new sp(r))}if(n instanceof RE)return Vm(e,n._key);throw new jf(Uf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(kE(n),"."))}function BI(e,t){if(!Array.isArray(e)||0===e.length)throw new jf(Uf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function qI(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new jf(Uf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new jf(Uf.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class KI{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Rm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Im(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Lf()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return hm(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new eI(Im(e.latitude),Im(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Cm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xm(e));default:return null}}convertTimestamp(e){const t=Em(e);return new ep(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=rp.fromString(e);Mf(Wv(n));const r=new Nm(n.get(1),n.get(3)),i=new sp(n.popFirst(5));return r.isEqual(t)||Of("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function WI(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class GI extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new JE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new RE(this.firestore,null,t)}}class HI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class QI extends CI{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new YI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(AI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class YI extends QI{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class $I{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new HI(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new YI(this._firestore,this._userDataWriter,n.key,n,new HI(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new jf(Uf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new YI(e._firestore,e._userDataWriter,n.doc.key,n.doc,new HI(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new YI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new HI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:JI(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function JI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lf()}}function XI(e,t){return e instanceof QI&&t instanceof QI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof $I&&t instanceof $I&&e._firestore===t._firestore&&UE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class ZI extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new JE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new RE(this.firestore,null,t)}}function eT(e){e=CE(e,RE);const t=CE(e.firestore,BE),n=qE(t),r=new ZI(t);return function(e,t){const n=new Vf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Ff(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new jf(Uf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=eS(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await dE(e),t,n))),n.promise}(n,e._key).then((n=>new QI(t,r,e._key,n,new HI(null!==n&&n.hasLocalMutations,!0),e.converter)))}function tT(e){e=CE(e,OE);const t=CE(e.firestore,BE),n=qE(t),r=new ZI(t);return function(e,t){const n=new Vf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Gb(e,t,!0),i=new vS(t,r.hs),o=i.ha(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=eS(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await dE(e),t,n))),n.promise}(n,e._query).then((n=>new $I(t,r,e,n)))}function nT(e,t,n){e=CE(e,RE);const r=CE(e.firestore,BE),i=WI(e.converter,t,n);return sT(r,[cI(aI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Cy.none())])}function rT(e,t,n){e=CE(e,RE);const r=CE(e.firestore,BE),i=aI(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];return o="string"==typeof(t=zn(t))||t instanceof XE?gI(i,"updateDoc",e._key,t,n,a):mI(i,"updateDoc",e._key,t),sT(r,[o.toMutation(e._key,Cy.exists(!0))])}function iT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=zn(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||VE(n[c])||(a=n[c],c++);const u={includeMetadataChanges:a.includeMetadataChanges};if(VE(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[c+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let l,h,d;if(e instanceof RE)h=CE(e.firestore,BE),d=Lg(e._key.path),l={next:t=>{n[c]&&n[c](aT(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=CE(e,OE);h=CE(t.firestore,BE),d=t._query;const r=new ZI(h);l={next:e=>{n[c]&&n[c](new $I(h,r,t,e))},error:n[c+1],complete:n[c+2]},NI(e._query)}return function(e,t,n,r){const i=new tE(r),o=new hS(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>sS(await gE(e),o))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>aS(await gE(e),o)))}}(qE(h),d,u,l)}function oT(e,t){return function(e,t){const n=new tE(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ff(e).K_.add(t),t.next()}(await gE(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ff(e).K_.delete(t)}(await gE(e),n)))}}(qE(e=CE(e,BE)),VE(t)?t:{next:t})}function sT(e,t){return function(e,t){const n=new Vf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=YS(e);try{const e=await function(e,t){const n=Ff(e),r=ep.now(),i=t.reduce(((e,t)=>e.add(t.key)),ay());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Xg(),c=ay();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Ry(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new My(e.key,t,Zm(t.value.mapValue),Cy.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:ty(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new fm(Jf)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await FS(r,e.changes),await V_(r.remoteStore)}catch(e){const t=eS(e,"Failed to persist write");n.reject(t)}}(await pE(e),t,n))),n.promise}(qE(e),t)}function aT(e,t,n){const r=n.docs.get(t._key),i=new ZI(e);return new QI(e,i,t._key,r,new HI(n.hasPendingWrites,n.fromCache),t.converter)}const cT={maxAttempts:5};class uT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=aI(e)}set(e,t,n){this._verifyNotCommitted();const r=lT(e,this._firestore),i=WI(r.converter,t,n),o=cI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Cy.none())),this}update(e,t,n){this._verifyNotCommitted();const r=lT(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=zn(t))||t instanceof XE?gI(this._dataReader,"WriteBatch.update",r._key,t,n,s):mI(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Cy.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lT(e,this._firestore);return this._mutations=this._mutations.concat(new Vy(t._key,Cy.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new jf(Uf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lT(e,t){if((e=zn(e)).firestore!==t)throw new jf(Uf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class hT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=aI(e)}get(e){const t=lT(e,this._firestore),n=new GI(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Lf();const r=e[0];if(r.isFoundDocument())return new CI(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new CI(this._firestore,n,t._key,null,t.converter);throw Lf()}))}set(e,t,n){const r=lT(e,this._firestore),i=WI(r.converter,t,n),o=cI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=lT(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=zn(t))||t instanceof XE?gI(this._dataReader,"Transaction.update",r._key,t,n,s):mI(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=lT(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lT(e,this._firestore),n=new ZI(this._firestore);return super.get(e).then((e=>new QI(this._firestore,n,t._key,e._document,new HI(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xf=e}(Or),kr(new Bn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new BE(new Kf(e.getProvider("auth-internal")),new Qf(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new jf(Uf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nm(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Fr(kf,"4.4.3",e),Fr(kf,"4.4.3","esm2017")}();function dT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new jf("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function fT(){if("undefined"===typeof Uint8Array)throw new jf("unimplemented","Uint8Arrays are not available in this environment.")}function pT(){if("undefined"==typeof atob)throw new jf("unimplemented","Blobs are unavailable in Firestore in this environment.")}class mT{constructor(e){this._delegate=e}static fromBase64String(e){return pT(),new mT(JE.fromBase64String(e))}static fromUint8Array(e){return fT(),new mT(JE.fromUint8Array(e))}toBase64(){return pT(),this._delegate.toBase64()}toUint8Array(){return fT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class yT{enableIndexedDbPersistence(e,t){return function(e,t){$E(e=CE(e,BE));const n=qE(e);if(n._uninitializedComponentsProvider)throw new jf(Uf.FAILED_PRECONDITION,"SDK cache is already specified.");Rf("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new ZS;return WE(n,i,new JS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){$E(e=CE(e,BE));const t=qE(e);if(t._uninitializedComponentsProvider)throw new jf(Uf.FAILED_PRECONDITION,"SDK cache is already specified.");Rf("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new ZS;return WE(t,r,new XS(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new jf(Uf.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Vf;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!_p.D())return Promise.resolve();const t=e+"main";await _p.delete(t)}(Db(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class vT{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nm||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Rf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};PE(this._delegate,e,t,n)}enableNetwork(){return HE(this._delegate)}disableNetwork(){return QE(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,EE("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return GE(this._delegate)}onSnapshotsInSync(e){return oT(this._delegate,e)}get app(){if(!this._appCompat)throw new jf("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new OT(this,LE(this._delegate,e))}catch(t){throw IT(t,"collection()","Firestore.collection()")}}doc(e){try{return new ET(this,ME(this._delegate,e))}catch(t){throw IT(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new AT(this,function(e,t){if(e=CE(e,NE),SE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new jf(Uf.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new OE(e,null,function(e){return new Rg(rp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw IT(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=CE(e,BE);const r=Object.assign(Object.assign({},cT),n);return function(e){if(e.maxAttempts<1)throw new jf(Uf.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Vf;return e.asyncQueue.enqueueAndForget((async()=>{const i=await mE(e);new iE(e.asyncQueue,i,n,t,r).ja()})),r.promise}(qE(e),(n=>t(new hT(e,n))),r)}(this._delegate,(t=>e(new bT(this,t))))}batch(){return qE(this._delegate),new _T(new uT(this._delegate,(e=>sT(this._delegate,e))))}loadBundle(e){return function(e,t){const n=qE(e=CE(e,BE)),r=new zE;return wE(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return YE(this._delegate,e).then((e=>e?new AT(this,e):null))}}class wT extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new mT(new JE(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ET.forKey(t,this.firestore,null)}}class bT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wT(e)}get(e){const t=RT(e);return this._delegate.get(t).then((e=>new CT(this._firestore,new QI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=RT(e);return n?(dT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=RT(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=RT(e);return this._delegate.delete(t),this}}class _T{constructor(e){this._delegate=e}set(e,t,n){const r=RT(e);return n?(dT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=RT(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=RT(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ST{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new YI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xT(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=ST.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new ST(e,new wT(e),t),r.set(t,i)),i}}ST.INSTANCES=new WeakMap;class ET{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wT(e)}static forPath(e,t,n){if(e.length%2!==0)throw new jf("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new ET(t,new RE(t._delegate,n,new sp(e)))}static forKey(e,t,n){return new ET(t,new RE(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new OT(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new OT(this.firestore,LE(this._delegate,e))}catch(t){throw IT(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=zn(e))instanceof RE&&FE(this._delegate,e)}set(e,t){t=dT("DocumentReference.set",t);try{return t?nT(this._delegate,e,t):nT(this._delegate,e)}catch(n){throw IT(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?rT(this._delegate,e):rT(this._delegate,e,t,...r)}catch(o){throw IT(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return sT(CE(e.firestore,BE),[new Vy(e._key,Cy.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=TT(t),i=kT(t,(e=>new CT(this.firestore,new QI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return iT(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?eT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=CE(e,RE);const t=CE(e.firestore,BE);return yE(qE(t),e._key,{source:"server"}).then((n=>aT(t,e,n)))}(this._delegate):function(e){e=CE(e,RE);const t=CE(e.firestore,BE);return yE(qE(t),e._key).then((n=>aT(t,e,n)))}(this._delegate),t.then((e=>new CT(this.firestore,new QI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new ET(this.firestore,e?this._delegate.withConverter(ST.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function IT(e,t,n){return e.message=e.message.replace(t,n),e}function TT(e){for(const t of e)if("object"===typeof t&&!gT(t))return t;return{}}function kT(e,t){var n,r;let i;return i=gT(e[0])?e[0]:gT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class CT{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ET(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return XI(this._delegate,e._delegate)}}class xT extends CT{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Lf()}(void 0!==t),t}}class AT{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wT(e)}where(e,t,n){try{return new AT(this.firestore,RI(this._delegate,function(e,t,n){const r=t,i=AI("where",e);return DI._create(i,r,n)}(e,t,n)))}catch(r){throw IT(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new AT(this.firestore,RI(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=AI("orderBy",e);return MI._create(n,t)}(e,t)))}catch(n){throw IT(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new AT(this.firestore,RI(this._delegate,function(e){return xE("limit",e),FI._create("limit",e,"F")}(e)))}catch(t){throw IT(t,"limit()","Query.limit()")}}limitToLast(e){try{return new AT(this.firestore,RI(this._delegate,function(e){return xE("limitToLast",e),FI._create("limitToLast",e,"L")}(e)))}catch(t){throw IT(t,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new AT(this.firestore,RI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return UI._create("startAt",t,!0)}(...arguments)))}catch(e){throw IT(e,"startAt()","Query.startAt()")}}startAfter(){try{return new AT(this.firestore,RI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return UI._create("startAfter",t,!1)}(...arguments)))}catch(e){throw IT(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new AT(this.firestore,RI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jI._create("endBefore",t,!1)}(...arguments)))}catch(e){throw IT(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new AT(this.firestore,RI(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jI._create("endAt",t,!0)}(...arguments)))}catch(e){throw IT(e,"endAt()","Query.endAt()")}}isEqual(e){return UE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?tT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=CE(e,OE);const t=CE(e.firestore,BE),n=qE(t),r=new ZI(t);return vE(n,e._query,{source:"server"}).then((n=>new $I(t,r,e,n)))}(this._delegate):function(e){e=CE(e,OE);const t=CE(e.firestore,BE),n=qE(t),r=new ZI(t);return NI(e._query),vE(n,e._query).then((n=>new $I(t,r,e,n)))}(this._delegate),t.then((e=>new PT(this.firestore,new $I(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=TT(t),i=kT(t,(e=>new PT(this.firestore,new $I(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return iT(this._delegate,r,i)}withConverter(e){return new AT(this.firestore,e?this._delegate.withConverter(ST.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class NT{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xT(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new AT(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new xT(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new NT(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new xT(this._firestore,n))}))}isEqual(e){return XI(this._delegate,e._delegate)}}class OT extends AT{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ET(this.firestore,e):null}doc(e){try{return new ET(this.firestore,void 0===e?ME(this._delegate):ME(this._delegate,e))}catch(t){throw IT(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=CE(e.firestore,BE),r=ME(e),i=WI(e.converter,t);return sT(n,[cI(aI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Cy.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new ET(this.firestore,e)))}isEqual(e){return FE(this._delegate,e._delegate)}withConverter(e){return new OT(this.firestore,e?this._delegate.withConverter(ST.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function RT(e){return CE(e,RE)}class DT{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new XE(...t)}static documentId(){return new DT(op.keyField().canonicalString())}isEqual(e){return(e=zn(e))instanceof XE&&this._delegate._internalPath.isEqual(e._internalPath)}}class LT{constructor(e){this._delegate=e}static serverTimestamp(){const e=new hI("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new LT(e)}static delete(){const e=new uI("deleteField");return e._methodName="FieldValue.delete",new LT(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dI("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new LT(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fI("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new LT(e)}static increment(e){const t=function(e){return new pI("increment",e)}(e);return t._methodName="FieldValue.increment",new LT(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MT={Firestore:vT,GeoPoint:eI,Timestamp:ep,Blob:mT,Transaction:bT,WriteBatch:_T,DocumentReference:ET,DocumentSnapshot:CT,Query:AT,QueryDocumentSnapshot:xT,QuerySnapshot:PT,CollectionReference:OT,FieldPath:DT,FieldValue:LT,setLogLevel:function(e){!function(e){Af.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Bn("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},MT)))}(e,((e,t)=>new vT(e,t,new yT))),e.registerVersion("@firebase/firestore-compat","0.3.26")}(ni);ni.initializeApp({apiKey:"AIzaSyCN9nWpRheEymXILmsIGhWhfrDLIc7tQQY",authDomain:"clone-netflix-vasanth.firebaseapp.com",projectId:"clone-netflix-vasanth",storageBucket:"clone-netflix-vasanth.appspot.com",messagingSenderId:"959297970291",appId:"1:959297970291:web:8b941a53db215484fb8a06"}).firestore();const FT=ni.auth();const UT=function(){const e=(0,r.useRef)(null),t=(0,r.useRef)(null);return(0,ie.jsx)("div",{className:"signUpScreen",children:(0,ie.jsxs)("form",{children:[(0,ie.jsx)("h1",{children:"Sign In"}),(0,ie.jsx)("input",{ref:e,placeholder:"Email",type:"email"}),(0,ie.jsx)("input",{ref:t,placeholder:"password",type:"password"}),(0,ie.jsx)("button",{type:"submit",onClick:n=>{n.preventDefault(),FT.signInWithEmailAndPassword(e.current.value,t.current.value).then((e=>{console.log(e)})).catch((e=>{alert(e.message)}))},children:"Sign In"}),(0,ie.jsxs)("h4",{children:[(0,ie.jsx)("span",{className:"signUpScreen__gray",children:"New to Netflix?"}),(0,ie.jsx)("span",{className:"signUpScreen__link",onClick:n=>{n.preventDefault(),FT.createUserWithEmailAndPassword(e.current.value,t.current.value).then((e=>{console.log(e)})).catch((e=>{alert(e.message)}))},children:"Sign Up now."})]})]})})};const jT=function(){const[e,t]=(0,r.useState)(!1);return(0,ie.jsxs)("div",{className:"Loginscreen",children:[(0,ie.jsxs)("div",{className:"loginScreen__background",children:[(0,ie.jsx)("img",{className:"loginScreen__logo",src:"https://images.ctfassets.net/y2ske730sjqp/1aONibCke6niZhgPxuiilC/2c401b05a07288746ddf3bd3943fbc76/BrandAssets_Logos_01-Wordmark.jpg?w=940",alt:"imagee"}),(0,ie.jsx)("button",{onClick:()=>t(!0),className:"loginScreen__button",children:"Sign In"}),(0,ie.jsx)("div",{className:"loginScreen__gradient"})]}),(0,ie.jsx)("div",{className:"loginScreen__body",children:e?(0,ie.jsx)(UT,{}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)("h1",{children:"Unlimited films,TV programmes and more."}),(0,ie.jsx)("h2",{children:"Watch anywhere. Cancel at any time."}),(0,ie.jsx)("h3",{children:"Ready to watch? Enter your email to create or restart your membership."}),(0,ie.jsx)("div",{className:"loginScreen__input",children:(0,ie.jsxs)("form",{children:[(0,ie.jsx)("input",{type:"email",placeholder:"email address"}),(0,ie.jsx)("button",{onClick:()=>t(!0),className:"loginScreen__getStarted",children:"GET STARTED"})]})})]})})]})};var VT=n(461),zT=n(443),BT=n(950);let qT=function(e){e()};const KT=()=>qT,WT=Symbol.for("react-redux-context"),GT="undefined"!==typeof globalThis?globalThis:{};function HT(){var e;if(!r.createContext)return{};const t=null!=(e=GT[WT])?e:GT[WT]=new Map;let n=t.get(r.createContext);return n||(n=r.createContext(null),t.set(r.createContext,n)),n}const QT=HT();function YT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QT;return function(){return(0,r.useContext)(e)}}const $T=YT();let JT=()=>{throw new Error("uSES not initialized!")};const XT=(e,t)=>e===t;function ZT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QT;const t=e===QT?$T:YT(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:i=XT,stabilityCheck:o,noopCheck:s}="function"===typeof n?{equalityFn:n}:n;const{store:a,subscription:c,getServerState:u,stabilityCheck:l,noopCheck:h}=t(),d=((0,r.useRef)(!0),(0,r.useCallback)({[e.name]:t=>e(t)}[e.name],[e,l,o])),f=JT(c.addNestedSub,a.getState,u||a.getState,d,i);return(0,r.useDebugValue)(f),f}}const ek=ZT();n(706);const tk={notify(){},get:()=>[]};function nk(e,t){let n,r=tk,i=0,o=!1;function s(){u.onStateChange&&u.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(s):e.subscribe(s),r=function(){const e=KT();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}function c(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=tk)}const u={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),c())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,a())},tryUnsubscribe:function(){o&&(o=!1,c())},getListeners:()=>r};return u}const rk=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?r.useLayoutEffect:r.useEffect;let ik=null;const ok=function(e){let{store:t,context:n,children:i,serverState:o,stabilityCheck:s="once",noopCheck:a="once"}=e;const c=r.useMemo((()=>{const e=nk(t);return{store:t,subscription:e,getServerState:o?()=>o:void 0,stabilityCheck:s,noopCheck:a}}),[t,o,s,a]),u=r.useMemo((()=>t.getState()),[t]);rk((()=>{const{subscription:e}=c;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[c,u]);const l=n||QT;return r.createElement(l.Provider,{value:c},i)};function sk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QT;const t=e===QT?$T:YT(e);return function(){const{store:e}=t();return e}}const ak=sk();function ck(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QT;const t=e===QT?ak:sk(e);return function(){return t().dispatch}}const uk=ck();var lk;function hk(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function dk(e){return!!e&&!!e[tC]}function fk(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===nC}(e)||Array.isArray(e)||!!e[eC]||!!(null===(t=e.constructor)||void 0===t?void 0:t[eC])||bk(e)||_k(e))}function pk(e,t,n){void 0===n&&(n=!1),0===mk(e)?(n?Object.keys:rC)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function mk(e){var t=e[tC];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:bk(e)?2:_k(e)?3:0}function gk(e,t){return 2===mk(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yk(e,t){return 2===mk(e)?e.get(t):e[t]}function vk(e,t,n){var r=mk(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function wk(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function bk(e){return $k&&e instanceof Map}function _k(e){return Jk&&e instanceof Set}function Sk(e){return e.o||e.t}function Ek(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=iC(e);delete t[tC];for(var n=rC(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Ik(e,t){return void 0===t&&(t=!1),kk(e)||dk(e)||!fk(e)||(mk(e)>1&&(e.set=e.add=e.clear=e.delete=Tk),Object.freeze(e),t&&pk(e,(function(e,t){return Ik(t,!0)}),!0)),e}function Tk(){hk(2)}function kk(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ck(e){var t=oC[e];return t||hk(18,e),t}function xk(e,t){oC[e]||(oC[e]=t)}function Ak(){return Qk}function Nk(e,t){t&&(Ck("Patches"),e.u=[],e.s=[],e.v=t)}function Pk(e){Ok(e),e.p.forEach(Dk),e.p=null}function Ok(e){e===Qk&&(Qk=e.l)}function Rk(e){return Qk={p:[],l:Qk,h:e,m:!0,_:0}}function Dk(e){var t=e[tC];0===t.i||1===t.i?t.j():t.g=!0}function Lk(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||Ck("ES5").S(t,e,r),r?(n[tC].P&&(Pk(t),hk(4)),fk(e)&&(e=Mk(t,e),t.l||Uk(t,e)),t.u&&Ck("Patches").M(n[tC].t,e,t.u,t.s)):e=Mk(t,n,[]),Pk(t),t.u&&t.v(t.u,t.s),e!==Zk?e:void 0}function Mk(e,t,n){if(kk(t))return t;var r=t[tC];if(!r)return pk(t,(function(i,o){return Fk(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Uk(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Ek(r.k):r.o,o=i,s=!1;3===r.i&&(o=new Set(i),i.clear(),s=!0),pk(o,(function(t,o){return Fk(e,r,i,t,o,n,s)})),Uk(e,i,!1),n&&e.u&&Ck("Patches").N(r,n,e.u,e.s)}return r.o}function Fk(e,t,n,r,i,o,s){if(dk(i)){var a=Mk(e,i,o&&t&&3!==t.i&&!gk(t.R,r)?o.concat(r):void 0);if(vk(n,r,a),!dk(a))return;e.m=!1}else s&&n.add(i);if(fk(i)&&!kk(i)){if(!e.h.D&&e._<1)return;Mk(e,i),t&&t.A.l||Uk(e,i)}}function Uk(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&Ik(t,n)}function jk(e,t){var n=e[tC];return(n?Sk(n):e)[t]}function Vk(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function zk(e){e.P||(e.P=!0,e.l&&zk(e.l))}function Bk(e){e.o||(e.o=Ek(e.t))}function qk(e,t,n){var r=bk(t)?Ck("MapSet").F(t,n):_k(t)?Ck("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Ak(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=sC;n&&(i=[r],o=aC);var s=Proxy.revocable(i,o),a=s.revoke,c=s.proxy;return r.k=c,r.j=a,c}(t,n):Ck("ES5").J(t,n);return(n?n.A:Ak()).p.push(r),r}function Kk(e){return dk(e)||hk(22,e),function e(t){if(!fk(t))return t;var n,r=t[tC],i=mk(t);if(r){if(!r.P&&(r.i<4||!Ck("ES5").K(r)))return r.t;r.I=!0,n=Wk(t,i),r.I=!1}else n=Wk(t,i);return pk(n,(function(t,i){r&&yk(r.t,t)===i||vk(n,t,e(i))})),3===i?new Set(n):n}(e)}function Wk(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ek(e)}function Gk(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[tC];return sC.get(t,e)},set:function(t){var n=this[tC];sC.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][tC];if(!i.P)switch(i.i){case 5:r(i)&&zk(i);break;case 4:n(i)&&zk(i)}}}function n(e){for(var t=e.t,n=e.k,r=rC(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==tC){var s=t[o];if(void 0===s&&!gk(t,o))return!0;var a=n[o],c=a&&a[tC];if(c?c.t!==s:!wk(a,s))return!0}}var u=!!t[tC];return r.length!==rC(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};xk("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=iC(n);delete o[tC];for(var s=rC(o),a=0;a<s.length;a++){var c=s[a];o[c]=e(c,t||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:Ak(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,tC,{value:o,writable:!0}),i},S:function(e,n,i){i?dk(n)&&n[tC].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[tC];if(n){var i=n.t,o=n.k,s=n.R,a=n.i;if(4===a)pk(o,(function(t){t!==tC&&(void 0!==i[t]||gk(i,t)?s[t]||e(o[t]):(s[t]=!0,zk(n)))})),pk(i,(function(e){void 0!==o[e]||gk(o,e)||(s[e]=!1,zk(n))}));else if(5===a){if(r(n)&&(zk(n),s.length=!0),o.length<i.length)for(var c=o.length;c<i.length;c++)s[c]=!1;else for(var u=i.length;u<o.length;u++)s[u]=!0;for(var l=Math.min(o.length,i.length),h=0;h<l;h++)o.hasOwnProperty(h)||(s[h]=!0),void 0===s[h]&&e(o[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}(e=>{JT=e})(zT.useSyncExternalStoreWithSelector),(e=>{ik=e})(VT.useSyncExternalStore),lk=BT.unstable_batchedUpdates,qT=lk;var Hk,Qk,Yk="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),$k="undefined"!=typeof Map,Jk="undefined"!=typeof Set,Xk="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Zk=Yk?Symbol.for("immer-nothing"):((Hk={})["immer-nothing"]=!0,Hk),eC=Yk?Symbol.for("immer-draftable"):"__$immer_draftable",tC=Yk?Symbol.for("immer-state"):"__$immer_state",nC=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),rC="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,iC=Object.getOwnPropertyDescriptors||function(e){var t={};return rC(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},oC={},sC={get:function(e,t){if(t===tC)return e;var n=Sk(e);if(!gk(n,t))return function(e,t,n){var r,i=Vk(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!fk(r)?r:r===jk(e.t,t)?(Bk(e),e.o[t]=qk(e.A.h,r,e)):r},has:function(e,t){return t in Sk(e)},ownKeys:function(e){return Reflect.ownKeys(Sk(e))},set:function(e,t,n){var r=Vk(Sk(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=jk(Sk(e),t),o=null==i?void 0:i[tC];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(wk(n,i)&&(void 0!==n||gk(e.t,t)))return!0;Bk(e),zk(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==jk(e.t,t)||t in e.t?(e.R[t]=!1,Bk(e),zk(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Sk(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){hk(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){hk(12)}},aC={};pk(sC,(function(e,t){aC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),aC.deleteProperty=function(e,t){return aC.set.call(this,e,t,void 0)},aC.set=function(e,t,n){return sC.set.call(this,e[0],t,n,e[0])};var cC=function(){function e(e){var t=this;this.O=Xk,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,s=Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(s))}))}}var s;if("function"!=typeof n&&hk(6),void 0!==r&&"function"!=typeof r&&hk(7),fk(e)){var a=Rk(t),c=qk(t,e,void 0),u=!0;try{s=n(c),u=!1}finally{u?Pk(a):Ok(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return Nk(a,r),Lk(e,a)}),(function(e){throw Pk(a),e})):(Nk(a,r),Lk(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=n(e))&&(s=e),s===Zk&&(s=void 0),t.D&&Ik(s,!0),r){var l=[],h=[];Ck("Patches").M(e,s,l,h),r(l,h)}return s}hk(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){fk(e)||hk(8),dk(e)&&(e=Kk(e));var t=Rk(this),n=qk(this,e,void 0);return n[tC].C=!0,Ok(t),n},t.finishDraft=function(e,t){var n=(e&&e[tC]).A;return Nk(n,t),Lk(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Xk&&hk(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Ck("Patches").$;return dk(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),uC=new cC,lC=uC.produce;uC.produceWithPatches.bind(uC),uC.setAutoFreeze.bind(uC),uC.setUseProxies.bind(uC),uC.applyPatches.bind(uC),uC.createDraft.bind(uC),uC.finishDraft.bind(uC);const hC=lC;function dC(e){return dC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dC(e)}function fC(e){var t=function(e,t){if("object"!=dC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dC(t)?t:String(t)}function pC(e,t,n){return(t=fC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mC(Object(n),!0).forEach((function(t){pC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yC(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var vC="function"===typeof Symbol&&Symbol.observable||"@@observable",wC=function(){return Math.random().toString(36).substring(7).split("").join(".")},bC={INIT:"@@redux/INIT"+wC(),REPLACE:"@@redux/REPLACE"+wC(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+wC()}};function _C(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function SC(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(yC(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(yC(1));return n(SC)(e,t)}if("function"!==typeof e)throw new Error(yC(2));var i=e,o=t,s=[],a=s,c=!1;function u(){a===s&&(a=s.slice())}function l(){if(c)throw new Error(yC(3));return o}function h(e){if("function"!==typeof e)throw new Error(yC(4));if(c)throw new Error(yC(5));var t=!0;return u(),a.push(e),function(){if(t){if(c)throw new Error(yC(6));t=!1,u();var n=a.indexOf(e);a.splice(n,1),s=null}}}function d(e){if(!_C(e))throw new Error(yC(7));if("undefined"===typeof e.type)throw new Error(yC(8));if(c)throw new Error(yC(9));try{c=!0,o=i(o,e)}finally{c=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:bC.INIT}),(r={dispatch:d,subscribe:h,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(yC(10));i=e,d({type:bC.REPLACE})}})[vC]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(yC(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[vC]=function(){return this},e},r}function EC(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:bC.INIT}))throw new Error(yC(12));if("undefined"===typeof n(void 0,{type:bC.PROBE_UNKNOWN_ACTION()}))throw new Error(yC(13))}))}(n)}catch(a){o=a}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var c=s[a],u=n[c],l=e[c],h=u(l,t);if("undefined"===typeof h){t&&t.type;throw new Error(yC(14))}i[c]=h,r=r||h!==l}return(r=r||s.length!==Object.keys(e).length)?i:e}}function IC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function TC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(yC(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=IC.apply(void 0,o)(n.dispatch),gC(gC({},n),{},{dispatch:r})}}}function kC(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var CC=kC();CC.withExtraArgument=kC;const xC=CC;var AC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),NC=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},PC=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},OC=Object.defineProperty,RC=Object.defineProperties,DC=Object.getOwnPropertyDescriptors,LC=Object.getOwnPropertySymbols,MC=Object.prototype.hasOwnProperty,FC=Object.prototype.propertyIsEnumerable,UC=function(e,t,n){return t in e?OC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jC=function(e,t){for(var n in t||(t={}))MC.call(t,n)&&UC(e,n,t[n]);if(LC)for(var r=0,i=LC(t);r<i.length;r++){n=i[r];FC.call(t,n)&&UC(e,n,t[n])}return e},VC=function(e,t){return RC(e,DC(t))},zC=function(e,t,n){return new Promise((function(r,i){var o=function(e){try{a(n.next(e))}catch(t){i(t)}},s=function(e){try{a(n.throw(e))}catch(t){i(t)}},a=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(o,s)};a((n=n.apply(e,t)).next())}))},BC="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?IC:IC.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function qC(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function KC(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return jC(jC({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var WC=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return AC(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,PC([void 0],e[0].concat(this)))):new(t.bind.apply(t,PC([void 0],e.concat(this))))},t}(Array),GC=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return AC(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,PC([void 0],e[0].concat(this)))):new(t.bind.apply(t,PC([void 0],e.concat(this))))},t}(Array);function HC(e){return fk(e)?hC(e,(function(){})):e}function QC(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new WC);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(xC.withExtraArgument(n.extraArgument)):r.push(xC));0;return r}(e)}}function YC(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var $C=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},JC=["name","message","stack","code"],XC=function(e,t){this.payload=e,this.meta=t},ZC=function(e,t){this.payload=e,this.meta=t},ex=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=JC;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=KC(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:VC(jC({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=KC(e+"/pending",(function(e,t,n){return{payload:void 0,meta:VC(jC({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),o=KC(e+"/rejected",(function(e,t,r,i,o){return{payload:i,error:(n&&n.serializeError||ex)(e||"Rejected"),meta:VC(jC({},o||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),s="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(a,c,u){var l,h=(null==n?void 0:n.idGenerator)?n.idGenerator(e):$C(),d=new s;function f(e){l=e,d.abort()}var p=function(){return zC(this,null,(function(){var s,p,m,g,y,v;return NC(this,(function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),g=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,e,{getState:c,extra:u}),null===(b=g)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,g];case 1:g=w.sent(),w.label=2;case 2:if(!1===g||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,t){return d.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),a(i(h,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:h,arg:e},{getState:c,extra:u}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:a,getState:c,extra:u,requestId:h,signal:d.signal,abort:f,rejectWithValue:function(e,t){return new XC(e,t)},fulfillWithValue:function(e,t){return new ZC(e,t)}})).then((function(t){if(t instanceof XC)throw t;return t instanceof ZC?r(t.payload,h,e,t.meta):r(t,h,e)}))])];case 3:return m=w.sent(),[3,5];case 4:return v=w.sent(),m=v instanceof XC?o(null,h,e,v.payload,v.meta):o(v,h,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(m)&&m.meta.condition||a(m),[2,m]}var b}))}))}();return Object.assign(p,{abort:f,requestId:h,arg:e,unwrap:function(){return p.then(tx)}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function tx(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var nx="listenerMiddleware";KC(nx+"/add"),KC(nx+"/removeAll"),KC(nx+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var rx,ix=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:ix(10);Gk();const ox=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:HC(e.initialState),i=e.reducers||{},o=Object.keys(i),s={},a={},c={};function u(){var t="function"===typeof e.extraReducers?YC(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],s=void 0===o?[]:o,c=t[2],u=void 0===c?void 0:c,l=jC(jC({},i),a);return function(e,t,n,r){void 0===n&&(n=[]);var i,o="function"===typeof t?YC(t):[t,n,r],s=o[0],a=o[1],c=o[2];if(function(e){return"function"===typeof e}(e))i=function(){return HC(e())};else{var u=HC(e);i=function(){return u}}function l(e,t){void 0===e&&(e=i());var n=PC([s[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(dk(e))return void 0===(r=n(e,t))?e:r;if(fk(e))return hC(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=s;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}u&&e.addDefaultCase(u)}))}return o.forEach((function(e){var n,r,o=i[e],u=t+"/"+e;"reducer"in o?(n=o.reducer,r=o.prepare):n=o,s[e]=n,a[u]=n,c[e]=r?KC(u,r):KC(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:c,caseReducers:s,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:(e,t)=>{e.user=t.payload},logout:e=>{e.user=null}}}),{login:sx,logout:ax}=ox.actions,cx=e=>e.user.user,ux=ox.reducer;const lx=function(){const e=ek(cx);return(0,ie.jsxs)("div",{className:"profileScreen",children:[(0,ie.jsx)(oe,{}),(0,ie.jsxs)("div",{className:"profileScreen__body",children:[(0,ie.jsx)("h1",{children:"Edit profile"}),(0,ie.jsxs)("div",{className:"profileScreen__info",children:[(0,ie.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png",alt:"Avatar"}),(0,ie.jsxs)("div",{className:"profileScreen__details",children:[(0,ie.jsx)("h2",{children:e.email}),(0,ie.jsxs)("div",{className:"profileScreen__plans",children:[(0,ie.jsx)("h3",{children:"Plans"}),(0,ie.jsxs)("div",{className:"profileScreen__subplans",children:[(0,ie.jsxs)("h4",{children:["Netflix Standard",(0,ie.jsx)("br",{}),(0,ie.jsx)("span",{children:"1080p"})]}),(0,ie.jsx)("button",{children:"Subscribe"})]}),(0,ie.jsxs)("div",{className:"profileScreen__subplans",children:[(0,ie.jsxs)("h4",{children:["Netflix Standard",(0,ie.jsx)("br",{}),(0,ie.jsx)("span",{children:"720p"})]}),(0,ie.jsx)("button",{children:"Subscribe"})]}),(0,ie.jsx)("button",{onClick:()=>FT.signOut(),className:"profileScreen__signout",children:"Sign out"})]})]})]})]})]})};const hx=function(){const e=ek(cx),t=uk();return(0,r.useEffect)((()=>FT.onAuthStateChanged((e=>{e?(console.log(e),t(sx({uid:e.uid,email:e.email}))):(console.log("nope"),t(ax()))}))),[t]),(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsx)("div",{className:"app",children:(0,ie.jsx)(tn,{children:e?(0,ie.jsxs)(ne,{children:[(0,ie.jsx)($,{exact:!0,path:"/profile",children:(0,ie.jsx)(lx,{})}),(0,ie.jsx)($,{exact:!0,path:"/",children:(0,ie.jsx)(en,{})})]}):(0,ie.jsx)(jT,{})})})})},dx=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))},fx=function(e){var t,n=QC(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,s=r.middleware,a=void 0===s?n():s,c=r.devTools,u=void 0===c||c,l=r.preloadedState,h=void 0===l?void 0:l,d=r.enhancers,f=void 0===d?void 0:d;if("function"===typeof o)t=o;else{if(!qC(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=EC(o)}var p=a;"function"===typeof p&&(p=p(n));var m=TC.apply(void 0,p),g=IC;u&&(g=BC(jC({trace:!1},"object"===typeof u&&u)));var y=new GC(m),v=y;return Array.isArray(f)?v=PC([m],f):"function"===typeof f&&(v=f(y)),SC(t,h,g.apply(void 0,v))}({reducer:{user:ux}}),px=document.getElementById("root");(0,i.H)(px).render((0,ie.jsx)(r.StrictMode,{children:(0,ie.jsx)(ok,{store:fx,children:(0,ie.jsx)(hx,{})})})),dx()})()})();
//# sourceMappingURL=main.f54c9af5.js.map